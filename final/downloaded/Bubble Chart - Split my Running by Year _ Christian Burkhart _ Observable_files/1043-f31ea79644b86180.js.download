(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1043],{57787:function(e,t,s){"use strict";s.d(t,{Fl:function(){return j},b3:function(){return b},fI:function(){return C},od:function(){return k}});var n=s(41799),r=s(85893),i=s(65988),a=s.n(i),o=s(54329),l=s(87769),c=s(46564),d=s(84749),h=s(84193),u=s(7483),m=s(12447),p=s(74873),x=s(70915),f=s(27193),g=s(67294),v=s(9383);const b=e=>{let{collection:t,format:s,index:n,parentCollection:i,reorder:a}=e;const o=i&&i.ordered,l=i&&void 0!==n&&i.ordered?n+1:void 0,d=(0,g.useRef)(null);(0,p.z)({index:n,ref:d,dataSelector:"collection-order",onDrop:a,disabled:!o});const h=o?(0,r.jsx)("button",{"aria-label":"Drag to reorder",className:"pv2 pr2 moon-gray hover-dark-gray bg-transparent bn tooltipped tooltipped-e",ref:d,style:{cursor:"grab",lineHeight:0},children:(0,r.jsx)(c.Z,{style:{width:14}})}):null;return(0,r.jsx)(y,{collection:t,format:s,url:(0,x.WG)(t),order:l,hamburger:h,showAccess:!0,showMenu:!0})},j=e=>{let{collection:t,format:s,index:n,parentCollection:i}=e;const a=i&&void 0!==n&&i.ordered?n+1:void 0;return(0,r.jsx)(y,{collection:t,format:s,url:(0,x.WG)(t),order:a,showMenu:!1})},y=e=>{let{collection:t,format:s="list",url:n,order:i,hamburger:a,showMenu:o,showAccess:l=!1}=e;const c=(0,m.GS)(m.ro),{title:d,description:u,listing_count:p,thumbnail:x}=t;return(0,r.jsxs)("div",{"data-cy":"collection-listing",className:"".concat("grid"===s?"pt2":"pv2 flex items-center"),children:[a,void 0!==i&&(0,r.jsxs)("div",{className:"mr2 f6 fw6",children:[i,"."]}),(0,r.jsx)(h.Z,{href:n,children:(0,r.jsx)("a",{className:"no-underline",children:(0,r.jsx)(N,{thumbnail:x,format:s,mobile:c})})}),(0,r.jsxs)("div",{className:"grid"===s?"pt2":"ml3 flex-auto",children:["grid"===s&&l&&(0,r.jsx)("div",{className:"mb1 f7 fw5 gray",children:(0,r.jsx)(k,{collection:t})}),(0,r.jsxs)("div",{className:"flex f6 fw6 justify-between lh-f6",children:[(0,r.jsx)("div",{children:(0,r.jsx)(h.Z,{href:n,children:(0,r.jsxs)("a",{className:"no-underline near-black hover-blue",children:[d,(0,r.jsxs)("span",{className:"fw5 gray",children:[" (",p,")"]})]})})}),"grid"===s&&o&&(0,r.jsx)(v.W,{collection:t,inList:!0})]}),(0,r.jsxs)("div",{className:"flex pr3 f7 fw5 mid-gray lh-title items-center truncate truncate-two-lines",title:u,children:["list"===s&&l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"gray",children:(0,r.jsx)(k,{collection:t})}),u?(0,r.jsx)("span",{className:"ph1 light-gray",children:"\u2022"}):null]}),u||null]})]}),"list"===s&&o&&(0,r.jsx)(v.W,{collection:t,inList:!0})]})},w={className:"mr1 moon-gray",height:13,width:13},k=e=>{let{collection:t,title:s,className:i,size:a}=e;return(0,r.jsxs)("span",{className:"inline-flex items-center".concat(i?" ".concat(i):""),title:s,children:["private"===t.type?(0,r.jsx)(d.Z,(0,n.Z)({},w,a)):(0,r.jsx)(l.Z,(0,n.Z)({},w,a)),(0,x.iM)(t)]})},N=e=>{let{thumbnail:t,format:s,mobile:n}=e;const i="grid"===s?10:8,o="calc(100% - ".concat(i,"px)");return(0,r.jsxs)("div",{style:"grid"===s?{paddingTop:"62.5%"}:{width:n?72:108,height:66},className:"jsx-84d72bb4b9015d25 relative collection-thumbnail",children:[(0,r.jsx)("div",{style:{top:i,left:i,width:o,height:o},className:"jsx-84d72bb4b9015d25 absolute bg-white ba b--silver br2"}),(0,r.jsx)("div",{style:{top:i/2,left:i/2,width:o,height:o},className:"jsx-84d72bb4b9015d25 absolute bg-white ba b--silver br2"}),(0,r.jsx)(u.p,{className:"absolute top-0 left-0 ba b--silver br2 overflow-hidden",style:{width:o,height:o},hash:t}),(0,r.jsx)(a(),{id:"84d72bb4b9015d25",children:".collection-thumbnail.jsx-84d72bb4b9015d25:hover div.jsx-84d72bb4b9015d25{-webkit-box-shadow:0 4px 12px rgba(0,0,0,.06);-moz-box-shadow:0 4px 12px rgba(0,0,0,.06);box-shadow:0 4px 12px rgba(0,0,0,.06);-webkit-transform:translateY(-1px);-moz-transform:translateY(-1px);-ms-transform:translateY(-1px);-o-transform:translateY(-1px);transform:translateY(-1px);border-color:var(--light-gray)}"})]})},C=e=>{let{collection:t}=e;return t.parent_collections.length<=0?null:(0,r.jsxs)(g.Fragment,{children:[(0,r.jsx)(o.Z,{className:"mr1 moon-gray",style:{flexShrink:0}}),(0,r.jsxs)("div",{className:"truncate",children:["Listed in"," ",(0,f.If)(t.parent_collections.map(((e,t)=>(0,r.jsx)(h.Z,{href:(0,x.WG)(e),children:(0,r.jsx)("a",{className:"no-underline dark-gray hover-blue",children:e.title})},t))))]})]})}},9383:function(e,t,s){"use strict";s.d(t,{W:function(){return u}});var n=s(85893),r=s(37497),i=s(33112),a=s(17764),o=s(14500),l=s(63231),c=s(21013),d=s(8433),h=s(42568);s(67294);const u=(0,s(56651).$j)(null,(e=>({dispatch:e})))((e=>{let{dispatch:t,collection:s,inList:u}=e;const m="parent_collections"in s?s.parent_collections.length:s.parent_collection_count;return(0,n.jsxs)(h.v2,{children:[u?(0,n.jsx)(r.hU,{"data-cy":"collection-actions",className:"moon-gray hover-near-black",icon:o.Z,colorless:!0,asMenuButton:!0}):(0,n.jsx)(r.aX,{"data-cy":"edit-collection",text:"Edit",icon:a.Z,colorless:!0,asMenuButton:!0,iconOnRight:!0}),(0,n.jsxs)(h.qy,{children:[(0,n.jsxs)(h.sN,{onSelect:()=>{t({type:"showModal",modal:"editCollection",modalProps:{collection:s}})},children:[(0,n.jsx)(l.Z,{className:"mr2"}),"Edit Collection"]}),(0,n.jsxs)(h.sN,{onSelect:()=>{t({type:"showModal",modal:"collections",modalProps:{collectionListing:s}})},children:[(0,n.jsx)(i.Z,{className:"mr2"}),m>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"nowrap",children:"In collections"}),(0,n.jsx)("span",{className:"ml2 f7 mid-gray bg-light-silver br2",style:{padding:"2px 4.5px"},children:m})]}):(0,n.jsx)("span",{className:"nowrap",children:"Add to collections"})]}),(0,n.jsxs)(h.sN,{onSelect:()=>{t({type:"showModal",modal:"setThumbnail",modalProps:{collection:s}})},children:[(0,n.jsx)(c.Z,{className:"mr2"})," Set thumbnail"]}),(0,n.jsxs)(h.sN,{onSelect:()=>{t({type:"showModal",modal:"deleteCollection",modalProps:{collection:s}})},className:"hover-dark-red hover-bg-washed-red",children:[(0,n.jsx)(d.Z,{className:"mr2"})," Delete"]})]})]})}))},24741:function(e,t,s){"use strict";s.d(t,{$:function(){return j},r:function(){return v}});var n=s(85893),r=s(36307),i=s(84193),a=s(23105),o=s(7483),l=s(14151),c=s(12447),d=s(88725),h=s(3142),u=s(62990),m=s(36448),p=s(11163),x=s(67294);const f=e=>{let{notebook:t,index:s,textColor:r}=e;const{owner:a,creator:c,title:p,publishTime:f,thumbnail:g}=t,v=(0,l.d)((0,x.useCallback)((()=>f?(0,u.LN)(f):""),[f]));return(0,n.jsxs)("div",{className:"flex pv1 flex-row-reverse justify-between items-center",children:[(0,n.jsx)(i.Z,{"aria-label":p,href:(0,d.Bi)(t),children:(0,n.jsx)("a",{children:(0,n.jsx)(o.p,{className:"relative mt2 ml3 bg-white br2 hover-light-shadow flex-no-shrink",style:{width:90,height:60},hash:g})})}),(0,n.jsxs)("div",{className:"flex f6 fw6",children:[(0,n.jsx)("div",{className:"dib mr2 fw7 gold",children:(s+1).toString().padStart(2,"0")}),(0,n.jsxs)("div",{children:[(0,n.jsx)(i.Z,{href:(0,d.Bi)(t),children:(0,n.jsx)("a",{className:"hover-blue pointer no-underline line-clamp-2 ".concat(r),children:p})}),(0,n.jsxs)("div",{className:"mt1 f7 fw5 gray lh-copy",children:[(0,h.p0)(t)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{href:(0,m.GN)(c),children:(0,n.jsx)("a",{className:"inline-flex no-underline dark-gray items-center",children:(0,n.jsx)("span",{children:(0,m.RX)(c)})})}),(0,n.jsx)("span",{className:"mh1 mid-gray",children:"in"}),(0,n.jsx)(i.Z,{href:(0,m.GN)(a),children:(0,n.jsx)("a",{className:"inline-flex no-underline dark-gray items-center",children:(0,n.jsx)("span",{children:(0,m.RX)(a)})})})]}):(0,n.jsx)(i.Z,{href:(0,m.GN)(a),children:(0,n.jsx)("a",{className:"dib fw6 no-underline dark-gray hover-blue",children:(0,m.RX)(a)})})," ",v]})]})]})]})},g=e=>{let{trendingSection:t,popularSection:s,textColor:a}=e;const o=(0,c.GS)(c.hs,!1);return(0,n.jsxs)("div",{style:{minHeight:"22em"},className:"flex-l mt4 sans-serif flex-row-reverse items-start",children:[(0,n.jsxs)("div",{style:{maxWidth:o?"310px":"unset"},className:o?"w-33 flex-no-shrink":"mb4 pb4 bb b--light-silver",children:[(0,n.jsx)("div",{className:"mb3 f4 fw7 pb2 bb b--light-silver ".concat(a),children:"Most liked last week"}),s]}),(0,n.jsxs)("div",{className:"w-100 pr5-l",children:[(0,n.jsxs)("div",{className:"flex pb2 mb3 b--light-silver bb-ns justify-between",children:[(0,n.jsx)("div",{className:"f4 fw7 ".concat(a),children:"Trending"}),(0,n.jsx)(i.Z,{href:"/explore",children:(0,n.jsxs)("a",{className:"db flex f7 fw6 no-underline blue hover-lightest-blue items-center lh-f5",children:["Explore more ",(0,n.jsx)(r.Z,{className:"child"})]})})]}),(0,n.jsx)("div",{className:"sans-serif listing-grid",children:t})]})]})},v=e=>{let{trending:t,popular:s,isMarketing:r}=e;const i=r?"observable-navy":"near-black";return s&&t?(0,n.jsx)(g,{textColor:i,popularSection:s.map(((e,t)=>(0,n.jsx)(f,{notebook:e,index:t,textColor:i},t))),trendingSection:t.map(((e,t)=>(0,n.jsx)(a.pg,{type:"reader",format:"grid",notebook:e},t)))}):null},b=[{title:"Trending",slug:"/trending"},{title:"Recent",slug:"/recent"},{title:"Most liked last month",slug:"/top?type=recent"},{title:"Most liked all time",slug:"/top"}],j=e=>{let{links:t=b}=e;const{pathname:s,query:r}=(0,p.useRouter)(),a="recent"===r.type?"".concat(s,"?type=recent"):s;return(0,n.jsx)("div",{className:"flex pt1 mt3 justify-center items-center",children:t.map(((e,t)=>{let{title:s,slug:r}=e;return(0,n.jsx)(i.Z,{href:r,children:(0,n.jsx)("a",{className:"db flex pa2 ph3-ns mh2 f7 fw6 no-underline gray hover-blue items-center br-pill ".concat(a===r?"near-black bg-near-white":""),children:s})},t)}))})}},99321:function(e,t,s){"use strict";s.d(t,{I:function(){return d}});var n=s(85893),r=s(37497),i=s(58171),a=s(41799),o=s(69396);var l=e=>(0,n.jsxs)("svg",(0,o.Z)((0,a.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,n.jsx)("path",{d:"M8 4L15 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M8 8L12 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M4 3V13M4 13L1 10.5M4 13L7 10.5",stroke:"currentColor",strokeWidth:"2"})]}));var c=e=>(0,n.jsxs)("svg",(0,o.Z)((0,a.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,n.jsx)("path",{d:"M8 12L15 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M8 8L12 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M4 13L4 3M4 3L7 5.5M4 3L0.999999 5.5",stroke:"currentColor",strokeWidth:"2"})]}));s(67294);const d=e=>{let{sort:t,direction:s,setSort:a,setDirection:o,relevance:d,publicOnly:h=!1}=e;return(0,n.jsxs)("div",{className:"flex mr2-ns items-center",children:[(0,n.jsx)("label",{className:"mr2 f7 fw6 gray lh-f7",htmlFor:"sort",children:"Sort"}),(0,n.jsxs)(i.g,{id:"sort",value:t||"",onChange:e=>a(e.target.value||void 0),children:[d?(0,n.jsx)("option",{value:"relevance",children:"Relevance"}):null,h?null:(0,n.jsx)("option",{value:"edited",children:"Edited"}),h?null:(0,n.jsx)("option",{value:"created",children:"Created"}),(0,n.jsx)("option",{value:"title",children:"Title"}),(0,n.jsx)("option",{value:"likes",children:"Likes"}),(0,n.jsx)("option",{value:"published",children:"Published"})]}),(0,n.jsx)(r.hU,{className:"br2 tooltipped tooltipped-sw","aria-label":"Sort order",onClick:()=>o("desc"===s?"asc":"desc"),icon:"desc"===s?l:c})]})}},33112:function(e,t,s){"use strict";var n=s(41799),r=s(69396),i=s(85893);s(67294);t.Z=e=>(0,i.jsxs)("svg",(0,r.Z)((0,n.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,i.jsx)("path",{d:"M3 3H7.5V1H3V3ZM6.5 2V7.5H8.5V2H6.5ZM7.5 6.5H2V8.5H7.5V6.5ZM3 7.5V3H1V7.5H3ZM6.5 7.5V12H8.5V7.5H6.5ZM6.5 12H3V14H6.5V12ZM3 12V7.5H1V12H3ZM7.5 8.5H12V6.5H7.5V8.5ZM14 6.5V3H12V6.5H14ZM12 1H7.5V3H12V1ZM14 3C14 1.89543 13.1046 1 12 1V3H14ZM12 8.5C13.1046 8.5 14 7.60457 14 6.5H12V8.5ZM6.5 12V14C7.60457 14 8.5 13.1046 8.5 12H6.5ZM3 12H1C1 13.1046 1.89543 14 3 14V12ZM3 1C1.89543 1 1 1.89543 1 3H3V1Z",fill:"currentColor"}),(0,i.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"15",stroke:"currentColor",strokeWidth:"2"}),(0,i.jsx)("path",{d:"M15 12H9",stroke:"currentColor",strokeWidth:"2"})]}))},64804:function(e,t,s){"use strict";var n=s(41799),r=s(69396),i=s(85893);s(67294);t.Z=e=>(0,i.jsxs)("svg",(0,r.Z)((0,n.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,i.jsx)("path",{d:"M2 6C2 5.44772 2.44772 5 3 5H10C10.5523 5 11 5.44772 11 6V13C11 13.5523 10.5523 14 10 14H3C2.44772 14 2 13.5523 2 13V6Z",stroke:"currentColor",strokeWidth:"2"}),(0,i.jsx)("path",{d:"M4 2.00004L12 2.00001C13.1046 2 14 2.89544 14 4.00001V12",stroke:"currentColor",strokeWidth:"2"}),e.children]}))},3338:function(e,t,s){"use strict";s.d(t,{s:function(){return o}});var n=s(41799),r=s(69396),i=s(85893);s(67294);const a=e=>(0,i.jsxs)("svg",(0,r.Z)((0,n.Z)({width:"16",height:"16",fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 16 16"},e),{children:[(0,i.jsx)("path",{d:"M4 12.4788V3.52116C4 2.23802 5.50646 1.54723 6.47878 2.38451L11.68 6.86335C12.375 7.46178 12.375 8.53822 11.68 9.13665L6.47878 13.6155C5.50646 14.4528 4 13.762 4 12.4788Z"}),e.children]}));t.Z=a;const o=e=>(0,i.jsx)(a,(0,n.Z)({fill:"currentColor"},e))},77419:function(e,t,s){"use strict";s.d(t,{bd:function(){return u},p1:function(){return m},wd:function(){return p}});var n=s(85893),r=s(10198),i=s(27193),a=s(88725),o=s(72760),l=s(3142);const c=512,d=new Set(["Paragraph","ATXHeading2","ATXHeading3","ATXHeading4","ATXHeading5"]),h=new Set(["EmphasisMark","LinkMark","LinkLabel","URL","HeaderMark"]),u=e=>{let{notebook:t}=e;const{model:s,thumbnail:r,saveTime:d,publishTime:h}=t,u=(0,i.Ui)(s),m=function(e){let t="";for(const r of e){const{body:e,tag:i}=(0,o.Qc)(r);if(e){var s,n;const r="TemplateLiteral"===e.type&&"md"===(null===i||void 0===i?void 0:i.input)?e.quasis:"TaggedTemplateExpression"===e.type&&"md"===(null===(s=e.tag)||void 0===s?void 0:s.name)?null===(n=e.quasi)||void 0===n?void 0:n.quasis:null,a=null===r||void 0===r?void 0:r.map((e=>e.value.raw)).join(" ");for(const e of f(a))if(t+="".concat(g(e)," "),t.length>c)return t.slice(0,c).trim()}}return t.trim()||null}(s.nodes),p=t.authors.length?t.authors:[t.owner],x=(0,a.UW)(t);return(0,n.jsxs)(n.Fragment,{children:[(0,l.cg)(t)||(0,l.nv)(t)?(0,n.jsx)("meta",{name:"robots",content:"noindex"}):null,(0,n.jsx)("meta",{property:"og:type",content:"article"}),(0,n.jsx)("meta",{property:"og:url",content:"".concat("https://observablehq.com").concat(x)}),(0,n.jsx)("meta",{property:"og:site_name",content:"Observable"}),(0,n.jsx)("meta",{name:"twitter:site",content:"@observablehq"}),(0,n.jsx)("meta",{name:"title",content:u}),(0,n.jsx)("meta",{property:"og:title",content:u}),m&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meta",{name:"description",content:m}),(0,n.jsx)("meta",{property:"og:description",content:m})]}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meta",{property:"og:image",content:(0,a.Nl)(r)}),(0,n.jsx)("meta",{name:"twitter:card",content:"summary_large_image"})]}),(0,n.jsx)("meta",{name:"author",content:p.map((e=>(0,i.KY)(e))).join(", ")}),p.map((e=>(0,n.jsx)("meta",{name:"article:author",content:"".concat("https://observablehq.com","/@").concat(e.login)},e.login))),h&&(0,n.jsx)("meta",{property:"article:published_time",content:h.toISOString()}),(0,n.jsx)("meta",{property:"article:modified_time",content:d.toISOString()})]})},m=e=>{let{collection:t}=e;const{description:s,thumbnail:r,owner:o,owner:{login:l},slug:c,update_time:d}=t,h=(0,i.Ui)(t);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meta",{property:"og:type",content:"article"}),(0,n.jsx)("meta",{property:"og:url",content:"".concat("https://observablehq.com","/collection/@").concat(l,"/").concat(c)}),(0,n.jsx)("meta",{property:"og:site_name",content:"Observable"}),(0,n.jsx)("meta",{name:"twitter:site",content:"@observablehq"}),(0,n.jsx)("meta",{name:"title",content:h}),(0,n.jsx)("meta",{property:"og:title",content:h}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meta",{name:"description",content:s}),(0,n.jsx)("meta",{property:"og:description",content:s})]}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meta",{property:"og:image",content:(0,a.Nl)(r)}),(0,n.jsx)("meta",{name:"twitter:card",content:"summary_large_image"})]}),(0,n.jsx)("meta",{name:"author",content:(0,i.KY)(o)}),(0,n.jsx)("meta",{name:"article:author",content:"".concat("https://observablehq.com","/@").concat(l)}),(0,n.jsx)("meta",{property:"article:modified_time",content:d.toISOString()})]})},p=e=>{let{user:t}=e;const{avatar_url:s,bio:r,login:a}=t,o=(0,i.KY)(t),l="Recent notebooks by ".concat(o);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meta",{property:"og:type",content:"profile"}),(0,n.jsx)("meta",{property:"og:url",content:"".concat("https://observablehq.com","/@").concat(a)}),(0,n.jsx)("meta",{property:"og:site_name",content:"Observable"}),(0,n.jsx)("meta",{name:"twitter:site",content:"@observablehq"}),(0,n.jsx)("meta",{name:"title",content:l}),(0,n.jsx)("meta",{property:"og:title",content:l}),(0,n.jsx)("meta",{property:"description",content:r}),(0,n.jsx)("meta",{property:"og:description",content:r}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meta",{property:"og:image",content:s}),(0,n.jsx)("meta",{name:"twitter:card",content:"summary"})]}),(0,n.jsx)("meta",{property:"profile:last_name",content:o}),(0,n.jsx)("meta",{property:"profile:username",content:a})]})};function x(e){const t=r.E2.startParse(e);let s;for(;!(s=t.advance()););return s}function*f(e){if(!e)return;const t=x(e).cursor();for(;t.next();)d.has(t.name)&&(yield e.slice(t.from,t.to))}function g(e){let t=e;const s=x(e).cursor();for(s.lastChild();s.prev();)h.has(s.name)&&(t=t.slice(0,s.from)+t.slice(s.to));return t.trim()}},3683:function(e,t,s){"use strict";s.d(t,{q:function(){return h}});var n=s(41799),r=s(69396),i=s(99534),a=s(85893),o=s(14151),l=s(93939),c=s(62990),d=s(67294);const h=e=>{var{time:t,absolute:s,numeric:h,precision:u}=e,m=(0,i.Z)(e,["time","absolute","numeric","precision"]);const p=(0,l.L)(t),x=(0,o.d)((0,d.useCallback)((()=>t.toLocaleString("en")),[t]));return(0,a.jsx)("span",(0,r.Z)((0,n.Z)({title:x},m),{children:s?h?(0,c.WB)(t):(0,c.p6)(t):u?(0,c.aP)(t,p,u):(0,c.lY)(t,p)}))}},75470:function(e,t,s){"use strict";s.d(t,{w:function(){return r}});var n=s(67294);function r(e,t,s){(0,n.useEffect)((()=>{"pro"===(null===t||void 0===t?void 0:t.tier)&&t.login===s&&t.settings.confirm_migration&&e({type:"showModal",modal:"migrated"})}),[t,e,s])}},80910:function(e,t,s){"use strict";s.r(t),s.d(t,{DashboardPageContainer:function(){return Ct},__N_SSP:function(){return Nt},default:function(){return Zt}});var n=s(41799),r=s(69396),i=s(99534),a=s(85893),o=s(8952),l=s(40452),c=s(75470),d=s(12447),h=s(51238),u=(s(31343),s(28067)),m=s(36448),p=s(9008),x=s.n(p),f=s(11163),g=s(67294),v=s(10099),b=s(19423),j=s(39736),y=s(26561),w=s(57787),k=s(77025),N=s(37497),C=s(58171),M=s(33112),Z=s(9234),L=s(23105),S=s(602),_=s(66421),P=s(81816);function R(e){return{tab:(0,u.T)(e,"tab"),page:(0,u.T)(e,"page"),type:(0,u.T)(e,"type"),new:(0,u.T)(e,"new")}}const T=e=>{let{context:t,user:s,dispatch:o}=e;const{push:l,replace:c,query:d}=(0,f.useRouter)(),h=R(d),{new:m}=h,p=(0,i.Z)(h,["new"]),{type:x}=p;const[g]=(0,S.h_)(function(e,t){const s=R(t);return"/collections/@".concat(e.login,"?").concat((0,P.P)((0,n.Z)({page:s.page||1},s.type?{type:s.type}:null)))}(t,d));return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:L.r2,className:"flex mb3 fw7 near-black justify-between items-center",children:["Collections",(0,_.pq)(s,t)&&(0,a.jsx)(N.aX,{"data-cy":"new-collection",onClick:()=>o({type:"showModal",modal:"createCollection"}),text:"New",colorless:!0,icon:M.Z})]}),g?(0,a.jsx)(Z.a,{response:g,items:"collections",filters:()=>(0,a.jsxs)("div",{className:"f7",children:[(0,a.jsx)("label",{className:"mr1 f7 fw6 gray lh-f7",htmlFor:"type",children:"Type"}),(0,a.jsxs)(C.g,{className:"ml1 near-black",id:"type",value:x||"",onChange:e=>{return t=e.target.value||void 0,void l((0,u.r)((0,r.Z)((0,n.Z)({},p),{type:t})));var t},children:[(0,a.jsx)("option",{value:"",children:"All"}),(0,a.jsx)("option",{value:"public",children:"Public"}),(0,a.jsx)("option",{value:"private",children:"team"===t.type?"Team Private":"Private"})]})]}),emptyMessage:"\u261d\ufe0f You haven\u2019t created any collections yet.",children:(e,t)=>(0,_.D7)(s,e)?(0,a.jsx)(w.b3,{collection:e,format:t,parentCount:e.parent_collection_count}):(0,a.jsx)(w.Fl,{collection:e,format:t})}):null,m&&(0,a.jsx)(k.W,{onDismiss:()=>c((0,u.r)((0,n.Z)({},p)))})]})};var I=s(3896),O=s(28923),H=s(36307),F=s(99414),D=s(84193),E=s(62806),V=s(74834),U=s(81416),A=s(8385);const q=e=>(0,a.jsxs)("svg",(0,r.Z)((0,n.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),{children:[(0,a.jsx)("rect",{x:"5",y:"4",width:"14",height:"16",rx:"2",fill:"#D4E6DD"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 7C8.44772 7 8 7.44772 8 8C8 8.55228 8.44772 9 9 9H15C15.5523 9 16 8.55228 16 8C16 7.44772 15.5523 7 15 7H9ZM8 12C8 11.4477 8.44772 11 9 11H15C15.5523 11 16 11.4477 16 12C16 12.5523 15.5523 13 15 13H9C8.44772 13 8 12.5523 8 12ZM8 16C8 15.4477 8.44772 15 9 15H12C12.5523 15 13 15.4477 13 16C13 16.5523 12.5523 17 12 17H9C8.44772 17 8 16.5523 8 16Z",fill:"#38A070"})]})),B=e=>(0,a.jsxs)("svg",(0,r.Z)((0,n.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),{children:[(0,a.jsx)("rect",{x:"5",y:"4",width:"14",height:"16",rx:"2",fill:"#F6EDCC"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3713 9.92435C10.8332 9.65068 11.1429 9.14722 11.1429 8.57143C11.1429 7.70355 10.4393 7 9.57143 7C8.70355 7 8 7.70355 8 8.57143C8 9.1471 8.30955 9.65048 8.77129 9.92418L8.77129 15.0758C8.30955 15.3495 8 15.8529 8 16.4285C8 17.2964 8.70355 18 9.57143 18C10.4393 18 11.1429 17.2964 11.1429 16.4285C11.1429 15.8528 10.8332 15.3493 10.3713 15.0756L10.3713 13.3H12.0714C14.0216 13.3 15.6287 11.8308 15.8463 9.93885C16.322 9.66872 16.6429 9.15755 16.6429 8.57143C16.6429 7.70355 15.9393 7 15.0714 7C14.2036 7 13.5 7.70355 13.5 8.57143C13.5 9.13178 13.7933 9.62363 14.2347 9.90184C14.0459 10.925 13.1491 11.7 12.0714 11.7H10.3713V9.92435Z",fill:"#EAC13B"})]})),Y=e=>(0,a.jsxs)("svg",(0,r.Z)((0,n.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),{children:[(0,a.jsx)("rect",{x:"4",y:"4",width:"14",height:"16",rx:"2",fill:"#DAE4FF"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 8C7 7.44772 7.44772 7 8 7H14C14.5523 7 15 7.44772 15 8C15 8.55228 14.5523 9 14 9H8C7.44772 9 7 8.55228 7 8ZM8 11C7.44772 11 7 11.4477 7 12C7 12.5523 7.44772 13 8 13H10C10.5523 13 11 12.5523 11 12C11 11.4477 10.5523 11 10 11H8ZM8 15C7.44772 15 7 15.4477 7 16C7 16.5523 7.44772 17 8 17H9C9.55228 17 10 16.5523 10 16C10 15.4477 9.55228 15 9 15H8ZM19.5136 8.76598C19.1505 8.34429 18.5129 8.30017 18.0952 8.66784L12.8763 13.261C12.7346 13.3857 12.631 13.5481 12.5777 13.7293L11.9423 15.888C11.7373 16.5844 12.3194 17.2603 13.0385 17.1609L15.2559 16.8545C15.4503 16.8277 15.6325 16.7442 15.7797 16.6146L21.006 12.015C21.4174 11.6529 21.4607 11.0271 21.1031 10.6118L19.5136 8.76598Z",fill:"#4269D0"})]})),W=e=>(0,a.jsxs)("svg",(0,r.Z)((0,n.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),{children:[(0,a.jsx)("path",{d:"M18.92 4.11466C18.5779 3.76123 18.1718 3.48088 17.7249 3.28962C17.2779 3.09836 16.7989 2.99995 16.3151 3C15.3375 3 14.4008 3.57601 13.7102 4.2894L12.9998 5.02447L12.2893 4.2894C10.851 2.80358 8.51789 2.62885 7.07954 4.11466C6.73729 4.46806 6.4658 4.88765 6.28057 5.34946C6.09534 5.81127 6 6.30625 6 6.80613C6 7.30601 6.09534 7.80099 6.28057 8.2628C6.4658 8.72461 6.73729 9.14419 7.07954 9.49759L7.78996 10.2303L11.5153 14.356C12.3095 15.2356 13.69 15.2356 14.4842 14.356L18.2096 10.2303L18.92 9.49759C19.2624 9.14427 19.534 8.72471 19.7193 8.26289C19.9046 7.80107 20 7.30605 20 6.80613C20 6.3062 19.9046 5.81118 19.7193 5.34936C19.534 4.88754 19.2624 4.46798 18.92 4.11466Z",fill:"#FAE1E1"}),(0,a.jsx)("path",{d:"M16.92 8.11466C16.5779 7.76123 16.1718 7.48088 15.7249 7.28962C15.2779 7.09836 14.7989 6.99995 14.3151 7C13.3375 7 12.4008 7.57601 11.7102 8.2894L10.9998 9.02447L10.2893 8.2894C8.85098 6.80358 6.51789 6.62885 5.07954 8.11466C4.73729 8.46806 4.4658 8.88765 4.28057 9.34946C4.09534 9.81127 4 10.3062 4 10.8061C4 11.306 4.09534 11.801 4.28057 12.2628C4.4658 12.7246 4.73729 13.1442 5.07954 13.4976L5.78996 14.2303L9.51535 18.356C10.3095 19.2356 11.69 19.2356 12.4842 18.356L16.2096 14.2303L16.92 13.4976C17.2624 13.1443 17.534 12.7247 17.7193 12.2629C17.9046 11.8011 18 11.3061 18 10.8061C18 10.3062 17.9046 9.81118 17.7193 9.34936C17.534 8.88754 17.2624 8.46798 16.92 8.11466Z",fill:"#E14747"})]})),z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,n.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),{children:[(0,a.jsx)("rect",{x:"7",y:"4",width:"14",height:"10",rx:"2",fill:"#EBC855"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 8C16.1046 8 17 8.89543 17 10V17C17 18.1046 16.1046 19 15 19H9.42453L8.2206 20.2512C7.8272 20.66 7.17285 20.66 6.77945 20.2512L5.57552 19H5C3.89543 19 3 18.1046 3 17V10C3 8.89543 3.89543 8 5 8H15Z",fill:"#F3E9C7"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 11C5.44772 11 5 11.4477 5 12C5 12.5523 5.44772 13 6 13H14C14.5523 13 15 12.5523 15 12C15 11.4477 14.5523 11 14 11H6ZM6 14C5.44772 14 5 14.4477 5 15C5 15.5523 5.44772 16 6 16H12C12.5523 16 13 15.5523 13 15C13 14.4477 12.5523 14 12 14H6Z",fill:"#EAC13B"})]}));var X=s(7483),G=s(3683),$=s(88725);function K(e){return[e.id,e]}function Q(e,t,s){const n=t.shift();e.has(n)||e.set(n,t.length?new Map:[]),t.length?Q(e.get(n),t,s):e.get(n).push(s)}function J(e){return"edit"===e||"publish"===e||"merge"===e?"edit":e}function ee(e){switch(e.type){case"create":return"created";case"edit":return"edited";case"publish":return e.public?e.first_public?"published":"republished":e.first_publish?"shared":"reshared";case"comment":return"commented";case"fork":return"forked";case"merge":return"merged";case"like":return"liked";case"trash":return"put in the trash"}}function te(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,m.v3)(e,t.user)?s?"You":"you":(0,m.RX)(t.user)}function se(e,t){if(1===t.length)return"trash"===t[0].type?"This notebook was ".concat(ee(t[0])):"".concat(te(e,t[0])," ").concat(ee(t[0]));let s=[];const n=t.slice().reverse();if(1===new Set(t.map((e=>ee(e)))).size)s=n.map(((t,s)=>te(e,t,0===s))),s[s.length-1]+=" ".concat(ee(t[0]));else{let t;for(const[r,i]of n.entries()){const n=te(e,i,0===r),a=ee(i),o=n.toLowerCase()!==t?"".concat(n," ").concat(a):a;s.push(o),t=n.toLowerCase()}}const r=s.pop();return"".concat(s.join(", ")," and ").concat(r)}const ne=e=>{let{days:t,type:s}=e;return(0,a.jsx)("div",{className:"pv3 mt3 tc ba b--silver br3 b--dashed bw1",children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"f6 tc mid-gray lh-copy",children:["No ","public"===s?"public":""," activity"," ","1"===t?"today":"7"===t?"this week":"in the past 30 days","."]})})})},re=e=>{let{user:t,items:s,index:n,unified:r}=e;const i=s[0],{notebook:{owner:o,title:l,thumbnail:c},content:h,type:u}=i,m=(0,g.useMemo)((()=>({id:i.notebook.id,owner:i.notebook.owner,title:i.notebook.title,thumbnail:i.notebook.thumbnail,publishLevel:i.notebook.publish_level,publishTime:i.notebook.publish_time,trashed:i.notebook.trashed,roles:i.notebook.roles,sharing:i.notebook.sharing,slug:i.notebook.slug})),[i]),p=(0,d.GS)("(max-width: 640px)"),x=s.length>1,f=Array.from(new Set(s.map((e=>e.user)))).reverse(),v=f.length>1||f[0]!==o,b=function(e){switch(e.type){case"create":return q;case"edit":default:return Y;case"fork":return B;case"comment":return z;case"like":return W}}(i);let j=(0,$.Bi)(i.notebook);return"fork"===u&&(j+="/forks"),(0,a.jsx)(D.Z,{href:j,children:(0,a.jsxs)("a",{className:"flex items-center justify-between pv2-ns pv3 f6 no-underline near-black hover-blue ".concat(0===n?"":"bt b--light-silver"),children:[(0,a.jsxs)("div",{className:"flex flex-auto",children:[(0,a.jsxs)("div",{className:"flex relative mr2 flex-no-shrink items-center",children:[r&&(0,a.jsx)(A.q,{user:o,size:12,className:"h1 bg-white ba b--white br-100 bw1"}),(0,a.jsx)(b,{})]}),(0,a.jsxs)("div",{className:"pr3-ns flex-auto",children:[(0,a.jsxs)("div",{className:"flex f7 fw5 gray lh-title flex-wrap items-center",children:[(0,a.jsx)(L.vR,{notebook:m}),(0,a.jsx)("span",{className:"mh1 silver",children:"\u2022"}),se(t,s),(0,a.jsx)(G.q,{className:"ml1",time:new Date(i.time),precision:x?"day":null})]}),(0,a.jsxs)("div",{className:"flex mt1 f6 fw6 items-center justify-between lh-f7",children:[(0,a.jsx)("div",{children:l||"Untitled"}),v?(0,a.jsx)("div",{className:"flex h1 ml2 mr2 flex-no-shrink items-center",children:f.map(((e,t)=>(0,a.jsx)(A.q,{user:e,size:20,className:"relative b--white b--solid br-100",style:{marginRight:-8,borderWidth:3,zIndex:f.length-t}},e.id)))}):null]}),!x&&h&&(0,a.jsx)("div",{className:"truncate mt1 mr3 f7 fw5 gray",children:h})]})]}),(0,a.jsx)(X.p,{className:"relative ml2 ba b--silver br2 hover-light-shadow overflow-hidden",style:{width:p?72:90,height:p?48:60,flexShrink:0},hash:c})]})})};function ie(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"7";const r="1"===n?Intl.DateTimeFormat().resolvedOptions().timeZone:void 0;return"".concat(e||"team"!==t.type?"/user":"/team/".concat(t.id),"/activity?").concat((0,P.P)({type:s,days:n,timezone:r,all:e}))}const ae=e=>{let{user:t,context:s,unified:o,itemsShown:l=7}=e;const{0:c,1:d}=(0,g.useState)(!0),{0:h,1:u}=(0,g.useState)(!1),{0:p,1:x}=(0,g.useState)("all"),{0:f,1:v}=(0,g.useState)("7"),[b]=(0,S.h_)(ie(o,s,p,f)),{0:j,1:y}=(0,g.useState)();(0,g.useEffect)((()=>{b&&(u(!1),y(function(e,t){let{activity:s,documents:a,users:o}=t;const l=new Map(a.map(K)),c=new Map(o.map(K)),d=new Map;for(const f of s){var{document_id:h,user_id:u,owner_id:m}=f,p=(0,i.Z)(f,["document_id","user_id","owner_id"]);const t=m?c.get(m):e,s=h&&l.get(h);if(!s)continue;const a=u&&c.get(u);if(!a)continue;const o=(0,r.Z)((0,n.Z)({},p),{notebook:(0,n.Z)({owner:t},s),user:a}),{date:x,type:g,notebook:{id:v}}=o;Q(d,[x,v,J(g)],o)}const x=[];for(const n of d.values())for(const e of n.values())for(const t of e.values())x.push(t);return x.sort(((e,t)=>t[0].time.toISOString().localeCompare(e[0].time.toISOString())))}(s,b)),d(!1))}),[s,b]);const w=j&&(h?j:j.slice(0,l)),k=w&&w.length;return(0,m.EO)(t)&&(!w||w.length<3)?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex-ns pb2 mt4 mb2 b--light-silver bb-ns items-center justify-between",children:[(0,a.jsx)("div",{className:"mb0-ns mb3 f4 fw7 near-black",children:"Recent activity"}),(0,a.jsxs)("span",{children:[(0,a.jsxs)(C.g,{"aria-label":"Activity types",id:"type",value:p,onChange:e=>x(e.target.value),className:"mr3",children:[(0,a.jsx)("option",{value:"all",children:"All activity"}),(0,a.jsx)("option",{value:"user",children:"Your activity"}),"team"===s.type&&(0,a.jsx)("option",{value:"team",children:"Team activity"}),(0,a.jsx)("option",{value:"public",children:"Public activity"})]}),(0,a.jsxs)(C.g,{"aria-label":"Time range",id:"days",value:f||"",onChange:e=>v(e.target.value),children:[(0,a.jsx)("option",{value:"1",children:"Today"}),(0,a.jsx)("option",{value:"7",children:"This week"}),(0,a.jsx)("option",{value:"30",children:"Last 30 days"})]})]})]}),(0,a.jsx)("div",{className:"relative",children:!c&&(k?(0,a.jsxs)(a.Fragment,{children:[w.map(((e,s)=>(0,a.jsx)(re,{index:s,user:t,items:e,unified:o},s))),!h&&j.length>l?(0,a.jsx)("div",{className:"flex items-center justify-center",style:{margin:"0 -1rem",background:"linear-gradient(180deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 60%)"},children:(0,a.jsx)("button",{className:"ph3 pv2 mb3 f7 fw6 mid-gray hover-blue bg-white ba b--light-silver light-shadow hover-light-shadow br-pill pointer",onClick:()=>u(!0),children:"Show all"})}):(0,a.jsxs)("div",{className:"pt4 f7 fw5 tc gray",children:[(0,a.jsx)("span",{role:"img","aria-label":"star",children:"\ud83c\udf1f"})," ","You are all caught up!"]})]}):(0,a.jsx)(ne,{days:f,type:p}))})]})};var oe=s(65988),le=s.n(oe),ce=s(36815),de=s(40042);const he=e=>{let{isTeam:t,tier:s,context:n,isOwner:r}=e;const i=(0,de.I0)();return(0,a.jsxs)("div",{className:"jsx-7caf8bc2ff3002f1 flex items-center ba br2 b--light-gray pa3 mb3",children:[(0,a.jsx)("img",{src:"".concat("https://static.observablehq.com","/assets/expired-trial-illustration.svg"),alt:"","aria-hidden":"true",style:{width:265,height:166,objectFit:"contain"},className:"jsx-7caf8bc2ff3002f1"}),(0,a.jsxs)("div",{className:"jsx-7caf8bc2ff3002f1 flex flex-column w-100",children:[(0,a.jsx)("div",{className:"jsx-7caf8bc2ff3002f1 f5 fw6",children:"Your ".concat(t?"team's ":"").concat((0,ce._n)(s,t?"team":"individual")," subscription has expired")}),(0,a.jsxs)("div",{className:"jsx-7caf8bc2ff3002f1 fw4 textBlock",children:[(0,a.jsxs)("p",{className:"jsx-7caf8bc2ff3002f1",children:["Private notebooks will be read-only until ".concat(t?"a team owner enters billing information or makes":"you enter billing information or make"," them public with the "),(0,a.jsx)("b",{className:"jsx-7caf8bc2ff3002f1",children:"Share\u2026"})," button."]}),(0,a.jsx)("p",{className:"jsx-7caf8bc2ff3002f1",children:"If you switch to the Free tier, you can continue using Observable for public work."}),(0,a.jsx)("p",{className:"jsx-7caf8bc2ff3002f1",children:(0,a.jsx)(D.Z,{href:"/@observablehq/team-and-individual-workspaces",children:(0,a.jsx)("a",{className:"jsx-7caf8bc2ff3002f1 flex db mt3 f6 fw5 blue hover-lightest-blue items-center lh-solid link",children:"Learn more"})})})]}),(r||!t)&&(0,a.jsx)("div",{className:"jsx-7caf8bc2ff3002f1",children:(0,a.jsxs)(N.CQ,{children:[(0,a.jsx)(N.kq,{text:"Switch to Free tier",onClick:()=>i({type:"changePlan",tier:"public",interval:null,user:n})}),(0,a.jsx)(N.KM,{text:"Subscribe",onClick:()=>i({type:"showModal",modal:"changeUserTier",modalProps:{user:n}})})]})})]}),(0,a.jsx)(le(),{id:"7caf8bc2ff3002f1",children:".textBlock.jsx-7caf8bc2ff3002f1{max-width:528px}"})]})};var ue=s(24741),me=s(89905),pe=s(10559),xe=s(41664),fe=s.n(xe);const ge=e=>{let{dispatch:t}=e;return(0,a.jsxs)("div",{className:"jsx-64de02390d27bec9",children:[(0,a.jsxs)("div",{className:"jsx-64de02390d27bec9 flex items-center justify-between bb b--light-silver",children:[(0,a.jsx)("div",{className:"jsx-64de02390d27bec9 mt2 f4 fw7 mb1",children:"Quick guides"}),(0,a.jsx)(N.hU,{icon:me.Z,onClick:()=>t({type:"showModal",modal:"hideGuides"}),colorless:!0})]}),(0,a.jsxs)("div",{className:"jsx-64de02390d27bec9",children:[(0,a.jsx)("div",{className:"jsx-64de02390d27bec9 mv3 mid-gray",children:"These 5-minute explorations show you how to build useful notebooks using real data."}),(0,a.jsx)("div",{className:"jsx-64de02390d27bec9 guide-grid",children:pe.guides.map(((e,t)=>{let{title:s,type:n,image:r,tags:i}=e;return(0,a.jsx)(ve,{title:s,type:n,image:r,tags:i},t)}))})]}),(0,a.jsx)(le(),{id:"64de02390d27bec9",children:".guide-grid.jsx-64de02390d27bec9{display:grid;grid-gap:1.5em;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}"})]})},ve=e=>{let{title:t,type:s,image:n,tags:r}=e;return(0,a.jsx)(fe(),{href:"/guide/".concat(s),children:(0,a.jsxs)("a",{className:"flex ba br2 pa3 b--light-gray pointer hover-light-shadow",children:[(0,a.jsx)("img",{src:n,alt:t,className:"flex-shrink-0 br2 ba bn",style:{width:60,height:60,objectFit:"contain"}}),(0,a.jsxs)("div",{className:"ml3 lh-f6",children:[(0,a.jsx)("a",{className:"blue fw5",children:t}),(0,a.jsx)("div",{className:"mt2",children:r.map(((e,t)=>(0,a.jsx)("span",{className:"dib mb1 f7 no-underline ph2 ba br4 mr1 b--light-gray mid-gray",children:e},t)))})]})]})})};var be=s(19671);const je=e=>{let{tutorials:t,user:s}=e;return t?(0,a.jsxs)("div",{className:"mt4",children:[(0,a.jsxs)("div",{className:"flex pb2 mb2 f4 fw7 near-black b--light-silver bb-ns justify-between items-center",children:["Learn",(0,a.jsx)(D.Z,{href:"/tutorials",children:(0,a.jsxs)("a",{className:"db flex f7 fw6 no-underline blue hover-lightest-blue justify-end items-center lh-f5",onClick:()=>{(0,be.MR)((0,be.a$)({type:"user:manage:clickLearnTutorials",eventVersion:1,currentUser:s}))},children:["All tutorials ",(0,a.jsx)(H.Z,{className:"child"})]})})]}),(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(20rem, 1fr))",gridColumnGap:"2rem"},children:t.map(((e,t)=>(0,a.jsxs)("div",{onClick:()=>{(0,be.MR)((0,be.a$)({type:"user:manage:clickLearnLink",data:{slug:e.slug},eventVersion:1,currentUser:s}))},children:[(0,a.jsx)(w.Fl,{collection:e},t)," "]},t)))})]}):null};var ye=s(14416);const we=["collectionCount","forked","likes","publishLevel","publishTime","publishVersion","roles","saveTime","saveVersion","sharing","slug","thumbnail","trashed"];function ke(e,t){if(!e.id)return!1;const s=t.find((t=>t.id===e.id));return!(s&&!we.find((t=>e[t]!==s[t]))&&e.owner.id===s.owner.id)}var Ne=s(73779);const Ce=e=>{let{context:t}=e;return(0,a.jsx)(D.Z,{href:t&&"team"===t.type?"/team/@".concat(t.login,"/new"):"/new",children:(0,a.jsxs)("a",{tabIndex:-1,className:"jsx-ff3b855c25dc0850 outline-0",children:[(0,a.jsx)("div",{className:"jsx-ff3b855c25dc0850 relative mb2 gray hover-dark-gray bg-white ba b--silver br2 hover-b--light-gray hover-light-shadow thumbnail-grid",children:(0,a.jsxs)("div",{style:{top:"45%"},className:"jsx-ff3b855c25dc0850 inline-flex absolute left-0 right-0 w3 f6 fw6 ml-auto mr-auto",children:[(0,a.jsx)(F.Z,{className:"mr1"}),(0,a.jsx)("span",{className:"jsx-ff3b855c25dc0850",children:"New"})]})}),(0,a.jsx)(le(),{id:"ff3b855c25dc0850",children:".thumbnail-grid{padding-top:62.5%}"})]})})};function Me(e){return e?"team"===e.type?"/team/".concat(e.id,"/continue-editing"):"/user/continue-editing":"/user/continue-editing?unified=true"}const Ze=e=>{let{context:t,user:s}=e;const n=t?3:4,[r]=function(e,t){const[s,n,r]=(0,S.h_)(e),{0:i,1:a}=(0,g.useState)(s?(0,E.x)(s):void 0),o=(0,ye.oR)(),l=(0,f.useRouter)();return(0,g.useEffect)((()=>{const e=s?(0,E.x)(t?s.slice(0,t):s):void 0;if(a(e),e)return o.subscribe((()=>{ke(o.getState().notebook,e)&&r(s)}))}),[a,s,o,e,l,t,r]),[i,n,r]}(Me(t),n);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex pb2 mb2 b--light-silver bb-ns justify-between",children:[(0,a.jsx)("div",{className:"mt2 f4 fw7",children:" Recent notebooks"}),t&&r&&r.length>=n?(0,a.jsx)(D.Z,{href:(0,m.m6)(t),children:(0,a.jsxs)("a",{className:"db flex mt2 f7 fw6 no-underline blue hover-lightest-blue items-center lh-f7",children:["View all","team"===t.type?" in ".concat((0,m.RX)(t)):null,(0,a.jsx)(H.Z,{className:"child"})]})}):null]}),r&&0===r.length?(0,a.jsxs)("div",{className:"pv4 mt3 mb3 tc ba b--silver br3 b--dashed bw1",children:[(0,a.jsxs)("div",{className:"mh2 mb3 f7 tc mid-gray lh-copy",children:["You haven\u2019t edited any notebooks recently",t&&"team"===t.type?" in ".concat((0,m.RX)(t)):null,"."]}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)(D.Z,{href:t&&"team"===t.type?"/team/@".concat(t.login,"/new"):"/new",children:(0,a.jsxs)("a",{className:"flex dib center ph3 pv2 f7 fw6 mid-gray bg-light-silver hover-bg-silver br2 items-center lh-f7 link",children:[(0,a.jsx)(F.Z,{className:"mr1"}),(0,a.jsx)("div",{children:"Create notebook"})]})})})]}):(0,a.jsx)("div",{className:"listing-grid",style:{rowGap:"0"},children:r&&(0,a.jsxs)(a.Fragment,{children:[r.map(((e,t)=>(0,a.jsx)("div",{className:"mb0-ns mb3",children:(0,a.jsx)(L.pg,{index:t,format:"grid",notebook:e,currentUser:s})},e.id))),(0,a.jsxs)(a.Fragment,{children:[r.length<n&&(0,a.jsx)(Ce,{context:t}),Ne.y.slice(0,n-r.length)]})]})})]})};var Le=s(27193);const Se=e=>{let{stats:t}=e;const s="fw6 dark-gray",n="gray ml1 fw5";return(0,a.jsxs)("div",{className:"f7",children:[(0,a.jsxs)("span",{className:"dib mr3",children:[(0,a.jsx)("span",{className:s,children:(0,Le.CZ)(t.document_count)}),(0,a.jsx)("span",{className:n,children:1===t.document_count?"Notebook":"Notebooks"})]}),(0,a.jsxs)("span",{className:"dib mr3",children:[(0,a.jsx)("span",{className:s,children:(0,Le.CZ)(t.like_count)}),(0,a.jsx)("span",{className:n,children:1===t.like_count?"Like":"Likes"})]}),(0,a.jsxs)("span",{className:"dib mr3",children:[(0,a.jsx)("span",{className:s,children:(0,Le.CZ)(t.fork_count)}),(0,a.jsx)("span",{className:n,children:1===t.fork_count?"Fork":"Forks"})]})]})};function _e(){return{path:"/documents/public/popular?".concat((0,P.P)({date:V.Z.offset((0,U.l6)(),-2).toISOString(),limit:10})),anonymous:!0}}function Pe(){return{path:"/documents/public/trending?".concat((0,P.P)({limit:6})),anonymous:!0}}function Re(e){return"team"===e.type?"/team/".concat(e.id,"/stats"):"/user/stats"}const Te=e=>{let{context:t,user:s,dispatch:n}=e;const[r,i]=(0,S.h_)(Re(t)),[o]=(0,S.h_)(_e().path),l=o?(0,E.x)(o):void 0,[c]=(0,S.h_)(Pe().path),h=c?(0,E.x)(c):void 0,[u]=(0,S.h_)("/explore/public/tutorials"),p=(0,d.GS)(d.ro),x=(0,m.xT)(s,t);let f;try{[f]=(0,S.h_)("/billing/".concat(t.login,"/trial"))}catch(Z){}const g="team"===t.type&&(0,m.qb)(s,t),v="team"===t.type;var b;const j=null!==(b=null===x||void 0===x?void 0:x.tier)&&void 0!==b?b:s.tier,y=(0,m.yb)(s,null!==x&&void 0!==x?x:s)&&!["pro_enterprise","enterprise"].includes(j);var w;const k=(0,O.a)(j,null===f||void 0===f?void 0:f.trial_end,y,null!==(w=null===f||void 0===f?void 0:f.has_billing_info)&&void 0!==w&&w);var C,M;return(0,a.jsxs)("div",{style:{minHeight:"22em"},children:[y&&(0,a.jsx)(he,{isTeam:v,tier:t.tier,context:t,isOwner:g}),(0,a.jsxs)("div",{className:"flex-ns items-end justify-between",children:[(0,a.jsx)("div",{style:L.r2,className:"ma0 mb0-ns mb3 fw7 near-black",children:"Home"}),k?(0,a.jsxs)("div",{className:"flex items-center ba br2 light-gray",children:[(0,a.jsx)(O.D,{startDate:null!==(C=null===f||void 0===f?void 0:f.trial_start)&&void 0!==C?C:0,endDate:null!==(M=null===f||void 0===f?void 0:f.trial_end)&&void 0!==M?M:0,className:"pl2 pr2"}),(g&&!["enterprise","pro_enterprise"].includes(j)||!v)&&(0,a.jsx)(N.sn,{text:"Subscribe",onClick:()=>n({type:"showModal",modal:"changeUserTier",modalProps:{user:t}})})]}):(0,a.jsx)("div",{className:"flex relative items-center justify-between",children:!i&&r&&(0,a.jsx)(Se,{stats:r})})]}),(0,a.jsxs)("div",{className:"mt4",children:["hide"!==s.settings.guides&&"team"!==t.type&&!p&&(0,a.jsx)("div",{className:"mv4",children:(0,a.jsx)(ge,{dispatch:n})}),(0,_.wW)(s,t)?(0,a.jsx)(Ze,{user:s,context:t,dispatch:n},t.id):null,(0,a.jsx)("div",{className:"flex-auto",children:(0,a.jsx)(ae,{user:s,context:t})}),u&&(0,a.jsx)(je,{user:s,tutorials:u})]}),h&&l&&(0,a.jsx)(ue.r,{trending:h,popular:l})]})};var Ie=s(47417),Oe=s(64063),He=s.n(Oe),Fe=s(90627),De=s(99321);const Ee={notebooks:"Notebooks",trash:"Trash",likes:"Likes"};function Ve(e){return{tab:(0,u.T)(e,"tab"),page:(0,u.T)(e,"page"),publishLevel:(0,u.T)(e,"publishLevel"),shareLevel:(0,u.T)(e,"shareLevel"),sort:(0,u.T)(e,"sort","edited"),direction:(0,u.T)(e,"direction","desc")}}const Ue=e=>{let{context:t,user:s,dispatch:i}=e;const{push:o,query:l}=(0,f.useRouter)(),c=Ve(l),{tab:d}=c;if("likes"===d&&s.id!==t.id)throw new Error("unexpected tab");(0,g.useEffect)((()=>{"team"===t.type?(0,be.MR)((0,be.gv)({type:"team:view:notebookList",data:{},currentUser:s,team:t,eventVersion:1})):(0,be.MR)((0,be.a$)({type:"user:view:notebookList",data:{},currentUser:s,eventVersion:1}))}),[t,s]);const[h,,m]=function(e){const[t,s,n]=(0,S.h_)(e),{0:r,1:i}=(0,g.useState)(t?(0,E.x)(t):void 0),a=(0,ye.oR)(),o=(0,f.useRouter)();return(0,g.useEffect)((()=>{const e=t?(0,E.x)(t):void 0;if(i(e),e)return a.subscribe((()=>{ke(a.getState().notebook,e.results)&&n(t)}))}),[i,t,a,e,o,n]),[r,s,n]}(function(e,t){const s=Ve(t);return"likes"===s.tab?"/user/likes?".concat((0,P.P)({page:s.page||1})):"".concat("team"===e.type?"/team/".concat(e.id):"/user","/documents?").concat((0,P.P)({types:"trash"===s.tab?["trash"]:s.publishLevel?[s.publishLevel]:void 0,share_level:s.shareLevel,sort:s.sort,direction:s.direction,page:s.page||1}))}(t,l));const p={all:{publishLevel:null,shareLevel:null},only_you:{publishLevel:["private"],shareLevel:"private"},shared:{publishLevel:["private"],shareLevel:"shared"},team:{publishLevel:["private"],shareLevel:"team"},unlisted:{publishLevel:["live_unlisted","shared"],shareLevel:null},public:{publishLevel:["live","public"],shareLevel:null}};function x(){var e;const t=(null===(e=c.publishLevel)||void 0===e?void 0:e.split(","))||[];var s;const n=null!==(s=c.shareLevel)&&void 0!==s?s:null;for(const[r,{publishLevel:i,shareLevel:a}]of Object.entries(p))if(He()(t,i)&&n===a)return r;return""}const v=["pro","pro_enterprise","public"].includes(t.tier);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center ".concat("likes"===d?"":"mb3"),children:[(0,a.jsx)("div",{style:(0,r.Z)((0,n.Z)({},L.r2),{height:"likes"===d?0:"auto"}),className:"fw7 near-black ".concat("likes"===d?"":"mb0-ns mb2"," "),children:d&&Ee[d]}),"notebooks"===d?(0,_.wW)(s,t)&&(0,a.jsx)(D.Z,{"data-cy":"new-notebook",href:"team"===t.type?"/team/@".concat(t.login,"/new"):"/new",children:(0,a.jsxs)("a",{className:"inline-flex h2 ph3 pv2 f6 fw6 no-underline dark-gray hover-near-black bg-silver hover-bg-light-silver br2 items-center gray-button blue-ring-focus bn pointer animate-all",children:[(0,a.jsx)(F.Z,{className:"mr1"}),"New"]})}):"trash"===d&&(0,_.Db)(s,t)&&h&&h.total>0?(0,a.jsx)(N.aX,{onClick:async function(){document.activeElement instanceof HTMLElement&&document.activeElement.blur();try{await(0,S.Fv)("/user/trash/empty","team"===t.type?{team:t.id}:{}),i({type:"showSuccessToast",message:"Trash emptied"}),m()}catch(e){(0,Fe.S)({dispatch:i,message:"Unable to empty the trash. Try again?",key:"emptyTrash",error:e})}},className:"ph3 nowrap hover-red",text:"Empty trash"}):null]}),"trash"===d?(0,a.jsx)("div",{className:"mb3 f6 mid-gray",children:"Notebooks in the trash for more than 30 days will be automatically deleted."}):null,h&&(0,a.jsx)(Z.a,{response:h,filters:"likes"===d||"trash"===d?null:()=>(0,a.jsx)("div",{className:"flex flex-column flex-row-ns items-center-ns",children:v?(0,a.jsxs)("div",{className:"dib-ns db mt0-ns mt2",children:[(0,a.jsx)("label",{className:"mr2 f7 fw6 gray lh-f7",htmlFor:"sharePublishLevel",children:"Access"}),(0,a.jsxs)(C.g,{id:"sharePublishLevel",onChange:e=>function(e){const{publishLevel:t,shareLevel:s}=p[e];o((0,u.r)((0,r.Z)((0,n.Z)({},c),{page:void 0,publishLevel:t,shareLevel:s})),void 0,{shallow:!0})}(e.target.value),value:x(),children:[(0,a.jsx)("option",{value:"all",children:"All"}),(0,a.jsx)("option",{value:"only_you",children:"Only you"}),(0,a.jsx)("option",{value:"shared",children:"Shared"}),"team"===t.type&&(0,a.jsx)("option",{value:"team",children:"Team"}),(0,a.jsx)("option",{value:"unlisted",children:"Unlisted"}),(0,a.jsx)("option",{value:"public",children:"Public"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"dib-ns db",children:[(0,a.jsx)("label",{className:"mr2 f7 fw6 gray lh-f7",htmlFor:"shareLevel",children:"Access"}),(0,a.jsxs)(C.g,{id:"shareLevel",className:"mr4",value:c.shareLevel||"",onChange:e=>{return t=e.target.value,void o((0,u.r)((0,r.Z)((0,n.Z)({},c),{shareLevel:t,page:void 0})),void 0,{shallow:!0});var t},children:[(0,a.jsx)("option",{value:"",children:"All"}),(0,a.jsx)("option",{value:"private",children:"You"}),(0,a.jsx)("option",{value:"shared",children:"Shared"}),"team"===t.type&&(0,a.jsx)("option",{value:"team",children:"Team"})]})]}),(0,a.jsxs)("div",{className:"dib-ns db mt0-ns mt2",children:[(0,a.jsx)("label",{className:"mr2 f7 fw6 gray lh-f7",htmlFor:"publishLevel",children:"Published"}),(0,a.jsxs)(C.g,{id:"publishLevel",value:c.publishLevel||"",onChange:e=>{return t=e.target.value,void o((0,u.r)((0,r.Z)((0,n.Z)({},c),{publishLevel:t,page:void 0})),void 0,{shallow:!0});var t},children:[(0,a.jsx)("option",{value:"",children:"All"}),(0,a.jsx)("option",{value:"private",children:"Not published"}),(0,a.jsx)("option",{value:"shared",children:"Published (unlisted)"}),(0,a.jsx)("option",{value:"public",children:"Published"})]})]})]})}),sorts:"likes"===d||"trash"===d?null:(0,a.jsx)(De.I,{sort:c.sort,direction:c.direction,setSort:function(e){o((0,u.r)((0,r.Z)((0,n.Z)({},c,e?{sort:e,direction:["title"].includes(e)?"asc":"desc"}:null),{page:void 0})),void 0,{shallow:!0})},setDirection:function(e){o((0,u.r)((0,r.Z)((0,n.Z)({},c,e?{direction:e}:null),{page:void 0})),void 0,{shallow:!0})}}),items:"trash"===d?"trashed notebooks":d,emptyMessage:"notebooks"===d?"\u261d\ufe0f No notebooks found.":"trash"===d?"\u2728 Your trash is empty.":"likes"===d?"\ud83d\udc94 You haven't liked any notebooks yet.":null,children:(e,t)=>(0,a.jsx)(L.pg,{type:"likes"===d?"reader":void 0,format:t,notebook:e,currentUser:s})})]})};var Ae=s(51440),qe=s(23559);const Be="minmax(160px, 80%) minmax(15%, 200px) auto",Ye=e=>{let{suggestion:t,first:s,user:n}=e;const{to_title:r,from_id:i,description:o,create_time:l,close_time:c,merge:d,creator:h}=t,u=(0,a.jsx)(G.q,{time:new Date(c||l)}),p=(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("div",{className:"truncate fw6",children:r||"Untitled"}),(0,a.jsx)("div",{className:"mid-gray",children:o?"".concat(o):""})]});return(0,a.jsx)(D.Z,{href:c?"/d/".concat(i):(0,$.yY)(t),children:(0,a.jsx)("a",{className:"db ph3 pv2 no-underline dark-gray hover-blue ".concat(s?"":"bt b--light-silver"),children:(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:Be,alignItems:"start"},children:[(0,a.jsx)("div",{className:"pr4",children:p}),(0,a.jsxs)("div",{className:"flex truncate mr2 items-center",children:[(0,a.jsx)(A.q,{user:h,size:28,className:"mh2 br-100"}),(0,a.jsxs)("div",{className:"",children:[" ",(0,a.jsx)("div",{className:"fw5 dark-gray",children:(0,m.v3)(n,h)?"You":(0,m.RX)(h)}),(0,a.jsxs)("div",{className:"gray",children:[" ",u]})]})]}),(0,a.jsx)("div",{className:"tr mid-gray",title:null!==d?"Merged":c?"Closed":"Open",children:null!==d?"Merged":c?"Closed":"Pending"})]})})})},We=e=>{let{suggestions:t,youDont:s,type:n,user:r}=e;return(0,a.jsx)("div",{className:"mt2 overflow-x-auto",style:{marginBottom:240},children:t.length?(0,a.jsxs)("div",{style:{minWidth:600},className:"w-100 f6 bg-white ba b--light-silver br2 lh-copy overflow-x-auto",children:[(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:Be,alignItems:"start"},className:"f6 bg-white",children:[(0,a.jsx)("div",{className:"ph3 pv2 f7 fw5 ttu mid-gray bg-near-white",children:"Suggestion"}),(0,a.jsx)("div",{className:"ph3 pv2 f7 fw5 nowrap ttu mid-gray bg-near-white",children:"Submitted by"}),(0,a.jsx)("div",{className:"ph3 pv2 f7 fw5 tr ttu mid-gray bg-near-white",children:"Status"})]}),t.map(((e,t)=>(0,a.jsx)(Ye,{suggestion:e,user:r,first:0===t},e.id)))]}):(0,a.jsxs)(qe.u,{children:[s," have any ","closed"===n?"closed ":"open ","suggestions."]})})};var ze=s(51289);const Xe=e=>{let{context:t,user:s}=e;const r="team"===t.type?"Your team doesn\u2019t":"You don\u2019t",{push:i,query:o}=(0,f.useRouter)(),l=(0,u.T)(o,"type"),c=(0,u.T)(o,"page",1),d=(0,u.T)(o,"tab"),[h]=(0,S.h_)("".concat("team"===t.type?"/team/".concat(t.id):"/user","/suggestions?").concat((0,P.P)((0,n.Z)({page:c},l?{type:l}:null))));return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:L.r2,className:"mb3 fw7 near-black",children:"Suggestions"}),(0,a.jsxs)("div",{className:"pv2 f7",children:[(0,a.jsx)("label",{className:"mr2 fw6 gray",htmlFor:"type",children:"Type"}),(0,a.jsxs)(C.g,{className:"near-black",id:"type",value:l||"",onChange:e=>i(function(e){const t=ze.Qg?location.pathname:"/",s=new URLSearchParams;return Object.entries(e).forEach((e=>{let[t,n]=e;void 0!==n&&null!==n&&s.append(t,String(n))})),"".concat(t,"?").concat(s.toString())}({tab:d,type:e.target.value||void 0,page:c>1?c:void 0})),children:[(0,a.jsx)("option",{value:"",children:"Open"}),(0,a.jsx)("option",{value:"closed",children:"Closed"})]})]}),h&&(0,a.jsx)(Ae.t,{itemName:"suggestions",response:h,filterName:l||"open",children:(0,a.jsx)(We,{suggestions:h.results,youDont:r,user:s})})]})};const Ge=e=>{let{user:t,date:s,dispatch:n}=e;s||(s=V.Z.offset((0,U.l6)(),-2));const[r,i]=(0,S.h_)("/documents/public/popular?".concat((0,P.P)({date:s.toISOString(),limit:10}))),o=r?(0,E.x)(r):void 0,[l,c]=(0,S.h_)("/documents/public/trending?".concat((0,P.P)({limit:9}))),d=l?(0,E.x)(l):void 0;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{minHeight:"22em"},className:"flex-l mt4 flex-row-reverse items-start",children:(0,a.jsxs)("div",{className:"mb4 flex-auto",children:[(0,a.jsx)(Ze,{user:t,dispatch:n}),(0,a.jsx)(ae,{context:t,user:t,unified:!0,itemsShown:20})]})}),!(i||c)&&d&&o&&(0,a.jsx)(ue.r,{trending:d,popular:o})]})};var $e=s(40287);var Ke=e=>(0,a.jsxs)("svg",(0,r.Z)((0,n.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,a.jsx)("rect",{x:"3",y:"7",width:"10",height:"7",rx:"0.5",stroke:"currentColor",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M11 7.5V5C11 0.999963 5 1.00004 5 5V7.5",stroke:"currentColor",strokeWidth:"2"})]})),Qe=s(47311);Symbol("LOADING");const Je=e=>{let{user:t,restricted:s}=e;const n=t?(0,m.GN)(t):"/team/new";return(0,a.jsx)(D.Z,{href:n,children:(0,a.jsxs)("a",{className:"flex db ph3 pv3 mb1 no-underline dark-gray hover-near-black bg-white br2 items-center justify-between light-shadow hover-light-shadow hide-child min-w-0",children:[(0,a.jsx)("div",{className:"w-100",children:t?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(A.q,{user:t,size:28,className:"br-100"}),(0,a.jsxs)("div",{className:"ml3 min-w-0",children:[(0,a.jsx)("div",{className:"flex near-black items-center",children:(0,a.jsx)("span",{className:"db truncate f6 fw6",children:(0,m.RX)(t)})}),s?(0,a.jsxs)("div",{className:"mt1 f7 fw5 blue flex",children:[(0,a.jsx)(Ke,{className:"mr1",style:{width:15,height:15}}),"Sign in"]}):(0,a.jsxs)("div",{className:"mt1 f7 fw5 ttc gray",children:[(0,ce._n)(t.tier,t.type),"team"===t.type&&(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)("span",{className:"light-gray",children:"\u2022"})," ",(0,m.y9)(t.role)]})]})]})]})}):(0,a.jsxs)("div",{className:"flex items-center",title:"A workspace for you and your collaborators",children:[(0,a.jsx)(Qe.ZP,{style:{width:28,height:28}}),(0,a.jsxs)("div",{className:"ml3 no-underline dark-gray hover-black pointer lh-copy",children:[(0,a.jsx)("div",{className:"f6 fw6",children:"Create a new team"}),(0,a.jsx)(D.Z,{href:"/@observablehq/getting-started-with-teams",children:(0,a.jsx)("a",{onClick:e=>e.stopPropagation(),className:"pa0 fw5 blue bn bg-transparent pointer",children:"Learn more"})})]})]})}),t?(0,a.jsx)($e.Z,{className:"w1 h1 ml1 gray",style:{strokeWidth:1}}):null]})})},et=e=>{let{user:t}=e;return(0,a.jsx)("div",{className:"pv4",children:(0,a.jsxs)("div",{className:"dg listing-grid",children:[[t,...t.teams].map((e=>(0,a.jsx)(Je,{user:e,restricted:"team"===e.type&&(0,m.pr)(t,e)},e.id))),(0,a.jsx)(Je,{user:null,restricted:!1},-1)]})})},tt=[void 0,"notebooks","trash","likes","collections","suggestions"];tt.filter((e=>"likes"!==e));const st=e=>{let{to:t}=e;const{replace:s}=(0,f.useRouter)();return(0,g.useEffect)((()=>{s(t)}),[s,t]),null};var nt=s(92946),rt=s(22255),it=s(5804),at=s(77419);function ot(e){return(0,a.jsx)("h2",{className:"ma0 fw7 near-black",style:L.r2,children:e})}const lt=e=>{let{notebooks:t,owner:s,sort:n,direction:r,setSort:i,setDirection:o}=e;return(0,a.jsx)(Z.a,{response:t,items:"notebooks",emptyMessage:"".concat((0,m.RX)(s)," doesn\u2019t have any public notebooks."),filters:()=>ot("Notebooks"),sorts:(0,a.jsx)(De.I,{sort:n,direction:r,setSort:i,setDirection:o,publicOnly:!0}),children:(e,t)=>(0,a.jsx)(L.pg,{format:t,notebook:e,type:"reader"})})},ct=e=>{let{owner:t,collections:s}=e;return(0,a.jsx)(Z.a,{response:s,items:"collections",emptyMessage:"".concat((0,m.RX)(t)," doesn\u2019t have any public collections."),filters:()=>ot("Collections"),children:(e,t)=>(0,a.jsx)(w.Fl,{format:t,collection:e})})},dt=[void 0,"notebooks","profile","collections"];function ht(e){let{type:t,owner:s,context:n}=e;const r=n?"team"===n.type?"Your team doesn't have":"You don't have":"".concat((0,m.RX)(s)," doesn't have");return"".concat(r," any public ").concat(t,".")}const ut=e=>{let{title:t,type:s,owner:n,listings:r,context:i}=e;const o=!r||0===r.length,l=n.login||"";return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex pb1 mt4 bb b--light-silver items-baseline justify-between",children:[(0,a.jsx)("h3",{className:"ma0 f4 fw7 near-black",children:t}),!o&&(0,a.jsx)("div",{className:"flex justify-between items-baseline",children:(0,a.jsx)(D.Z,{href:"/@".concat(l,"?tab=").concat(s,"&type=public"),children:(0,a.jsxs)("a",{className:"flex f7 fw6 no-underline blue items-center",children:["View all ",(0,a.jsx)(H.Z,{className:"child"})]})})})]}),(0,a.jsxs)("div",{className:"mt3 ".concat("notebooks"===s?"listing-grid":"profile-collections-grid"),children:[o&&(0,a.jsx)("div",{style:{gridColumn:"1 / -1"},children:(0,a.jsx)(qe.u,{children:ht({type:s,owner:n,context:i})})}),r&&r.slice(0,6).map(((e,t)=>"notebooks"===s?(0,a.jsx)(L.pg,{format:"grid",notebook:e,type:"reader"},t):(0,a.jsx)(w.Fl,{collection:e},t))),r&&"notebooks"===s&&Ne.y.slice(0,6-r.length)]})]})},mt=e=>{let{canEdit:t,owner:s,context:n}=e;const r=0===[s.home_url,s.profile_email,s.bio].filter((e=>e)).length;return t&&r?(0,a.jsx)("div",{style:{gridColumn:"1 / -1"},children:(0,a.jsx)(qe.u,{children:function(e){const t="team"===e?"Your team hasn't":"You haven't";return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{children:[t," written"," ",(0,a.jsx)("a",{className:"no-underline blue",href:n?"".concat((0,m.rF)(n),"#profile"):"/",children:"a bio"})," ","yet."]})})}(s.type)})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"mb4 observable-mid-gray",children:[(0,a.jsx)("div",{className:"fw4",children:s.bio}),s.home_url?(0,a.jsxs)("div",{className:"flex flex-wrap",style:{marginTop:25},children:[[s.home_url,...s.links].map(((e,t)=>(0,a.jsxs)("div",{className:"flex f6 fw4 mt3 mr4 items-center",children:[(0,a.jsx)(nt.o8,{style:{marginRight:7}}),(0,a.jsx)("a",{href:e,className:"no-underline hover-blue observable-mid-gray",rel:"nofollow me",children:e.replace(/(^\w+:|^)\/\/www./,"")})]},t))),s.profile_email&&(0,a.jsxs)("div",{className:"flex f6 fw4 mt3 mr4 items-center",children:[(0,a.jsx)(rt.Z,{style:{marginRight:7}}),(0,a.jsx)("a",{href:"mailto:".concat(s.profile_email),className:"no-underline hover-blue observable-mid-gray",children:s.profile_email})]})]}):null]})})};function pt(e,t){return{path:"/documents/@".concat(e,"?").concat(t?(0,P.P)({page:t.page||1,sort:t.sort,direction:t.direction}):""),anonymous:!0}}function xt(e){return{tab:(0,u.T)(e,"tab"),page:(0,u.T)(e,"page",1),sort:(0,u.T)(e,"sort","published"),direction:(0,u.T)(e,"direction","desc")}}function ft(e,t){if(e){if(t===e.login)return e;const s=e.teams.find((e=>e.login===t));if(s)return s}return null}function gt(e){return{path:"/user/@".concat(e),anonymous:!0}}function vt(e,t){return{path:"/collections/@".concat(e,"/public?").concat(void 0!==t?(0,P.P)({page:t}):""),anonymous:!0}}var bt=s(65878),jt=s(65538),yt=s(24165),wt=s(11758),kt=s(40821),Nt=!0;const Ct=(0,jt.$j)((e=>{let{decorations:t,currentUser:s}=e;return{decorations:t,currentUser:s}}),(e=>({dispatch:e})))((e=>{const{currentUser:t,userLogin:s,dispatch:i}=e;(0,c.w)(i,t,s);const{query:p,replace:w}=(0,f.useRouter)(),k=(0,u.T)(p,"tab","home"),N=(0,h.x)(t,s),C="team"===(null===N||void 0===N?void 0:N.type)&&(0,m.pr)(t,N),M=(0,d.GS)(d.ro);return(0,g.useEffect)((()=>{"ALREADY_SIGNED_IN"===(0,u.T)(p,"error")&&i({type:"showErrorToast",message:"You\u2019re already signed in. If you need to sign in as another user, please sign out first."})}),[i,p]),N||t.teams.length?(0,a.jsxs)("div",{className:"flex flex-column min-vh-100",children:[(0,a.jsxs)(x(),{children:[(0,a.jsx)("meta",{name:"description",content:"Discover insights faster and communicate more effectively with interactive notebooks for data analysis, visualization, and exploration."}),(0,a.jsx)("title",{children:"Home"})]}),(0,a.jsx)(b.Z,{}),(0,a.jsxs)("main",{className:"relative",style:{flex:1,zIndex:0},children:[C&&(0,a.jsx)(v.l,{onDismiss:()=>history.replaceState({},"","/"),error:{code:"MISSING_ORG",meta:(0,n.Z)({},N.org_restriction?{provider_org:N.org_restriction}:void 0)}}),!C&&(0,a.jsxs)(a.Fragment,{children:[!N&&(0,a.jsx)("div",{className:"bg-near-white",children:(0,a.jsx)("div",{className:"".concat(y.I),children:(0,a.jsx)(et,{user:t})})}),(0,a.jsxs)(y.Z,{mobile:M,children:[N&&(0,a.jsx)(Ie.bT,{context:N,userLogin:s,user:t,tab:k}),(0,a.jsx)("div",{className:"flex-auto",style:{marginTop:45},children:N?"home"===k?(0,a.jsx)(Te,(0,r.Z)((0,n.Z)({},e),{context:N,user:t,dispatch:i})):"notebooks"===k||"trash"===k||"likes"===k?(0,a.jsx)(Ue,(0,r.Z)((0,n.Z)({},e),{context:N,user:t})):"collections"===k?(0,a.jsx)(T,(0,r.Z)((0,n.Z)({},e),{context:N,user:t})):"suggestions"===k?(0,a.jsx)(Xe,(0,r.Z)((0,n.Z)({},e),{context:N,user:t})):null:t.teams.length?(0,a.jsx)(Ge,{user:t,dispatch:i}):(0,a.jsx)(st,{to:"/@".concat(t.login)})})]})]})]}),(0,a.jsx)(l.j,{}),(0,a.jsx)(j.F1,{}),(0,a.jsx)(o.W,{}),(0,a.jsx)(I.m,{})]}):(w("/@".concat(t.login)),null)})),Mt=(0,jt.$j)((e=>{let{decorations:t,currentUser:s}=e;return{decorations:t,currentUser:s}}),(e=>({dispatch:e})))((e=>{let{currentUser:t,userLogin:s,dispatch:r}=e;const{push:i,query:l}=(0,f.useRouter)(),h=xt(l),p=h.tab||"profile";if(!dt.includes(p))throw new Error("unexpected tab");(0,c.w)(r,t,s);const v=ft(t,s),w=!!v&&(0,m.MB)(t,v,["owner"]),k="profile"===p;const[N]=(0,S.h_)(w?null:gt(s).path),C=w?v:N,[M]=(0,S.h_)(k?pt(s).path:null),Z=M?(0,E.x)(M):void 0,[_]=(0,S.h_)("notebooks"===p?pt(s,h).path:null),P=_?(0,E.x)(_):void 0,[R]=(0,S.h_)(k?vt(s).path:null),[T]=(0,S.h_)(k||"collections"!==p?null:vt(s,h.page||1).path),O=(0,d.GS)(d.ro),H=(0,g.useCallback)((()=>t&&v?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(Ie.bT,{userLogin:s,tab:p,context:v,user:t,bannerPresent:k&&!!(null===C||void 0===C?void 0:C.selected_banner)})}):C?(0,a.jsx)(Ie.mx,{user:C,userLogin:s,tab:k?"profile":p,bannerPresent:k&&!!C.selected_banner}):null),[t,s,C,v,p,k]),F=2===window.devicePixelRatio?"@2x":"";return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-column min-vh-100",children:[C?(0,a.jsxs)(x(),{children:[(0,a.jsx)("title",{children:(0,m.RX)(C)}),(0,a.jsx)("link",{rel:"alternate",type:"application/rss+xml",href:"".concat("https://api.observablehq.com","/documents/@").concat(C.login,".rss")}),(0,a.jsx)(at.wd,{user:C})]}):null,(0,a.jsx)(b.Z,{}),(0,a.jsxs)("main",{style:{flex:1,zIndex:0},className:"jsx-5346ca721dc8d3f4 relative",children:[k&&(null===C||void 0===C?void 0:C.selected_banner)&&(0,a.jsx)("div",{style:{backgroundImage:"url(https://".concat("static.observableusercontent.com","/profiles/").concat(C.selected_banner).concat(F,".png)")},className:"jsx-5346ca721dc8d3f4 profile-banner"}),(0,a.jsxs)(y.Z,{mobile:O,children:[H(),(0,a.jsx)("div",{style:{marginTop:O?30:45},className:"jsx-5346ca721dc8d3f4 mb4 sans-serif flex-auto",children:k?(0,a.jsxs)("div",{className:"jsx-5346ca721dc8d3f4 profile-content",children:[(0,a.jsxs)("div",{className:"jsx-5346ca721dc8d3f4 flex bb b--light-silver justify-between items-baseline",children:[(0,a.jsxs)("div",{className:"jsx-5346ca721dc8d3f4 flex items-end",children:[(0,a.jsx)("h2",{style:L.r2,className:"jsx-5346ca721dc8d3f4 pb1 ma0 fw7 near-black",children:C&&(0,m.RX)(C)}),"individual"===(null===C||void 0===C?void 0:C.type)&&C.pronouns&&(0,a.jsxs)("div",{className:"jsx-5346ca721dc8d3f4 fw4 dark-gray mb2 ml2",children:["(",C.pronouns,")"]})]}),w&&(0,a.jsx)("a",{href:"".concat((0,m.rF)(v),"#profile"),className:"jsx-5346ca721dc8d3f4 f6 fw6 no-underline blue pointer",children:"Edit"})]}),(0,a.jsx)("div",{style:{marginTop:25},className:"jsx-5346ca721dc8d3f4",children:C&&(0,a.jsx)(mt,{owner:C,canEdit:w,context:v})}),C&&Z&&(0,a.jsx)(ut,{title:"Public notebooks",type:"notebooks",listings:Z,owner:C,context:v}),C&&R&&(0,a.jsx)(ut,{title:"Public collections",type:"collections",listings:R,owner:C,context:v})]}):"notebooks"===p?C&&P&&(0,a.jsx)(lt,{notebooks:P,owner:C,sort:h.sort,direction:h.direction,setSort:function(e){i((0,u.r)((0,n.Z)({},h,e?{sort:e,direction:["title"].includes(e)?"asc":"desc"}:null)))},setDirection:function(e){i((0,u.r)((0,n.Z)({},h,e?{direction:e}:null)))}}):"collections"===p?C&&T&&(0,a.jsx)(ct,{collections:T,owner:C}):null})]}),(0,a.jsx)(le(),{id:"5346ca721dc8d3f4",children:".profile-banner{-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;background-repeat:no-repeat;background-position:left center;position:relative;width:100%}@media screen and (max-width:640px){.profile-banner{height:60px}}@media screen and (min-width:640px){.profile-banner{height:125px}}"})]}),(0,a.jsx)(it.Z,{}),(0,a.jsx)(j.F1,{}),(0,a.jsx)(o.W,{}),(0,a.jsx)(I.m,{})]})})}));var Zt=(0,bt.Z)((e=>{const{fallback:t}=e,s=(0,i.Z)(e,["fallback"]),o=(0,wt.M)(yt.f,e),{query:l}=(0,f.useRouter)(),c=function(e,t){let{initialCurrentUser:s,userLogin:n}=e;return s&&(0,m.X_)(s,n)&&"profile"!==t?"dashboard":"profile"}(e,(0,u.T)(l,"tab")),{0:d}=(0,g.useState)(new Map);return(0,a.jsx)(kt.J$,{value:{fallback:t,revalidateOnFocus:!1,revalidateIfStale:!1,provider:()=>d},children:(0,a.jsx)(jt.zt,{store:o,children:"profile"===c?(0,a.jsx)(Mt,(0,r.Z)((0,n.Z)({},s),{userLogin:s.userLogin})):"dashboard"===c?(0,a.jsx)(Ct,(0,n.Z)({},s)):null})})}))},56651:function(e,t,s){"use strict";s.d(t,{$j:function(){return i},zt:function(){return n.zt}});var n=s(14416),r=s(54924);const i=(0,r.S3)();(0,r.gR)()},24165:function(e,t,s){"use strict";s.d(t,{f:function(){return l}});var n=s(41799),r=s(810),i=s(54937),a=s(68298),o=s(77180);const l=()=>({type:"dashboard",slices:{notebook:{initialState:{},reducers:(0,n.Z)({},i.x,o.L)}},listeners:(0,n.Z)({},r.l,a.R)})},27011:function(e,t,s){e.exports=function(e,t){"use strict";function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=s(e),r=s(t);function i(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function l(e,t){var s,n=Object.keys(e);return Object.getOwnPropertySymbols&&(s=Object.getOwnPropertySymbols(e),t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)),n}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(null==e)return{};var s,n=function(e,t){if(null==e)return{};for(var s,n={},r=Object.keys(e),i=0;i<r.length;i++)s=r[i],0<=t.indexOf(s)||(n[s]=e[s]);return n}(e,t);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),i=0;i<r.length;i++)s=r[i],0<=t.indexOf(s)||Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s]);return n}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(t){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,n,r=d(t);return!(n=s?(e=d(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments))||"object"!=typeof n&&"function"!=typeof n?m(this):n}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var s=[],n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(s.push(a.value),!t||s.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return s}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return g(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}function v(e,t){return new Promise((function(s,n){var r,i=new Image;i.onload=function(){return s(i)},i.onerror=n,0==(null!==(r=e)&&!!r.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i))&&t&&(i.crossOrigin=t),i.src=e}))}var b,j=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||0<navigator.msMaxTouchPoints)),y="undefined"!=typeof File,w={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",move:"mousemove",up:"mouseup"}}},k=j?w.touch:w.desktop,N="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,C={x:.5,y:.5},M=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,r.default.Component);var e,t,s,n=p(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a(m(t=n.call(this,e)),"state",{drag:!1,my:null,mx:null,image:C}),a(m(t),"handleImageReady",(function(e){var s=t.getInitialSize(e.width,e.height);s.resource=e,s.x=.5,s.y=.5,s.backgroundColor=t.props.backgroundColor,t.setState({drag:!1,image:s},t.props.onImageReady),t.props.onLoadSuccess(s)})),a(m(t),"clearImage",(function(){t.canvas.getContext("2d").clearRect(0,0,t.canvas.width,t.canvas.height),t.setState({image:C})})),a(m(t),"handleMouseDown",(function(e){(e=e||window.event).preventDefault(),t.setState({drag:!0,mx:null,my:null})})),a(m(t),"handleMouseUp",(function(){t.state.drag&&(t.setState({drag:!1}),t.props.onMouseUp())})),a(m(t),"handleMouseMove",(function(e){var s,n,r,i,a,o,l,d,h,u,m,p,x,f,g,v;e=e||window.event,!1!==t.state.drag&&(e.preventDefault(),r={mx:s=e.targetTouches?e.targetTouches[0].pageX:e.clientX,my:n=e.targetTouches?e.targetTouches[0].pageY:e.clientY},v=t.props.rotate,v=(v%=360)<0?v+360:v,t.state.mx&&t.state.my&&(i=t.state.mx-s,a=t.state.my-n,o=t.state.image.width*t.props.scale,l=t.state.image.height*t.props.scale,h=(d=t.getCroppingRect()).x,u=d.y,h*=o,u*=l,m=function(e){return e*(Math.PI/180)},p=Math.cos(m(v)),f=u+-i*(x=Math.sin(m(v)))+a*p,g={x:(h+i*p+a*x)/o+1/t.props.scale*t.getXScale()/2,y:f/l+1/t.props.scale*t.getYScale()/2},t.props.onPositionChange(g),r.image=c(c({},t.state.image),g)),t.setState(r),t.props.onMouseMove(e))})),a(m(t),"setCanvas",(function(e){t.canvas=e})),t.canvas=null,t}return e=l,(t=[{key:"componentDidMount",value:function(){this.props.disableHiDPIScaling&&(N=1);var e,t,s=this.canvas.getContext("2d");this.props.image&&this.loadImage(this.props.image),this.paint(s),document&&(e=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}()&&{passive:!1},t=k.native,document.addEventListener(t.move,this.handleMouseMove,e),document.addEventListener(t.up,this.handleMouseUp,e),j&&(document.addEventListener(t.mouseMove,this.handleMouseMove,e),document.addEventListener(t.mouseUp,this.handleMouseUp,e)))}},{key:"componentDidUpdate",value:function(e,t){this.props.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height||this.props.backgroundColor!==e.backgroundColor?this.loadImage(this.props.image):this.props.image||t.image===C||this.clearImage();var s=this.canvas.getContext("2d");s.clearRect(0,0,this.canvas.width,this.canvas.height),this.paint(s),this.paintImage(s,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y&&t.backgroundColor===this.state.backgroundColor||this.props.onImageChange()}},{key:"componentWillUnmount",value:function(){var e;document&&(e=k.native,document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),j&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1)))}},{key:"isVertical",value:function(){return!this.props.disableCanvasRotation&&this.props.rotate%180!=0}},{key:"getBorders",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.props.border;return Array.isArray(t)?t:[t,t]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,s=e.height,n=e.rotate,r=e.border,i={},a=x(this.getBorders(r),2),o=a[0],l=a[1],c=t,d=s;return this.isVertical()?(i.width=d,i.height=c):(i.width=c,i.height=d),i.width+=2*o,i.height+=2*l,{canvas:i,rotate:n,width:t,height:s,border:r}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var s=document.createElement("canvas");this.isVertical()?(s.width=e.height,s.height=e.width):(s.width=e.width,s.height=e.height);var n=s.getContext("2d");return n.translate(s.width/2,s.height/2),n.rotate(this.props.rotate*Math.PI/180),n.translate(-s.width/2,-s.height/2),this.isVertical()&&n.translate((s.width-s.height)/2,(s.height-s.width)/2),t.backgroundColor&&(n.fillStyle=t.backgroundColor,n.fillRect(-e.x,-e.y,t.resource.width,t.resource.height)),n.drawImage(t.resource,-e.x,-e.y),s}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,s=e.height,n=document.createElement("canvas");return this.isVertical()?(n.width=s,n.height=t):(n.width=t,n.height=s),this.paintImage(n.getContext("2d"),this.state.image,0,1),n}},{key:"getXScale",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:"getYScale",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),s=1/this.props.scale*this.getYScale(),n={x:e.x-t/2,y:e.y-s/2,width:t,height:s},r=0,i=1-n.width,a=0,o=1-n.height;return(this.props.disableBoundaryChecks||1<t||1<s)&&(r=-n.width,a=-n.height,o=i=1),c(c({},n),{},{x:Math.max(r,Math.min(n.x,i)),y:Math.max(a,Math.min(n.y,o))})}},{key:"loadImage",value:function(e){var t;y&&e instanceof File?this.loadingImage=(t=e,new Promise((function(e,s){var n=new FileReader;n.onload=function(t){try{var n=v(t.target.result);e(n)}catch(t){s(t)}},n.readAsDataURL(t)})).then(this.handleImageReady).catch(this.props.onLoadFailure)):"string"==typeof e&&(this.loadingImage=v(e,this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:"getInitialSize",value:function(e,t){var s,n,r=this.getDimensions();return t/e<r.height/r.width?n=e*((s=this.getDimensions().height)/t):s=t*((n=this.getDimensions().width)/e),{height:s,width:n}}},{key:"paintImage",value:function(e,t,s,n){var r,i=3<arguments.length&&void 0!==n?n:N;t.resource&&(r=this.calculatePosition(t,s),e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(i,i),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,r.x,r.y,r.width,r.height),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fillRect(r.x,r.y,r.width,r.height)),e.restore())}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var s=x(this.getBorders(t),2),n=s[0],r=s[1],i=this.getCroppingRect(),a=e.width*this.props.scale,o=e.height*this.props.scale,l=-i.x*a,c=-i.y*o;return this.isVertical()?(l+=r,c+=n):(l+=n,c+=r),{x:l,y:c,height:o,width:a}}},{key:"paint",value:function(e){e.save(),e.scale(N,N),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t,s,n,r,i,a,o,l,c=this.props.borderRadius,d=this.getDimensions(),h=x(this.getBorders(d.border),2),u=h[0],m=h[1],p=d.canvas.height,f=d.canvas.width;c=Math.max(c,0),c=Math.min(c,f/2-u,p/2-m),e.beginPath(),t=e,r=f-2*(s=u),i=p-2*(n=m),0===(a=c)?t.rect(s,n,r,i):(o=r-a,l=i-a,t.translate(s,n),t.arc(a,a,a,Math.PI,1.5*Math.PI),t.lineTo(o,0),t.arc(o,a,a,1.5*Math.PI,2*Math.PI),t.lineTo(r,l),t.arc(o,l,a,2*Math.PI,.5*Math.PI),t.lineTo(a,i),t.arc(a,l,a,.5*Math.PI,Math.PI),t.translate(-s,-n)),e.rect(f,0,-f,p),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.props,t=(e.scale,e.rotate,e.image,e.border,e.borderRadius,e.width,e.height,e.position,e.color,e.backgroundColor,e.style),s=(e.crossOrigin,e.onLoadFailure,e.onLoadSuccess,e.onImageReady,e.onImageChange,e.onMouseUp,e.onMouseMove,e.onPositionChange,e.disableBoundaryChecks,e.disableHiDPIScaling,e.disableCanvasRotation,u(e,["scale","rotate","image","border","borderRadius","width","height","position","color","backgroundColor","style","crossOrigin","onLoadFailure","onLoadSuccess","onImageReady","onImageChange","onMouseUp","onMouseMove","onPositionChange","disableBoundaryChecks","disableHiDPIScaling","disableCanvasRotation"])),n=this.getDimensions(),i={width:n.canvas.width,height:n.canvas.height,cursor:this.state.drag?"grabbing":"grab",touchAction:"none"},a={width:n.canvas.width*N,height:n.canvas.height*N,style:c(c({},i),t)};return a[k.react.down]=this.handleMouseDown,j&&(a[k.react.mouseDown]=this.handleMouseDown),r.default.createElement("canvas",o({ref:this.setCanvas},a,s))}}])&&i(e.prototype,t),s&&i(e,s),l}();return a(M,"propTypes",{scale:n.default.number,rotate:n.default.number,image:n.default.oneOfType([n.default.string].concat(function(e){if(Array.isArray(e))return g(e)}(b=y?[n.default.instanceOf(File)]:[])||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(b)||f(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),border:n.default.oneOfType([n.default.number,n.default.arrayOf(n.default.number)]),borderRadius:n.default.number,width:n.default.number,height:n.default.number,position:n.default.shape({x:n.default.number,y:n.default.number}),color:n.default.arrayOf(n.default.number),backgroundColor:n.default.string,crossOrigin:n.default.oneOf(["","anonymous","use-credentials"]),onLoadFailure:n.default.func,onLoadSuccess:n.default.func,onImageReady:n.default.func,onImageChange:n.default.func,onMouseUp:n.default.func,onMouseMove:n.default.func,onPositionChange:n.default.func,disableBoundaryChecks:n.default.bool,disableHiDPIScaling:n.default.bool,disableCanvasRotation:n.default.bool}),a(M,"defaultProps",{scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1,disableCanvasRotation:!0}),M}(s(45697),s(67294))}}]);