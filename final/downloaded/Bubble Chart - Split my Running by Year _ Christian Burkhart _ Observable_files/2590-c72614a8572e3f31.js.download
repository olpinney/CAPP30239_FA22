"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2590],{27565:function(e,t,n){n.d(t,{E:function(){return i}});var s=n(85893),r=n(602),a=n(4598);const i=e=>{let{provider:t,children:n,alreadyAuthenticated:i,redirectToPicker:l=!1,onAuth:o}=e;return(0,s.jsxs)("form",{onSubmit:e=>{e.target.token.value=(0,r.FN)(),o&&o(t,i)},action:"".concat("https://api.observablehq.com","/user/token/authorize"),method:"post",children:[(0,s.jsx)("input",{type:"hidden",name:"token",value:""}),(0,s.jsx)("input",{type:"hidden",name:"path",value:"".concat(location.pathname).concat(l?"?cloudFileProvider=".concat(t):"")}),(0,s.jsx)("input",{type:"hidden",name:"scopes",value:a.c[t].scopes.join(" ")}),(0,s.jsx)("input",{type:"hidden",name:"provider",value:t}),n]})}},94726:function(e,t,n){n.d(t,{h:function(){return m}});var s=n(85893),r=n(14151),a=n(93939),i=n(62990),l=n(36448),o=n(80835),c=n(67294),d=n(8385),h=n(17905),u=n(84749);const m=e=>{let{commentingLock:t}=e;const{admin_locked:n,admin_lock_reason:m,user_lock_actor:p,time:x}=t,f=x||void 0,g=(0,a.K)(f),v=f&&(0,i.LN)(f,g),b=(0,r.d)((0,c.useCallback)((()=>(0,s.jsx)(o.u,{label:(0,s.jsxs)("div",{className:"truncate w5 pa2 f6 dark-gray",children:[n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:["By"," ",(0,s.jsx)("a",{href:"mailto:support@observablehq.com",rel:"noopener noreferrer",target:"_blank",className:"no-underline dark-gray hover-blue",children:"Observable Support"}),v&&(0,s.jsxs)(s.Fragment,{children:[" on ",v]})]}),(0,s.jsx)("div",{className:"mt2 f7 fw5 ws-normal dark-gray lh-copy",children:m})]}):p&&(0,s.jsxs)("div",{className:"flex truncate items-center",children:["By",(0,s.jsx)(d.q,{user:p,size:14,alt:"@".concat(p.login),className:"mh1 br-100"}),(0,l.RX)(p),v&&(0,s.jsxs)(s.Fragment,{children:[" on ",v]})]}),(0,s.jsxs)("div",{className:"mt2 f7 fw5 ws-normal dark-gray lh-copy",children:["While comments are locked, only editors may comment."," ",(0,s.jsxs)("a",{href:"/@observablehq/comments",target:"_blank",rel:"noreferrer",className:"inline-flex no-underline blue items-center",children:["Learn more",(0,s.jsx)(h.Z,{})]})]})]}),children:(0,s.jsx)("span",{children:"Comments locked"})})),[n,m,p,v]));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{className:"moon-gray"}),b]})}},26674:function(e,t,n){n.d(t,{J:function(){return j}});var s=n(85893),r=n(27193),a=n(3142),i=(n(67294),n(54239)),l=n(41799),o=n(69396);var c=e=>{let{mimeType:t}=e;if(!t)return(0,s.jsx)(h,{className:"flex-shrink-0"});const[n,r]=t.split("/"),a={className:"flex-shrink-0",title:t};switch(n){case"audio":return(0,s.jsx)(m,(0,l.Z)({},a));case"video":return(0,s.jsx)(g,(0,l.Z)({},a));case"image":return"svg+xml"===r?(0,s.jsx)(f,(0,l.Z)({},a)):(0,s.jsx)(x,(0,l.Z)({},a));case"text":return"csv"===r||"tab-separated-values"===r?(0,s.jsx)(d,(0,l.Z)({},a)):(0,s.jsx)(p,(0,l.Z)({},a));case"application":switch(r){case"pdf":return(0,s.jsx)(u,(0,l.Z)({},a));case"geo+json":return(0,s.jsx)(v,(0,l.Z)({},a));case"xml":case"json":case"x-sqlite3":return(0,s.jsx)(d,(0,l.Z)({},a))}}return(0,s.jsx)(h,(0,l.Z)({},a))};function d(e){return(0,s.jsxs)("svg",(0,o.Z)((0,l.Z)({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e),{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.1111 14C9.49746 14 9 14.4975 9 15.1111V17.3333C9 17.947 9.49746 18.4444 10.1111 18.4444H12.3333C12.947 18.4444 13.4444 17.947 13.4444 17.3333V15.1111C13.4444 14.4975 12.947 14 12.3333 14H10.1111ZM15.6667 14C15.053 14 14.5556 14.4975 14.5556 15.1111V17.3333C14.5556 17.947 15.053 18.4444 15.6667 18.4444H17.8889C18.5025 18.4444 19 17.947 19 17.3333V15.1111C19 14.4975 18.5025 14 17.8889 14H15.6667ZM9 20.6667C9 20.053 9.49746 19.5556 10.1111 19.5556H12.3333C12.947 19.5556 13.4444 20.053 13.4444 20.6667V22.8889C13.4444 23.5025 12.947 24 12.3333 24H10.1111C9.49746 24 9 23.5025 9 22.8889V20.6667ZM15.6667 19.5556C15.053 19.5556 14.5556 20.053 14.5556 20.6667V22.8889C14.5556 23.5025 15.053 24 15.6667 24H17.8889C18.5025 24 19 23.5025 19 22.8889V20.6667C19 20.053 18.5025 19.5556 17.8889 19.5556H15.6667Z",fill:"#C4C4C4"})]}))}function h(e){return(0,s.jsxs)("svg",(0,o.Z)((0,l.Z)({width:"24",height:"27",fill:"none"},e),{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#F2F2F2"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E4E4E4"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.4462 14.0293C12.5637 13.0792 11.0428 13.1363 10.2339 14.1499C9.5666 14.9861 9.6264 16.1884 10.3734 16.9543L16.6159 23.3543C16.8831 23.6284 17.3237 23.6284 17.591 23.3543C17.8491 23.0898 17.8491 22.6677 17.591 22.4032L11.979 16.6495L13.1244 15.5323L18.7364 21.286C19.6006 22.172 19.6006 23.5855 18.7364 24.4715C17.8412 25.3893 16.3657 25.3893 15.4705 24.4715L9.22803 18.0714C7.91758 16.7279 7.81268 14.6188 8.98334 13.1519C10.4023 11.3738 13.0703 11.2737 14.6185 12.9404L20.5861 19.3646L19.4139 20.4535L13.4462 14.0293Z",fill:"#C4C4C4"})]}))}function u(e){return(0,s.jsxs)("svg",(0,o.Z)((0,l.Z)({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e),{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("rect",{x:"7",y:"20",width:"4",height:"4",stroke:"#C4C4C4",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"12.5",cy:"13.5",r:"2.5",stroke:"#C4C4C4",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M15.4689 21.25L18.5 16L21.5311 21.25H15.4689Z",stroke:"#C4C4C4",strokeWidth:"2"})]}))}function m(e){return(0,s.jsxs)("svg",(0,o.Z)((0,l.Z)({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e),{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.0761 20.0534V14.2508L11.9239 15.8358V23.5082C11.9736 23.6655 12 23.8303 12 24C12 25.1046 10.8807 26 9.5 26C8.11929 26 7 25.1046 7 24C7 22.8954 8.11929 22 9.5 22C9.69829 22 9.89118 22.0185 10.0761 22.0534V15.8358C10.0761 15.0246 10.6052 14.3083 11.3806 14.0698L17.4893 12.1905C18.2021 11.9712 18.9239 12.5043 18.9239 13.2502V21.5082C18.9736 21.6655 19 21.8303 19 22C19 23.1046 17.8807 24 16.5 24C15.1193 24 14 23.1046 14 22C14 20.8954 15.1193 20 16.5 20C16.6983 20 16.8912 20.0185 17.0761 20.0534Z",fill:"#C4C4C4"})]}))}function p(e){return(0,s.jsxs)("svg",(0,o.Z)((0,l.Z)({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e),{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 15C7 14.4477 7.44772 14 8 14H20C20.5523 14 21 14.4477 21 15C21 15.5523 20.5523 16 20 16H8C7.44772 16 7 15.5523 7 15ZM7 19C7 18.4477 7.44772 18 8 18H20C20.5523 18 21 18.4477 21 19C21 19.5523 20.5523 20 20 20H8C7.44772 20 7 19.5523 7 19ZM8 22C7.44772 22 7 22.4477 7 23C7 23.5523 7.44772 24 8 24H15C15.5523 24 16 23.5523 16 23C16 22.4477 15.5523 22 15 22H8Z",fill:"#C4C4C4"})]}))}function x(e){return(0,s.jsxs)("svg",(0,o.Z)((0,l.Z)({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e),{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.9143 17.8125C21.2432 17.8125 22.3205 16.7352 22.3205 15.4062C22.3205 14.0773 21.2432 13 19.9143 13C18.5853 13 17.508 14.0773 17.508 15.4062C17.508 16.7352 18.5853 17.8125 19.9143 17.8125ZM9.08063 16.0838C9.42048 15.5174 10.2414 15.5174 10.5812 16.0838L13.7013 21.284L15.0893 19.4333C15.4393 18.9667 16.1393 18.9667 16.4893 19.4333L18.8643 22.6C19.2969 23.1768 18.8853 24 18.1643 24H13.7855H13.4143H5.87635C5.19622 24 4.77612 23.258 5.12605 22.6748L9.08063 16.0838Z",fill:"#C4C4C4"})]}))}function f(e){return(0,s.jsxs)("svg",(0,o.Z)((0,l.Z)({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e),{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("rect",{x:"7",y:"20",width:"4",height:"4",stroke:"#C4C4C4",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"12.5",cy:"13.5",r:"2.5",stroke:"#C4C4C4",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M15.4689 21.25L18.5 16L21.5311 21.25H15.4689Z",stroke:"#C4C4C4",strokeWidth:"2"})]}))}function g(e){return(0,s.jsxs)("svg",(0,o.Z)((0,l.Z)({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e),{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.1061 25.2121C17.4783 25.2121 20.2121 22.4783 20.2121 19.1061C20.2121 15.7338 17.4783 13 14.1061 13C10.7338 13 8 15.7338 8 19.1061C8 22.4783 10.7338 25.2121 14.1061 25.2121ZM16.2945 19.8756C16.8288 19.5017 16.8288 18.7104 16.2945 18.3365L14.175 16.8528C13.5524 16.417 12.6969 16.8624 12.6969 17.6224V20.5897C12.6969 21.3497 13.5524 21.7951 14.175 21.3593L16.2945 19.8756Z",fill:"#C4C4C4"})]}))}function v(e){return(0,s.jsxs)("svg",(0,o.Z)((0,l.Z)({width:"24",height:"27",viewBox:"0 0 28 32",fill:"white"},e),{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 13C11.2386 13 9 15.2501 9 18.0256C9 20.1019 10.0788 21.4751 11.0711 22.7383C11.4054 23.1638 11.7299 23.5768 12 24C12.515 24.8069 12.9234 25.4282 13.2332 25.8905C13.607 26.4482 14.393 26.4482 14.7668 25.8905C15.0766 25.4282 15.485 24.8069 16 24C16.2783 23.564 16.6142 23.1523 16.9591 22.7295C17.943 21.5235 19 20.228 19 18.0256C19 15.2501 16.7614 13 14 13ZM14 20C15.1046 20 16 19.1046 16 18C16 16.8954 15.1046 16 14 16C12.8954 16 12 16.8954 12 18C12 19.1046 12.8954 20 14 20Z",fill:"#C4C4C4"})]}))}var b=n(3683);const j=e=>{let{file:t,used:n}=e;var l;return(0,s.jsxs)("div",{className:"flex f7 items-center",children:[(0,s.jsxs)("div",{className:"relative flex-shrink-0",children:[(null===(l=t.mimeType)||void 0===l?void 0:l.startsWith("image/"))&&"url"in t?(0,s.jsx)("img",{src:t.url,alt:t.name,className:"br2 ba bw1 b--light-silver",style:{width:20,height:24,objectFit:"cover"}}):(0,s.jsx)(c,{mimeType:t.mimeType}),n&&(0,s.jsx)("div",{className:"flex absolute bottom-0 br-100 bg-blue justify-center items-center",style:{right:"-3px",width:14,height:14},children:(0,s.jsx)(i.Z,{className:"white","aria-label":"Private file",style:{width:14,height:14}})})]}),(0,s.jsxs)("div",{className:"ph2 overflow-x-hidden",children:["downloadUrl"in t?(0,s.jsx)("a",{className:"db truncate pb1 fw6 no-underline dark-gray hover-blue",href:t.downloadUrl,title:t.name,children:t.name}):(0,s.jsx)("div",{className:"truncate pb1 fw6 dark-gray",title:t.name,children:t.name}),(0,s.jsxs)("div",{className:"truncate gray lh-title",children:[(0,a.lL)(t)?(0,s.jsx)("span",{className:"f7 gray",children:"Local"}):n?(0,s.jsx)("span",{className:"f7 fw6 blue",children:"In use"}):(0,s.jsx)("span",{className:"f7 gray",children:"Unused"}),(0,s.jsx)("span",{className:"light-gray",children:" \u2022 "}),"size"in t?(0,s.jsxs)(s.Fragment,{children:[(0,r.BU)(t.size),(0,s.jsx)("span",{className:"light-gray",children:" \u2022 "})]}):null,(0,s.jsx)(b.q,{time:t.createTime})]})]})]})}},54137:function(e,t,n){n.d(t,{q:function(){return r}});var s=n(85893);n(67294);const r=e=>{let{text:t,matcher:n,highlightClass:r="underline"}=e;const a=[];let i=0;for(let[l,o]of n.matches(t).sort(((e,t)=>{let[n]=e,[s]=t;return n-s})))l=Math.max(i,l),o=Math.max(i,o),o>l&&(l>i&&a.push((0,s.jsx)(s.Fragment,{children:t.slice(i,l)})),a.push((0,s.jsx)("span",{className:r,children:t.slice(l,o)},l)),i=o);return a.push((0,s.jsx)(s.Fragment,{children:t.slice(i)})),(0,s.jsx)(s.Fragment,{children:a})}},30238:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},e),{children:[(0,a.jsx)("path",{d:"M10.2929 8.29291L11.7071 9.70712L9.4142 12L11.7071 14.2929L10.2929 15.7071L6.58577 12L10.2929 8.29291Z"}),(0,a.jsx)("path",{d:"M8 11L14 11L14 13L8 13L8 11Z"}),(0,a.jsx)("path",{d:"M2 3C2 1.89543 2.89543 1 4 1H10L14 5V8H12V6H9V3H4V13H6V15H4C2.89543 15 2 14.1046 2 13V3Z"})]}))},71675:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,a.jsx)("rect",{x:"9",y:"12",width:"2",height:"10",transform:"rotate(-180 9 12)",fill:"currentColor"}),(0,a.jsx)("path",{d:"M12 9L8 13L4 9",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),e.children]}))},75872:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,a.jsx)("rect",{x:"7",y:"4",width:"2",height:"10",fill:"currentColor"}),(0,a.jsx)("path",{d:"M4 7L8 3L12 7",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),e.children]}))},46802:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),{children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_2412_6063)",children:[(0,a.jsx)("path",{d:"M8 11.1C9.65685 11.1 10.8 9.65685 10.8 8H10C8.89543 8 8 7.10457 8 6V5C6.34315 5 5 6.34315 5 8C5 9.65685 6.34315 11.1 8 11.1Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.19093 7.98979C2.46293 8.46514 3.04532 9.12944 3.94418 9.73177C5.02258 10.4544 6.4321 11 8.00001 11C9.56792 11 10.9774 10.4544 12.0558 9.73177C12.9547 9.12944 13.5371 8.46514 13.8091 7.98978C13.2086 6.84813 11.2592 5 8.00001 5C4.74085 5 2.79147 6.84813 2.19093 7.98979ZM0.151323 7.68377C0.794907 5.75302 3.59368 3 8.00001 3C12.4063 3 15.2051 5.75302 15.8487 7.68377L15.9541 8L15.8487 8.31623C15.5017 9.35714 14.4797 10.5151 13.1692 11.3932C11.8226 12.2956 10.0321 13 8.00001 13C5.96792 13 4.17744 12.2956 2.83083 11.3932C1.52032 10.5151 0.498294 9.35714 0.151323 8.31623L0.0459137 8L0.151323 7.68377Z"}),(0,a.jsx)("rect",{width:"19.578",height:"2",rx:"1",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 15.658 14.8438)",fill:"white"}),(0,a.jsx)("rect",{width:"16.2193",height:"2",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 15.3884 12.5742)"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_2412_6063",children:(0,a.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]}))},64804:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,a.jsx)("path",{d:"M2 6C2 5.44772 2.44772 5 3 5H10C10.5523 5 11 5.44772 11 6V13C11 13.5523 10.5523 14 10 14H3C2.44772 14 2 13.5523 2 13V6Z",stroke:"currentColor",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M4 2.00004L12 2.00001C13.1046 2 14 2.89544 14 4.00001V12",stroke:"currentColor",strokeWidth:"2"}),e.children]}))},61777:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsx)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.15771L3.98463 4.50001L5 5.0923L9.01537 2.75001L8 2.15771ZM11 3.90771L6.98463 6.25001L8 6.8423L12.0154 4.50001L11 3.90771ZM13 6.24104L9 8.57438V13.259L13 10.9256V6.24104ZM7 13.259V8.57438L3 6.24104V10.9256L7 13.259ZM7.24419 0.283189C7.71124 0.0107464 8.28876 0.0107473 8.75581 0.283189L14.5039 3.63623C14.8111 3.81544 15 4.14434 15 4.50001V11.2128C15 11.7463 14.7166 12.2397 14.2558 12.5085L8.50387 15.8638C8.19251 16.0454 7.80749 16.0454 7.49613 15.8638L1.74419 12.5085C1.28337 12.2397 1 11.7463 1 11.2128V4.50001C1 4.14434 1.18891 3.81544 1.49613 3.63623L7.24419 0.283189Z"})}))},26825:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},e),{children:[(0,a.jsx)("path",{d:"M2 3C2 1.89543 2.89543 1 4 1H10L14 5V8H12V6H9V3H4V13H6V15H4C2.89543 15 2 14.1046 2 13V3Z"}),(0,a.jsx)("path",{d:"M7.3598 12.7682L8.64017 11.2318L11 13.1983L13.3598 11.2318L14.6402 12.7682L11 15.8017L7.3598 12.7682Z"}),(0,a.jsx)("path",{d:"M10 15L10 9L12 9L12 15L10 15Z"})]}))},86057:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},e),{children:[(0,a.jsx)("path",{d:"M8 11C9.65685 11 11 9.65685 11 8H10C8.89543 8 8 7.10457 8 6V5C6.34315 5 5 6.34315 5 8C5 9.65685 6.34315 11 8 11Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.19092 7.98979C2.46291 8.46514 3.0453 9.12944 3.94417 9.73177C5.02256 10.4544 6.43208 11 7.99999 11C9.5679 11 10.9774 10.4544 12.0558 9.73177C12.9547 9.12944 13.5371 8.46514 13.8091 7.98978C13.2085 6.84813 11.2592 5 7.99999 5C4.74083 5 2.79145 6.84813 2.19092 7.98979ZM0.151308 7.68377C0.794892 5.75302 3.59366 3 7.99999 3C12.4063 3 15.2051 5.75302 15.8487 7.68377L15.9541 8L15.8487 8.31623C15.5017 9.35714 14.4797 10.5151 13.1692 11.3932C11.8226 12.2956 10.0321 13 7.99999 13C5.9679 13 4.17742 12.2956 2.83082 11.3932C1.52031 10.5151 0.498278 9.35714 0.151308 8.31623L0.0458984 8L0.151308 7.68377Z"})]}))},1099:function(e,t,n){n.d(t,{v:function(){return i}});var s=n(41799),r=n(69396),a=n(85893);n(67294);const i=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor"},e),{children:[(0,a.jsx)("circle",{r:"1.5",cy:"8",cx:"2.5"}),(0,a.jsx)("circle",{r:"1.5",cy:"8",cx:"7.5"}),(0,a.jsx)("circle",{r:"1.5",cy:"8",cx:"12.5"})]}))},93797:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,a.jsx)("path",{d:"M11 15V15C11 14.4477 10.5523 14 10 14L6 14C5.44772 14 5 14.4477 5 15V15",stroke:"currentColor",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M3 3L13 3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M11 8.25L13 3L15 8.25C15 9.2165 14.1046 10 13 10C11.8954 10 11 9.2165 11 8.25Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M1 8.25L3 3L5 8.25C5 9.2165 4.10457 10 3 10C1.89543 10 1 9.2165 1 8.25Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M8 3L8 14",stroke:"currentColor",strokeWidth:"2"})]}))},26492:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);t.Z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},e),{children:[(0,a.jsx)("path",{d:"M3 1.75C2.30964 1.75 1.75 2.30964 1.75 3C1.75 3.69036 2.30964 4.25 3 4.25C3.69036 4.25 4.25 3.69036 4.25 3C4.25 2.30964 3.69036 1.75 3 1.75ZM0.25 3C0.25 1.48122 1.48122 0.25 3 0.25C4.51878 0.25 5.75 1.48122 5.75 3C5.75 4.51878 4.51878 5.75 3 5.75C1.48122 5.75 0.25 4.51878 0.25 3Z"}),(0,a.jsx)("path",{d:"M13 11.75C12.3096 11.75 11.75 12.3096 11.75 13C11.75 13.6904 12.3096 14.25 13 14.25C13.6904 14.25 14.25 13.6904 14.25 13C14.25 12.3096 13.6904 11.75 13 11.75ZM10.25 13C10.25 11.4812 11.4812 10.25 13 10.25C14.5188 10.25 15.75 11.4812 15.75 13C15.75 14.5188 14.5188 15.75 13 15.75C11.4812 15.75 10.25 14.5188 10.25 13Z"}),(0,a.jsx)("path",{d:"M10 12C9.44771 12 9 11.5523 9 11V5C9 3.34315 7.65685 2 6 2H5V4H6C6.55228 4 7 4.44772 7 5V11C7 12.6569 8.34315 14 10 14H11V12H10Z"})]}))},14663:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"},e),{children:[(0,a.jsx)("path",{d:"M2 9V5.89453C2 5.34225 2.44772 4.89453 3 4.89453H10C10.5523 4.89453 11 5.34225 11 5.89453V13.8945C11 14.4468 10.5523 14.8945 10 14.8945H8"}),(0,a.jsx)("line",{x1:"4",y1:"10",x2:"4",y2:"16"}),(0,a.jsx)("path",{d:"M5 3L5 2.00001L12 2C13.1046 2 14 2.89543 14 4V12H13"}),(0,a.jsx)("line",{x1:"7",y1:"13",x2:"1",y2:"13"}),e.children]}))},98807:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},e),{children:[(0,a.jsx)("path",{d:"M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{d:"M8.00002 5C7.23823 5 6.75235 5.42428 6.33207 6.0547L4.66797 4.9453C5.24769 4.07572 6.26181 3 8.00002 3C8.85764 3 9.74527 3.22801 10.4006 3.82095C11.0961 4.45014 11.3871 5.36121 11.24 6.39142C11.0654 7.61316 10.1329 8.20968 9.62788 8.53274C9.61312 8.54219 9.59872 8.5514 9.58471 8.56038C9.28352 8.75365 9.13447 8.85248 9.03752 8.95193C9.01576 8.97425 9.00487 8.98888 9.00006 8.9961C9.00004 8.99719 9.00002 8.99848 9.00002 9V10H7.00002V9C7.00002 8.36831 7.27443 7.89539 7.60537 7.55588C7.87516 7.27912 8.21507 7.06207 8.45012 6.91197C8.46899 6.89992 8.48719 6.8883 8.50461 6.87712C9.08301 6.50598 9.22542 6.35112 9.26007 6.10858C9.32718 5.63879 9.19239 5.42486 9.05886 5.30405C8.88525 5.14699 8.54074 5 8.00002 5Z"}),(0,a.jsx)("circle",{cx:"8",cy:"12",r:"1.25"})]}))},71066:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},e),{children:[(0,a.jsx)("path",{d:"M8 1h3v1l-1 1v4l2 .875V9H9v5.125L8 15l-1-.875V9H4V7.875L6 7V3L5 2V1z"}),e.children]}))},3338:function(e,t,n){n.d(t,{s:function(){return l}});var s=n(41799),r=n(69396),a=n(85893);n(67294);const i=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 16 16"},e),{children:[(0,a.jsx)("path",{d:"M4 12.4788V3.52116C4 2.23802 5.50646 1.54723 6.47878 2.38451L11.68 6.86335C12.375 7.46178 12.375 8.53822 11.68 9.13665L6.47878 13.6155C5.50646 14.4528 4 13.762 4 12.4788Z"}),e.children]}));t.Z=i;const l=e=>(0,a.jsx)(i,(0,s.Z)({fill:"currentColor"},e))},95024:function(e,t,n){n.d(t,{E:function(){return i}});var s=n(41799),r=n(69396),a=n(85893);const i=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor"},e),{children:[(0,a.jsx)("path",{d:"M8 9L8 3C8 2.44772 8.44772 2 9 2L11 2",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M5 6L8 9L11 6",strokeWidth:"2"}),(0,a.jsx)("circle",{cx:"8",cy:"14",r:"0.5"}),(0,a.jsx)("circle",{cx:"5",cy:"14",r:"0.5"}),(0,a.jsx)("circle",{cx:"11",cy:"14",r:"0.5"})]}))},75063:function(e,t,n){n.d(t,{x:function(){return i}});var s=n(41799),r=n(69396),a=n(85893);const i=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor"},e),{children:[(0,a.jsx)("path",{d:"M8 9L8 3C8 2.44772 8.44772 2 9 2L11 2",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M5 6L8 9L11 6",strokeWidth:"2"}),(0,a.jsx)("circle",{cx:"8",cy:"14",r:"0.5"})]}))},98768:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsx)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:(0,a.jsx)("path",{d:"M4.33291 5.99999H6H7V7.99999H6H2H1V6.99999V3V2H3V3V4.31502C4.45333 2.1643 7.11877 1.0023 9.80921 1.59029C13.3335 2.36051 15.5661 5.84188 14.7958 9.36614C14.0256 12.8904 10.5442 15.123 7.01998 14.3528L6.04304 14.1393L6.47006 12.1854L7.447 12.3989C9.89216 12.9333 12.3076 11.3843 12.842 8.93912C13.3763 6.49396 11.8274 4.07856 9.38219 3.54417C7.29175 3.08731 5.22305 4.1532 4.33291 5.99999Z",fill:"currentColor"})}))},26959:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2"},e),{children:[(0,a.jsx)("rect",{x:"3",y:"7",width:"10",height:"7",rx:"0.5"}),(0,a.jsx)("path",{d:"M5 7.5V5C5 1.36704 9.9495 1.03365 10.8577 4"})]}))},952:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsxs)("svg",(0,r.Z)((0,s.Z)({viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor"},e),{children:[(0,a.jsx)("circle",{r:"1.5",cx:"8",cy:"2.5"}),(0,a.jsx)("circle",{r:"1.5",cx:"8",cy:"7.5"}),(0,a.jsx)("circle",{r:"1.5",cx:"8",cy:"12.5"})]}))},22513:function(e,t,n){var s=n(41799),r=n(69396),a=n(85893);n(67294);t.Z=e=>(0,a.jsx)("svg",(0,r.Z)((0,s.Z)({viewBox:"0 0 16 16",width:"16",height:"16",fill:"none",strokeWidth:"1.5",strokeLinecap:"round",stroke:"currentColor"},e),{children:(0,a.jsx)("path",{d:"M6.983 2.57l-5.021 8.25a1.19 1.19 0 0 0 1.017 1.785h10.013a1.19 1.19 0 0 0 1.017-1.784L9.017 2.57a1.19 1.19 0 0 0-2.034 0zM8 5.45V8M8 10v.1"})}))},8052:function(e,t,n){n.d(t,{W:function(){return r}});var s=n(85893);function r(e){let{icon:t,text:n,className:r=""}=e;const a=(0,s.jsx)(t,{className:"nb1 ".concat(r)});return n?(0,s.jsxs)("b",{children:[a," ",n]}):a}},88601:function(e,t,n){n.d(t,{e:function(){return l}});var s=n(85893),r=n(65988),a=n.n(r),i=n(40178);const l=e=>{let{shortcut:t}=e;return(0,s.jsx)("span",{title:(0,i._9)(t),className:"f7",children:t.split("-").map(((e,t)=>(0,s.jsxs)("span",{className:"jsx-7e2b8cbab695f8d1 "+"dib ".concat(t>0?"ml1":""," ").concat("Drag"===e||"Click"===e?"":"tc br2 ph1 key-shadow"),children:[("Drag"===e||"Click"===e)&&"+ ",(0,i.ZP)(e),(0,s.jsx)(a(),{id:"7e2b8cbab695f8d1",children:"span.jsx-7e2b8cbab695f8d1{min-width:6px}.key-shadow.jsx-7e2b8cbab695f8d1{-webkit-box-shadow:0 0 0 1px#dedede,1px 1px 0 1px var(--silver);-moz-box-shadow:0 0 0 1px#dedede,1px 1px 0 1px var(--silver);box-shadow:0 0 0 1px#dedede,1px 1px 0 1px var(--silver)}"})]},t)))})}},68065:function(e,t,n){n.d(t,{i:function(){return xe}});var s=n(85893),r=n(94184),a=n.n(r),i=n(2334),l=n(1864),o=n(22027),c=n(3338),d=n(41799),h=n(51289),u=n(40178),m=n(72760),p=n(67294),x=n(11233),f=n(95024),g=n(75063);const v=p.forwardRef((function(e,t){let{node:n,dispatch:r,disabled:a,autoWidth:i=!1,className:l,style:o,source:c,onSubmit:v=(()=>{}),onFocus:b}=e;const{id:j}=n,V=(0,m.u2)(n)||"",{0:y,1:w}=(0,p.useState)(V),{0:C,1:k}=(0,p.useState)(!1),N=y!==V,Z=C&&""!==y&&N,L="cell ".concat(n.id);function M(e){return!(y&&!(0,m.r1)(y))&&(r({type:"setName",name:y,id:j,source:c,replaceReferences:e}),!0)}return(0,p.useEffect)((()=>w(V)),[V]),(0,s.jsxs)("div",{className:"relative flex items-stretch",children:[(0,s.jsx)(x.Z,{value:y,"data-cy":"cell-name-input-".concat(c),spellCheck:"false",autoCorrect:"off",autoCapitalize:"none",disabled:a,className:l,style:(0,d.Z)({paddingRight:N?20:8,color:!y||(0,m.r1)(y)?void 0:"var(--red)",font:"var(--monospace-font)",textOverflow:"ellipsis",maxWidth:200,minWidth:75,width:i?"calc(".concat(N?16:0,"px + (").concat((y||L).length," * 8.5px) + (2 * var(--spacing-small)))"):(null===o||void 0===o?void 0:o.minWidth)||75},o),minimal:!0,maxLength:65536,placeholder:L,large:!1,onChange:e=>w(e.target.value.replace(/\s/g,"")),onBlur:async()=>{if(await Promise.resolve(),!M(!1))return w(V)},onKeyDown:e=>{if(k(!!e.altKey),"Enter"===e.key||("s"===e.key||"\xdf"===e.key)&&e[h.Ao]&&!e.shiftKey){if(!M(!!e.altKey))return;if(e.preventDefault(),e.shiftKey||"s"===e.key||"\xdf"===e.key)return e.stopPropagation();v()}},onKeyUp:e=>{e.altKey||k(!1)},onFocus:b,ref:t}),N?(0,s.jsx)("button",{title:"Rename cell ".concat((0,u.ZP)("Enter"),"\nAnd replace references ").concat((0,u.ZP)("Alt-Enter")),className:"absolute top-0 right-0 h-100 bg-transparent bn ph1 blue hover-dark-blue flex items-center pointer squishy",onMouseDown:()=>r({type:"setName",name:y,id:j,source:"nodeToolbar",replaceReferences:Z}),children:Z?(0,s.jsx)(f.E,{}):(0,s.jsx)(g.x,{})}):null]})}));var b=n(12627),j=n(61107),V=n(69150),y=n(3142),w=n(4242);const C=e=>{let{node:t,editorState:n,hovered:r}=e;const{id:i,mode:l,value:d}=t,h=d.length!==n.doc.length||d!==n.doc.toString(),{safe:x,focused:f,pending:g,readonly:C,displayMode:k}=(0,w.v9)((e=>{let{notebook:t}=e;var n;const s=t.workerStatus.get(i);return{safe:t.safe,focused:t.focusId===i||t.selectionFocusId===i||t.selection.has(i),pending:"pending"===(null===s||void 0===s?void 0:s.status),readonly:(0,y.os)(t),displayMode:null===s||void 0===s||null===(n=s.display)||void 0===n?void 0:n.mode}})),N=!x&&!(0,m.cS)(t)&&"none"!==k,Z=(0,w.I0)(),L=(0,p.useRef)(null);return(0,s.jsxs)("div",{className:a()("pea flex justify-between items-stretch br2 bb b--white br--top",f?"bg-observable-focus-lightest-blue":"bg-near-white"),style:{borderTopLeftRadius:N||f||r?0:void 0,borderTopRightRadius:N?0:void 0,borderBottomLeftRadius:"table"===l&&(f||r)?0:void 0,margin:"0 -14px",padding:"2px 0",height:V.T6+1},children:[(0,s.jsxs)("div",{className:"flex items-stretch",children:[(0,s.jsx)(v,{node:t,dispatch:Z,source:"nodeEditor",autoWidth:!0,className:"bg-transparent",style:{marginLeft:6,boxShadow:"none"},onFocus:f?void 0:e=>{Z({type:"focus",id:i}),e.target.focus()},disabled:C,ref:L}),(0,s.jsx)(b.aN,{node:t})]}),(0,s.jsx)("button",{title:"Run cell ".concat((0,u.ZP)("Shift-Enter")),className:a()("bg-transparent bn br2 f6 fw5 flex items-center pointer squishy",h?"blue hover-dark-blue":f?"observable-focus-dark-blue hover-blue":"moon-gray hover-mid-gray"),onMouseDown:j.P,onClick:()=>Z({type:"commit",id:i,trigger:"click",source:"nodeEditor"}),children:g?(0,s.jsx)(o.Z,{}):h?(0,s.jsx)(c.s,{}):(0,s.jsx)(c.Z,{})})]})};var k=n(71066),N=n(18270),Z=n(14921),L=n(30883),M=n(37497),S=n(71675),H=n(75872),R=n(23869),E=n(46802),_=n(86057),D=n(14663),F=n(8433),I=n(89905),P=n(21142),T=n(25158),A=n(31536);const U=p.memo((function(e){let{node:t,hasPrevious:n,hasNext:r,editorFocused:a,editorKey:i,editorMode:l,editorReadonly:o,editorSettings:d,editors:h,dirty:m,dispatch:x}=e;var f;const{id:g,data:b,pinned:j}=t,V="none"===(null===b||void 0===b||null===(f=b.display)||void 0===f?void 0:f.mode),{notebook:y,currentUser:C}=(0,w.v9)((e=>{let{notebook:t,currentUser:n}=e;return{notebook:t,currentUser:n}})),{0:L,1:U}=(0,p.useState)(0),O=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(M.hA,{icon:m?c.s:c.Z,title:"Run cell ".concat((0,u.ZP)("Shift-Enter")),className:m?"blue":"",onClick:()=>{h.applyCommand(i,(0,N.z)("click","nodeToolbar"))}}),(0,s.jsx)(M.hA,{icon:k.Z,title:"".concat(j?"Unpin":"Pin"," cell ").concat((0,u.ZP)("Mod-.")),className:j?"blue ml2":"ml2",joinRight:!0,onClick:()=>x({type:"togglePin",id:g})}),(0,s.jsx)(M.hA,{icon:V?E.Z:_.Z,title:"".concat(V?"Show":"Hide"," output ").concat((0,u.ZP)("Mod-,")),className:"ml2",joinLeft:!0,onClick:()=>x({type:"toggleDisplay",id:g})}),(0,s.jsx)(M.hA,{icon:R.Z,title:"Select cell ".concat((0,u.ZP)("Escape-X")),className:"ml2",onClick:()=>x({type:"selectionPromote"})}),(0,s.jsx)(M.hA,{icon:H.Z,title:"Move cell up ".concat((0,u.ZP)("Ctrl-Shift-Up")),className:"ml2",disabled:!n,joinRight:!0,onClick:()=>x({type:"moveUp",id:g})}),(0,s.jsx)(M.hA,{icon:S.Z,title:"Move cell down ".concat((0,u.ZP)("Ctrl-Shift-Down")),className:"ml2",disabled:!r,joinLeft:!0,onClick:()=>x({type:"moveDown",id:g})}),(0,s.jsx)(M.hA,{icon:D.Z,title:"Duplicate cell ".concat((0,u.ZP)("Shift-Alt-Mod-Down")),className:"ml2",onClick:e=>{x({type:"duplicate",id:g,before:e.shiftKey})}}),(0,s.jsx)(M.hA,{icon:F.Z,title:"Double-click to delete cell ".concat((0,u.ZP)("Alt-Backspace")),className:"ml2",destructive:0!==L,text:L?"Delete?":"",onClick:e=>{L?(x({type:"remove",focusAfter:e.shiftKey,focusBefore:!e.shiftKey,id:g}),window.clearTimeout(L),U(0)):U(window.setTimeout((()=>U(0)),2500))}}),a&&A.qz[l].toolbar.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"ml2 mv1 bl bw1 br2",style:{borderColor:"var(--observable-focus-light-blue)"}}),A.qz[l].toolbar.filter((e=>!e.applies||e.applies(C,y))).map((e=>(0,s.jsx)(M.hA,{"data-cy":e.name,icon:e.icon,title:e.title,joinLeft:e.joinLeft,joinRight:e.joinRight,className:"ml2",onClick:()=>{"attach"!==e.name||d.fileUploadsOn?e.onClick(i,h,g,x):d.loginToUpload&&x({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:"click",source:"nodeEditorToolbarAttachButton"})}},e.name)))]}):null,(0,s.jsx)("div",{className:"flex flex-grow-1"}),(0,s.jsx)(M.hA,{icon:I.Z,title:"Blur cell ".concat((0,u.ZP)("Escape")),transparent:!0,onMouseDown:e=>{e.stopPropagation()},onClick:()=>{x({type:"blur",id:g})}})]});return(0,T.t)()?(0,s.jsx)("div",{className:"pt1 pb2 near-black",style:{marginLeft:-14,marginRight:-14,minWidth:"calc(100% + 28px)",borderBottomRightRadius:"0.25rem",borderTopRightRadius:0,backgroundColor:"var(--observable-focus-lightest-blue)"},onMouseDown:e=>{e.preventDefault()},children:(0,s.jsx)("div",{className:"ph2 w-100 flex relative no-wrap overflow-y-hidden overflow-x-auto",children:O})}):(0,s.jsx)(Z.h,{children:(0,s.jsx)("div",{className:"fixed left-0 right-0 bottom-0 pv2 z-1 bg-white b--silver bt near-black",onMouseDown:e=>{e.preventDefault(),h.refocus()},children:(0,s.jsx)(P.Z,{className:"w-100",children:(0,s.jsxs)("div",{className:"flex relative",style:{marginLeft:-14,marginRight:-14},children:[(0,s.jsx)("div",{className:"absolute h-100 flex items-center pr2",style:{font:"var(--monospace-font)",right:"100%"},onMouseDown:e=>{e.stopPropagation()},children:(0,s.jsx)(v,{node:t,source:"nodeToolbar",dispatch:x,disabled:o,style:{textAlign:"right",width:"calc(max((100vw - var(--max-width-8))/2, 0px))"}})}),O]})})})})}));var O=e=>{let{node:t,dirty:n,hasPrevious:r,hasNext:a,editorFocused:o,editorState:c,editors:d,dispatch:h}=e;const u=c.field(l.C);return(0,s.jsx)(U,{node:t,hasPrevious:r,hasNext:a,editorFocused:o,editorKey:c.field(i.A),editorMode:u,editorSettings:c.field(L.i),editors:d,dirty:n,dispatch:h,editorReadonly:c.readOnly})},z=n(48627),B=n(21857);const q=e=>{let{node:{id:t,data:{source:n}},dispatch:s}=e;const r=(0,p.useRef)();return(0,p.useEffect)((()=>{if(null===n.name)return r.current=void 0,void s({type:"sqlDialectUpdated",id:t,dialect:"sql"});const e=new z.YG(n);r.current=e,e.run(s).then((n=>{let{dialect:a}=n;e===r.current&&(a=(0,B.h8)(a),s({type:"sqlDialectUpdated",id:t,dialect:a}))}),(()=>{e===r.current&&s({type:"sqlDialectUpdated",id:t,dialect:"sql"})}))}),[s,t,n]),null};var W=n(65988),G=n.n(W),K=n(73935),Y=n(39567),$=n(69396);var X=e=>(0,s.jsx)("svg",(0,$.Z)((0,d.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:(0,s.jsx)("path",{d:"M9.25 5L6.75 8L9.25 11",stroke:"currentColor",strokeWidth:"2"})})),J=n(40287),Q=n(5152);const ee=n.n(Q)()((()=>Promise.all([n.e(7381),n.e(9614)]).then(n.bind(n,89614))),{loadableGenerated:{webpack:()=>[89614]}}),te=e=>{let{node:t,editors:n}=e;const{signatureHelpData:r,signatureHelpNodeId:a}=(0,w.v9)((e=>{let{notebook:{signatureHelpData:t,signatureHelpNodeId:n}}=e;return{signatureHelpData:t,signatureHelpNodeId:n}})),i=null===r||void 0===r?void 0:r.selectedItemIndex,{0:l,1:o}=(0,p.useState)(null!==i&&void 0!==i?i:0),c=()=>n.repositionTooltips(t.id);if((0,p.useEffect)(c),(0,p.useEffect)((()=>{void 0!==i&&o(i)}),[i,o]),!(null===r||void 0===r?void 0:r.items.length)||a!==t.id||l>=r.items.length)return null;const d=r.items[l];var h;return(0,s.jsxs)("div",{style:{maxHeight:270,fontSize:"0.8125rem"},className:"jsx-208ac902b607ba5c dark-gray bg-white ba b--silver br2 shadow-4 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"jsx-208ac902b607ba5c lh-copy mw6",children:[(0,s.jsx)(ne,{item:d,argumentIndex:null!==(h=r.argumentIndex)&&void 0!==h?h:0,onReady:c}),r.items.length>1?(0,s.jsxs)("div",{onMouseDown:j.P,className:"jsx-208ac902b607ba5c bt b--moon-gray pv2 pl2 pr3 flex items-center",children:[(0,s.jsx)(M.hU,{style:{padding:2},disabled:l<=0,"aria-label":"Previous overload",onClick:()=>o(l-1),icon:X}),(0,s.jsx)("span",{className:"jsx-208ac902b607ba5c mh1 tabular-nums b",children:l+1})," /",(0,s.jsx)("span",{className:"jsx-208ac902b607ba5c mh1 tabular-nums b",children:r.items.length}),(0,s.jsx)("span",{className:"jsx-208ac902b607ba5c ml1",children:"overloads"}),(0,s.jsx)(M.hU,{style:{padding:2},disabled:l>=r.items.length-1,"aria-label":"Next overload",onClick:()=>o(l+1),icon:J.Z})]}):null]}),(0,s.jsx)(G(),{id:"208ac902b607ba5c",children:".tabular-nums.jsx-208ac902b607ba5c{font-variant-numeric:tabular-nums}"})]})},ne=e=>{let{item:{prefixDisplayParts:t,parameters:n,suffixDisplayParts:r,documentation:a,tags:i},argumentIndex:l,onReady:o}=e;i=i.filter((e=>"param"!==e.name&&"returns"!==e.name));const c=n.length&&n.length>l?n[l].documentation:[];return c.length||a.length||o(),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"code pv2 ph3 mt1",children:[(0,s.jsx)(se,{parts:t}),n.map(((e,t)=>(0,s.jsxs)(p.Fragment,{children:[t>0?(0,s.jsx)("span",{children:", "}):null,(0,s.jsx)("span",{className:l===t?"b blue":"",children:(0,s.jsx)(se,{parts:e.displayParts})})]},t))),(0,s.jsx)(se,{parts:r})]}),c.length?(0,s.jsx)("div",{className:"bt b--silver ph3",children:c.map(((e,t)=>(0,s.jsx)(ee,{onReady:o,children:e.text},t)))}):null,a.length?(0,s.jsx)("div",{className:"bt b--silver ph3",children:a.map(((e,t)=>(0,s.jsx)(ee,{onReady:o,children:e.text},t)))}):null,i.length?(0,s.jsx)("div",{className:"bt b--silver pv2 ph3",children:i.map(((e,t)=>{var n;return(0,s.jsx)("div",{className:t<i.length-1?"pb1":"",children:e.text?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:["@",e.name]}),"link"===e.name?(0,s.jsx)("a",{rel:"ugc nofollow noreferrer",href:(0,Y.A)(null===(n=e.text[0])||void 0===n?void 0:n.text),children:(0,s.jsx)(se,{parts:e.text})}):(0,s.jsx)("div",{className:"example"===e.name?"code":"",children:(0,s.jsx)(se,{parts:e.text})})]}):null},"tag-".concat(t))}))}):null]})},se=e=>{let{parts:t,boldIndex:n}=e;return(0,s.jsx)(s.Fragment,{children:t.map(((e,t)=>(0,s.jsx)("span",{className:"".concat(e.kind).concat(n===t?" b":""),children:e.text},t)))})},re=e=>{let{node:t,editors:n,container:r}=e;return(0,K.createPortal)((0,s.jsx)(te,{node:t,editors:n}),r)};var ae=n(12447);var ie=e=>(0,s.jsxs)("svg",(0,$.Z)((0,d.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,s.jsx)("path",{d:"M9.68457 9.76671L13.4927 8.90167L13.3285 5",stroke:"currentColor",strokeWidth:"1.6"}),(0,s.jsx)("path",{d:"M1 8.57188C4.2091 5.26919 9.5576 4.85634 13.3016 8.98472",stroke:"currentColor",strokeWidth:"1.6"})]})),le=n(6016),oe=n(29162),ce=n(65678),de=n(42510),he=n(40042);function ue(e){let[t,...n]=e,s="";for(const r of t)s+=r,n.length>0&&(s+="${".concat(JSON.stringify(n.shift()),"}"));return s}const me=e=>{let{node:t,dispatch:n,hovered:r,focused:i,selected:l}=e;const{id:o}=t;return(0,s.jsxs)("div",{className:a()("flex items-stretch flex-wrap br2 br--bottom",i||l?"bg-observable-focus-lightest-blue":"bg-near-white"),style:{margin:"0 -14px",padding:"2px 6px",rowGap:2,minHeight:V.T6,borderBottomLeftRadius:i||r?0:void 0},children:[(0,s.jsx)(oe.wn,{id:o}),(0,s.jsx)(le.oe,{id:o}),(0,s.jsx)(de.PE,{id:o}),(0,s.jsx)(ce.p2,{id:o}),(0,s.jsx)(pe,{node:t,dispatch:n})]})},pe=e=>{let{node:t,dispatch:n}=e;const{id:r,data:a}=t,i=a.source,{0:l,1:o}=(0,p.useState)(),c=(0,p.useRef)(),d=(0,w.v9)((e=>{let{notebook:t}=e;return(0,y.os)(t)})),h=(0,he.v9)((e=>{let{currentUser:t}=e;return"hide"!==(null===t||void 0===t?void 0:t.settings.confirmConvertFromTable)}));return(0,p.useEffect)((()=>{if(null===i.name)return c.current=void 0,void o(void 0);const e=new z.FJ(i);c.current=e,e.run(n).then((t=>{let{dialect:n}=t;e===c.current&&o((0,B.Ov)(n))}),(()=>{e===c.current&&o(void 0)}))}),[n,i]),l&&"array"!==l?(0,s.jsxs)("button",{className:"flex ph2 f7 fw5 lh-copy br2 bn items-center bg-transparent relative ".concat(d?"moon-gray":"dark-gray hover-black"," pointer animate-all"),onClick:function(){new z.zL((0,B.M7)(a),a.operations).run(n).then(ue,(e=>(console.error("Error fetching query: ",e),""))).then((e=>{n(h?{type:"showModal",modal:"convertFromTable",modalProps:{id:r,value:e}}:{type:"setMode",id:r,source:"cellMenu",trigger:"click",mode:"sql",value:e})}))},title:"Convert to SQL mode",disabled:d,style:{marginLeft:-3},children:[(0,s.jsx)(ie,{}),(0,s.jsx)("span",{className:"ml1",children:"SQL"})]}):null},xe=p.memo((function(e){let{node:t,editorState:n,focused:r,hovered:d,selected:h,hasPrevious:x,hasNext:f,editors:g,compareStyle:v}=e;const{id:b,value:y,pinned:Z}=t,L=n.field(i.A),M=n.field(l.C),S=(0,w.I0)(),H=(0,p.useRef)(null),R=(0,p.useRef)(null),{0:E,1:_}=(0,p.useState)(!1),D=(0,ae.GS)(ae.ro),{displayMode:F,pending:I}=(0,w.v9)((e=>{let{notebook:t}=e;var n,s,r;return{displayMode:null===(n=t.workerStatus.get(b))||void 0===n||null===(s=n.display)||void 0===s?void 0:s.mode,pending:"pending"===(null===(r=t.workerStatus.get(b))||void 0===r?void 0:r.status)}})),P=!(0,m.cS)(t)&&"none"!==F,T=y.length!==n.doc.length||y!==n.doc.toString();return(0,p.useEffect)((()=>(R.current=D?null:document.createElement("div"),g.attach(L,H.current,R.current),()=>g.detach(L))),[g,D,L]),(0,p.useEffect)((()=>{if(!r)return;const e=H.current;function t(){_(document.hasFocus())}function n(){_(e.contains(document.activeElement))}function s(){_(!1)}return e.addEventListener("focusin",t),e.addEventListener("focusout",s),addEventListener("focus",n),addEventListener("blur",s),_(document.hasFocus()&&e.contains(document.activeElement)),()=>{e.removeEventListener("focusin",t),e.removeEventListener("focusout",s),removeEventListener("focus",n),removeEventListener("blur",s),_(!1)}}),[r]),(0,s.jsxs)("div",{className:"relative pea",children:[R.current?(0,s.jsx)(re,{node:t,editors:g,container:R.current}):null,("sql"===M||"table"===M)&&(0,s.jsx)(C,{node:t,editorState:n,hovered:d}),"sql"===M&&(0,s.jsx)(q,{node:t,dispatch:S}),"table"===M&&(0,s.jsx)(me,{node:t,dispatch:S,hovered:d,focused:r,selected:h}),(0,s.jsxs)("div",{ref:H,className:a()(d&&"node-hover",n.readOnly&&"node-readonly",r&&"node-focus",h&&"node-select",r||h||"add"!==v?"":" node-add","sql"===M&&"node-toolbar","relative","table"===M&&"dn"),children:[!("sql"===M||"table"===M)&&(0,s.jsx)("button",{title:"Run cell ".concat((0,u.ZP)("Shift-Enter")),className:a()("flex items-center absolute top-0 bg-transparent bn br2 pointer squishy",T?"blue hover-dark-blue":r||h?"observable-focus-dark-blue hover-blue":"moon-gray hover-mid-gray"),onMouseDown:j.P,onClick:()=>g.applyCommand(L,(0,N.z)("click","nodeEditor")),style:{right:-14,height:V.T6},children:I?(0,s.jsx)(o.Z,{}):T?(0,s.jsx)(c.s,{}):(0,s.jsx)(c.Z,{})}),r&&!n.readOnly&&(0,s.jsx)(O,{node:t,dirty:T,editorFocused:E,editorState:n,editors:g,hasPrevious:x,hasNext:f,dispatch:S})]}),(d||r)&&P&&(0,s.jsx)("div",{className:"flex absolute moon-gray",style:{top:4,left:-55},children:(0,s.jsx)(k.Z,{className:"".concat(n.readOnly?"":"pointer ","squishy ").concat(Z&&!n.readOnly?"blue":"hover-mid-gray"),role:"button","aria-label":Z?"Unpin":"Pin",onMouseDown:j.P,onClick:()=>n.readOnly?void 0:S({type:"togglePin",id:b}),style:{padding:"3px 0 2px 0"},children:(0,s.jsxs)("title",{children:[Z?"Unpin":"Pin"," cell ",(0,u.ZP)("Mod-.")]})})})]})}))},49202:function(e,t,n){n.d(t,{a:function(){return Ct}});var s=n(85893),r=n(2334),a=n(1864),i=n(730),l=n(14921),o=n(33042),c=n(31115),d=n(40178),h=n(67294),u=n(99223),m=n(34318),p=n(37497),x=n(71675),f=n(75872),g=n(23869),v=n(46802),b=n(86057),j=n(14663),V=n(71066),y=n(3338),w=n(41799),C=n(69396);const k=e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,s.jsx)("mask",{id:"path-1-inside-1_528:41919",fill:"white",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 1C2.79086 1 1 2.79086 1 5V11C1 13.2091 2.79086 15 5 15H11C13.2091 15 15 13.2091 15 11V5C15 2.79086 13.2091 1 11 1H5ZM11.868 6.94597L12.5639 6.22791L11.1278 4.83596L10.4318 5.55403L7.149 8.94108L5.67569 7.67824L4.91644 7.02745L3.61485 8.54597L4.37411 9.19676L6.56161 11.0718L7.2758 11.6839L7.93047 11.0085L11.868 6.94597Z"})}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 1C2.79086 1 1 2.79086 1 5V11C1 13.2091 2.79086 15 5 15H11C13.2091 15 15 13.2091 15 11V5C15 2.79086 13.2091 1 11 1H5ZM11.868 6.94597L12.5639 6.22791L11.1278 4.83596L10.4318 5.55403L7.149 8.94108L5.67569 7.67824L4.91644 7.02745L3.61485 8.54597L4.37411 9.19676L6.56161 11.0718L7.2758 11.6839L7.93047 11.0085L11.868 6.94597Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M12.5639 6.22791L14.0001 7.61985L15.392 6.18372L13.9559 4.79177L12.5639 6.22791ZM11.868 6.94597L10.4318 5.55403L10.4318 5.55403L11.868 6.94597ZM11.1278 4.83596L12.5198 3.39982L11.0836 2.00788L9.69167 3.44401L11.1278 4.83596ZM10.4318 5.55403L11.868 6.94597L11.868 6.94597L10.4318 5.55403ZM7.149 8.94108L5.84742 10.4596L7.2758 11.6839L8.58514 10.333L7.149 8.94108ZM5.67569 7.67824L6.97728 6.15973L6.97728 6.15973L5.67569 7.67824ZM4.91644 7.02745L6.21802 5.50894L4.69951 4.20736L3.39792 5.72587L4.91644 7.02745ZM3.61485 8.54597L2.09634 7.24438L0.794758 8.7629L2.31327 10.0645L3.61485 8.54597ZM4.37411 9.19676L5.67569 7.67824L5.67569 7.67824L4.37411 9.19676ZM6.56161 11.0718L5.26003 12.5903L5.26003 12.5903L6.56161 11.0718ZM7.2758 11.6839L5.97422 13.2024L7.40261 14.4268L8.71194 13.0759L7.2758 11.6839ZM7.93047 11.0085L9.3666 12.4004L9.3666 12.4004L7.93047 11.0085ZM3 5C3 3.89543 3.89543 3 5 3V-1C1.68629 -1 -1 1.68629 -1 5H3ZM3 11V5H-1V11H3ZM5 13C3.89543 13 3 12.1046 3 11H-1C-1 14.3137 1.68629 17 5 17V13ZM11 13H5V17H11V13ZM13 11C13 12.1046 12.1046 13 11 13V17C14.3137 17 17 14.3137 17 11H13ZM13 5V11H17V5H13ZM11 3C12.1046 3 13 3.89543 13 5H17C17 1.68629 14.3137 -1 11 -1V3ZM5 3H11V-1H5V3ZM11.1278 4.83596L10.4318 5.55403L13.3041 8.33792L14.0001 7.61985L11.1278 4.83596ZM9.73586 6.27209L11.172 7.66404L13.9559 4.79177L12.5198 3.39982L9.73586 6.27209ZM11.868 6.94597L12.5639 6.2279L9.69167 3.44401L8.9957 4.16208L11.868 6.94597ZM8.58514 10.333L11.868 6.94597L8.9957 4.16208L5.71286 7.54913L8.58514 10.333ZM4.37411 9.19676L5.84742 10.4596L8.45058 7.42257L6.97728 6.15973L4.37411 9.19676ZM3.61485 8.54597L4.37411 9.19676L6.97728 6.15973L6.21802 5.50894L3.61485 8.54597ZM5.13337 9.84755L6.43495 8.32904L3.39792 5.72587L2.09634 7.24438L5.13337 9.84755ZM5.67569 7.67824L4.91644 7.02745L2.31327 10.0645L3.07253 10.7153L5.67569 7.67824ZM7.86319 9.55324L5.67569 7.67824L3.07253 10.7153L5.26003 12.5903L7.86319 9.55324ZM8.57739 10.1654L7.86319 9.55324L5.26003 12.5903L5.97422 13.2024L8.57739 10.1654ZM6.49433 9.61653L5.83967 10.292L8.71194 13.0759L9.3666 12.4004L6.49433 9.61653ZM10.4318 5.55403L6.49433 9.61653L9.3666 12.4004L13.3041 8.33792L10.4318 5.55403Z",fill:"currentColor",mask:"url(#path-1-inside-1_528:41919)"})]}));var N=n(8433),Z=n(89905),L=n(21142);var M=function(e){let{model:t,selection:n,selectionFocusId:r,dispatch:a}=e;const i=(0,u.dZ)({selection:n,selectionFocusId:r}),w=(0,c.G)(i,(e=>!(0,o.DY)(t,e).pinned)),C=(0,c.G)(i,(e=>(0,m.qU)((0,o.DY)(t,e)))),M=(0,c.G)(i,(e=>{const n=(0,o.t$)(t,e);return null!==n&&!i.has(n)})),S=(0,c.G)(i,(e=>{const n=(0,o.o4)(t,e);return null!==n&&!i.has(n)})),{0:H,1:R}=(0,h.useState)(0);return(0,s.jsx)(l.h,{children:(0,s.jsx)("div",{className:"fixed left-0 right-0 bottom-0 pv2 z-1 bg-white b--silver bt near-black",children:(0,s.jsx)(L.Z,{className:"w-100",children:(0,s.jsxs)("div",{className:"flex relative",style:{marginLeft:-14,marginRight:-14},children:[(0,s.jsxs)("div",{className:"absolute h-100 nowrap flex items-center fw6 pr2",style:{right:"100%"},children:[i.size.toLocaleString("en")," ",1===i.size?"cell":"cells"]}),(0,s.jsx)(p.hA,{icon:y.Z,title:"Run cells ".concat((0,d.ZP)("Shift-Enter")),onClick:()=>a({type:"selectionRun"})}),(0,s.jsx)(p.hA,{icon:V.Z,title:"".concat(w?"Pin cells":"Unpin cells"," ").concat((0,d.ZP)("P")),className:w?"ml2":"blue ml2",joinRight:!0,onClick:()=>a({type:"selectionPin"})}),(0,s.jsx)(p.hA,{icon:C?b.Z:v.Z,title:"".concat(C?"Hide":"Show"," output ").concat((0,d.ZP)(",")),className:"ml2",joinLeft:!0,onClick:()=>a({type:"selectionHide"})}),(0,s.jsx)(p.hA,{icon:n.size?k:g.Z,title:null===r||n.size?"Clear selection ".concat((0,d.ZP)("Escape")):"Toggle selection ".concat((0,d.ZP)("X")),className:"ml2".concat(n.size?" blue":""),onClick:()=>{null===r||n.size?a({type:"selectionBlur"}):a({type:"selectionToggle",id:r})}}),(0,s.jsx)(p.hA,{icon:f.Z,title:"Move cells up ".concat((0,d.ZP)("Alt-Up")),className:"ml2",disabled:!M,joinRight:!0,onClick:()=>a({type:"selectionMoveUp"})}),(0,s.jsx)(p.hA,{icon:x.Z,title:"Move cells down ".concat((0,d.ZP)("Alt-Down")),className:"ml2",disabled:!S,joinLeft:!0,onClick:()=>a({type:"selectionMoveDown"})}),(0,s.jsx)(p.hA,{icon:j.Z,title:"Duplicate cells ".concat((0,d.ZP)("Shift-Alt-Down")),className:"ml2",onClick:e=>a({type:"selectionDuplicate",before:e.shiftKey})}),(0,s.jsx)(p.hA,{icon:N.Z,title:"Delete cells ".concat((0,d.ZP)("D")),className:"ml2",destructive:0!==H,text:H?"Delete?":"",onClick:()=>{H?(a({type:"selectionDelete"}),window.clearTimeout(H),R(0)):R(window.setTimeout((()=>R(0)),2500))}}),(0,s.jsx)("div",{className:"flex flex-grow-1"}),(0,s.jsx)(p.hA,{icon:Z.Z,title:"Clear selection ".concat((0,d.ZP)("Escape")),className:"ml2",transparent:!0,onClick:()=>a({type:"selectionClear"})})]})})})})},S=n(51289),H=n(69150),R=n(72760);var E=n(3142),_=n(48373),D=n(33494),F=n(5315),I=n(4242),P=n(74080),T=n(88725),A=n(66421),U=n(94726),O=n(47311),z=n(1099),B=n(22513),q=n(84193),W=n(42568),G=n(56367),K=n(27193),Y=n(36448),$=n(8385),X=n(63231),J=n(3683);const Q=e=>{let{notebook:t,dispatch:n,comment:r,currentUser:a,first:i,repeated:l}=e;const o=(0,A.Ss)(r,a,t),c=a&&!(0,E.ws)(t),d=(0,A.O4)(r,a),{create_time:h,update_time:u,content:m,user:x}=r,f=(0,E.tO)(r)?"comment-local-".concat(r.nonce):"comment-".concat(r.id),g=o||d||c&&!(0,E.tO)(r);return(0,s.jsxs)("div",{id:f,"data-cy":"comment",className:"pv2 hide-child ".concat(i||l?"":"bt b--light-gray"),children:[(0,s.jsxs)("div",{className:"flex pb1 items-center justify-between lh-title",children:[(0,s.jsxs)("div",{className:"flex items-center min-w-0",children:[l?null:(0,s.jsx)(q.Z,{href:(0,Y.GN)(x),children:(0,s.jsxs)("a",{className:"inline-flex truncate no-underline dark-gray hover-blue items-center mr2",children:[(0,s.jsx)($.q,{user:x,size:24,className:"mr2 br-100"}),(0,s.jsx)("span",{className:"truncate fw5",children:(0,K.KY)(x)})]})}),(0,E.tO)(r)?null:(0,s.jsxs)("a",{className:"mid-gray no-underline nowrap",href:"#".concat(f),children:[(0,s.jsx)(J.q,{time:h}),u&&" (edited)"]})]}),(0,s.jsxs)(W.v2,{children:[(0,s.jsx)(p.hU,{title:"Comment actions",className:g?"":"o-0",colorless:!0,disabled:!g,icon:z.v,asMenuButton:!0}),(0,s.jsxs)(W.qy,{"data-testid":"comment-actions",children:[d&&(0,s.jsxs)(W.sN,{"data-cy":"update-comment",onSelect:()=>{(0,E.tO)(r)||n({type:"updateCommentStatus",nodeId:r.node_id,status:"updateInitiated",commentId:r.id})},children:[(0,s.jsx)(X.Z,{className:"w1 mr2"}),"Edit"]}),o&&(0,s.jsxs)(W.sN,{"data-cy":"delete-comment",className:"hover-dark-red hover-bg-washed-red",disabled:!(0,P.id)(r),onSelect:()=>{n({type:"showModal",modal:"deleteComment",modalProps:{comment:r}})},children:[(0,s.jsx)(N.Z,{className:"w1 mr2"}),"Delete"]}),c&&!(0,E.tO)(r)&&(0,s.jsxs)(W.sN,{"data-cy":"report-comment",onSelect:()=>{n({type:"showModal",modal:"reportAbuse",modalProps:{comment:r}})},children:[(0,s.jsx)(B.Z,{className:"w1 mr2"}),"Report spam or abuse"]})]})]})]}),(0,s.jsx)("div",{className:"overflow-x-hidden break-word pre-wrap",children:(0,s.jsx)(G.R,{content:m})})]})};var ee=n(94184),te=n.n(ee);const ne=e=>{let{children:t}=e;return(0,s.jsxs)("span",{className:"relative-ns v-mid disappear-child",style:{lineHeight:0},children:[(0,s.jsx)("span",{className:"dib ml2 f7 fw6 tc mid-gray hover-dark-gray bg-white ba b--silver br-pill hover-b--light-silver pointer",style:{width:"1.1rem",height:"1.1rem",lineHeight:"1.15rem"},children:"?"}),(0,s.jsx)("nav",{className:"db absolute tl lh-solid z-3 child",style:{right:"-11px",width:"16rem"},"aria-label":"submenu","aria-hidden":!open,children:(0,s.jsx)("div",{className:"f7 white bg-black br2 overflow-hidden",style:{marginTop:"7px"},children:(0,s.jsx)("div",{className:"ph2 pv1 lh-copy",children:t})})})]})},se=e=>{let{notebookAccessText:t,isUpdatingComment:n=!1}=e;const r="You are ".concat(n?"editing comments":"commenting"," on a ").concat(t.toLowerCase()," notebook.");return(0,s.jsxs)("div",{className:"inline-flex items-center",children:[(0,s.jsx)("div",{className:"db-ns dn mr2 f7 mid-gray",children:r}),(0,s.jsxs)(ne,{children:[(0,s.jsxs)("span",{className:"dn-ns di",children:[r," "]}),"Your comment will be visible to anyone who can read this notebook."]})]})},re=e=>{let{nodeId:t,notebook:n,currentUser:r,dispatch:a,comment:i,isUpdatingComment:l,first:o}=e;const{0:c,1:d}=(0,h.useState)((null===i||void 0===i?void 0:i.content)||""),u=(0,h.useRef)(null),m=(0,h.useCallback)((e=>{const{current:t}=u;t.style.height="auto",t.style.height="".concat(t.scrollHeight,"px"),d(e.target.value)}),[u]);(0,h.useEffect)((()=>{const{current:e}=u;if(c&&e){const t=c.length;e.setSelectionRange(t,t)}}),[]);const x=(0,h.useCallback)((e=>{a(i?{type:"updateCommentStatus",status:"unresolved",nodeId:i.node_id,commentId:i.id}:{type:"commentComposeCancel",nodeId:t,trigger:e,content:c.trim(),source:"commentCompose"})}),[t,a,c,i]),f=(0,h.useCallback)(((e,s)=>{e.preventDefault();const i=c.trim();i&&(a({type:"commentCreated",nodeId:t,content:i,trigger:s,currentUser:r,source:"commentCompose"}),"default"===n.subscriptionState&&a({type:"updateSubscription",status:"comments"}),d(""))}),[t,c,r,d,a,n.subscriptionState]),g=(0,h.useCallback)(((e,n)=>{e.preventDefault();const s=c.trim();s&&i&&a({type:"updateComment",nodeId:t,content:s,trigger:n,source:"commentCompose",commentId:i.id})}),[t,c,a,i]),v=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)?l?g(e,"keypress"):f(e,"keypress"):"Escape"!==e.key||c.trim()&&!l||x("keypress")}),[x,f,g,l,c]),b=(0,E.OA)(r)?"true":"false";return(0,s.jsxs)("form",{onSubmit:e=>l?g(e,"click"):f(e,"click"),className:te()("flex relative flex-column items-stretch mt",{bt:!o}),style:{borderColor:"#e6e2d4"},children:[(0,s.jsx)("textarea",{className:"w-100 ph0 pv3 sans-serif f6 dark-gray br3 lh-f6 bg-transparent bn",style:{resize:"none"},onKeyDown:v,autoFocus:!0,rows:1,ref:u,value:c,name:"comment_description",placeholder:"",maxLength:65536,onChange:m,spellCheck:b}),(0,s.jsxs)("div",{className:"flex pv2 justify-between",children:[(0,s.jsx)(se,{notebookAccessText:(0,E.wF)(n),isUpdatingComment:!!l}),(0,s.jsxs)(p.CQ,{children:[(0,s.jsx)(p.kq,{text:"Cancel",onClick:()=>x("click")}),(0,s.jsx)(p.KM,{type:"submit",text:l?"Save":"Comment",disabled:!c.trim()||l&&c===(null===i||void 0===i?void 0:i.content)})]})]})]})};var ae=n(40287);var ie=e=>(0,s.jsx)("svg",(0,C.Z)((0,w.Z)({width:"8",height:"16",viewBox:"0 0 8 16",fill:"none"},e),{children:(0,s.jsx)("path",{d:"M1 9.5L4 7L7 9.5",stroke:"currentColor",strokeWidth:"1.8"})}));const le=e=>{let{numResolved:t,numUnresolved:n,expanded:r,onToggle:a}=e;return(0,s.jsx)("div",{className:"flex nl2 nr2 ".concat(n?"bb":""," b--light-gray"),children:(0,s.jsxs)("button",{type:"button",onClick:a,className:"inline-flex w-100 pa2 f6 mid-gray bg-transparent i pointer bn",children:[r?(0,s.jsx)(ie,{className:"mr2"}):(0,s.jsx)(ae.Z,{className:"mr2"}),t>1?"".concat(t," resolved comments"):"1 resolved comment"]})})};function oe(e,t,n,r){return e.map(((a,i)=>"updateInitiated"===a.status?(0,s.jsx)(re,{nodeId:a.node_id,notebook:n,currentUser:t,comment:a,isUpdatingComment:!0,dispatch:r,first:0===i},"remote-".concat(a.id)):(0,s.jsx)(Q,{currentUser:t,notebook:n,dispatch:r,comment:a,first:0===i,repeated:i>0&&e[i].user.id===e[i-1].user.id},(0,E.tO)(a)?"local-".concat(a.nonce):"remote-".concat(a.id))))}var ce=(0,I.$j)(((e,t)=>{let{notebook:n,currentUser:s}=e;return{resolvedComments:(0,T.o7)(n,t.nodeId),unresolvedComments:(0,T.HS)(n,t.nodeId),notebook:n,currentUser:s}}),(e=>({dispatch:e})))((e=>{let{nodeId:t,notebook:n,currentUser:r,resolvedComments:a,unresolvedComments:i,dispatch:l}=e;if(!n.openComments.has(t)||!(0,P.H7)(n))return null;const o=(0,A.f$)(n)&&i.length>0,c=n.composingComments.has(t),d=n.expandedResolvedComments.has(t);return(0,s.jsx)("div",{className:"relative pea sans-serif f6 lh-f6 dark-gray",style:{paddingTop:"0.75rem"},children:(0,s.jsxs)("div",{className:"bg-washed-yellow",style:{maxWidth:640+2*H.Mv,marginLeft:-H.Mv,marginRight:-H.Mv,paddingLeft:H.Mv,paddingRight:H.Mv},children:[d&&oe(a,r,n,l),a.length>0&&(0,s.jsx)(le,{numResolved:a.length,numUnresolved:i.length,expanded:d,onToggle:function(){l({type:"toggleResolvedComments",nodeId:t,trigger:"click",source:"commentBox"})}}),oe(i,r,n,l),c?(0,s.jsx)(re,{nodeId:t,notebook:n,dispatch:l,currentUser:r,first:i.length+a.length===0}):(0,s.jsxs)("div",{className:"flex justify-".concat(o?"between":"end"," bg-washed-yellow pb2"),children:[o&&(0,s.jsx)(p.sn,{onClick:function(){l({type:"resolveComments",nodeId:t,trigger:"click",source:"commentBox"})},disabled:!i.every((e=>(0,P.Lj)(e))),text:"Resolve",className:"mr2"}),(0,E.fC)(n)&&!(0,A.RF)(n)?(0,s.jsx)("div",{className:"inline-flex ph2 nr2 pt1 pb3 f6 dark-gray items-center",children:(0,s.jsx)(U.h,{commentingLock:n.commentingLock})}):(0,s.jsx)(p.sn,{icon:O.ZP,text:"Comment",onClick:function(){(0,A.RF)(n)?l({type:"commentComposeOpen",nodeId:t,trigger:"click",source:"commentBox"}):r||l({type:"showModal",modal:"login",modalProps:{loginReason:"comment"},trigger:"click",source:"comment"})}})]})]})})}));var de=e=>{let{id:t,dispatch:n}=e;return(0,s.jsx)("button",{title:"Jump to error",onClick:()=>n({type:"focusError",id:t}),className:"absolute pv1 ph2 bg-near-white red f7 fw5 bn br3 pointer pea",style:{top:-28,right:-14},children:"Jump to error"})},he=n(11331),ue=n(65988),me=n.n(ue);var pe=e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,s.jsx)("rect",{x:"5",y:"7",width:"6",height:"2",rx:"1",fill:"currentColor"}),(0,s.jsx)("rect",{x:"3",y:"3",width:"10",height:"10",rx:"1",stroke:"currentColor",strokeWidth:"2"})]})),xe=n(34091),fe=n(26959),ge=n(56912),ve=n(928);const be=(0,I.$j)((e=>{let{notebook:t}=e;return{notebook:t}}),(e=>({dispatch:e})))((e=>{let{id:t,notebook:n,dispatch:r}=e;const a=(0,R.Qc)((0,o.DY)(n.model,t)).body.source.value,i=(0,ge.uF)(n),l=(0,ge.uF)(n,{ignoreResolutions:!0}),c=(0,h.useMemo)((()=>{if(!i||!l)return;const{directImports:e}=(0,ge.$r)(i);return(0,ge.ng)(l.specifiers,e,n.model.resolutions).get(a)}),[a,i,l,n.model.resolutions]);if(!c)return null;const d=(0,ge.xT)(null===i||void 0===i?void 0:i.specifiers[a]);return ve.Z.parse(a)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{title:"".concat(c.updatesAvailable?"Updates available. ":"").concat("locked"===c.lockStatus?"This import and all of its dependencies are locked.":"unlocked"===c.lockStatus?"This import and all of its dependencies are unlocked, so the latest version will always be imported.":"Not all of this import's dependencies are locked."," Click to open the Dependencies pane and manage versions."),onClick:()=>{r({type:"showNotebookDependencyDetails",updatesAvailable:c.updatesAvailable,status:c.lockStatus,specifier:a})},className:me().dynamic([["216e23a914626b64",[d?"color: var(--white)":"",c.updatesAvailable?"background-color: var(--observable-focus-light-blue)":"",d?"background-color: var(--red)":"",d?"color: var(--white)":"",d?"background-color: var(--red);":""]]])+" "+"".concat(c.updatesAvailable?"has-updates ":"","lock-status absolute hover-mid-gray pv1 ph2 bg-near-white f7 fw5 bn gray br4 pointer flex items-center align-center pea"),children:"locked"===c.lockStatus?(0,s.jsx)(xe.Z,{}):"unlocked"===c.lockStatus?(0,s.jsx)(fe.Z,{}):(0,s.jsx)(pe,{})}),(0,s.jsx)(me(),{id:"216e23a914626b64",dynamic:[d?"color: var(--white)":"",c.updatesAvailable?"background-color: var(--observable-focus-light-blue)":"",d?"background-color: var(--red)":"",d?"color: var(--white)":"",d?"background-color: var(--red);":""],children:".lock-status.__jsx-style-dynamic-selector{padding-left:10px;padding-right:10px;top:-28px;right:-14px;color:var(--observable-focus-dark-blue);".concat(d?"color: var(--white)":"",";").concat(c.updatesAvailable?"background-color: var(--observable-focus-light-blue)":"",";").concat(d?"background-color: var(--red)":"",";}.lock-status.__jsx-style-dynamic-selector:hover{color:var(--mid-gray);").concat(d?"color: var(--white)":"",';}.has-updates.__jsx-style-dynamic-selector::after{content:"";position:absolute;top:0;right:0;width:7px;height:7px;background-color:var(--observable-focus-dark-blue);').concat(d?"background-color: var(--red);":"",";-webkit-border-radius:3.5px;-moz-border-radius:3.5px;border-radius:3.5px}")})]}):null})),je=e=>{let{node:t,editorState:n,focused:r,selected:a,selectionFocused:i,editorOpen:l,workerHeight:o,editors:c,hovered:d,hasPrevious:u,hasNext:m,editorComponent:p}=e;var x;const f=(0,I.I0)(),g=(0,h.useRef)(null),v=(0,h.useRef)(null),b=(0,h.useRef)(null),j=(0,h.useRef)(null),{id:V,mode:y}=t,w=(0,R.u2)(t),C=(0,I.v9)((e=>{let{notebook:t}=e;var n,s;return null===(n=t.workerStatus.get(V))||void 0===n||null===(s=n.display)||void 0===s?void 0:s.mode})),{jumpToError:k}=n.field(_.ei).find((e=>{let{jumpToError:t}=e;return t}))||{};return(0,h.useEffect)((()=>{const e=(0,F.jn)(v.current,V,"editor",f),t=(0,F.jn)(b.current,V,"comments",f),n=(0,F.jn)(j.current,V,"display",f);return()=>{e.disconnect(),t.disconnect(),n.disconnect()}}),[V,f]),(0,h.useEffect)((()=>{i&&(0,D.zT)(g.current)}),[i]),(0,s.jsxs)("div",{ref:g,className:"relative node pen ".concat(d||r?"node-hover":""),"data-node-id":V,id:w||void 0,style:{marginTop:H.KI,marginBottom:H.KI,paddingTop:o},onMouseEnter:()=>f({type:"hover",id:V}),children:[a||i?(0,s.jsx)("div",{className:"absolute br2 z-1",style:{top:1,left:-13,right:-13,bottom:1,boxShadow:a&&i?"0px 0px 0px 2px var(--lightest-blue), 0px 0px 0px 4px var(--faint-blue)":a?"0px 0px 0px 2px var(--washed-blue)":"0px 0px 0px 2px var(--lightest-blue)"}}):null,(0,s.jsx)("div",{ref:j,children:("sql"===y||"table"===y)&&"table"===C&&(0,s.jsx)(he.V,{node:t})}),(0,s.jsxs)("div",{ref:v,className:"relative",children:[k?(0,s.jsx)(de,{dispatch:f,id:V}):"ImportDeclaration"===(null===(x=(0,R.Qc)(t).body)||void 0===x?void 0:x.type)?(0,s.jsx)(be,{id:V}):null,l&&(0,s.jsx)(p,{node:t,editorState:n,focused:r,hovered:d,selected:a||i,editors:c,hasPrevious:u,hasNext:m})]}),(0,s.jsx)("div",{ref:b,children:(0,s.jsx)(ce,{nodeId:V})})]})};var Ve=()=>(0,s.jsx)("div",{className:"absolute w-100 bt b--blue",style:{marginTop:Math.floor(-H.KI/2)}}),ye=n(31536),we=n(99534),Ce=n(95357);var ke=(0,I.$j)((e=>{let{notebook:t}=e;return{isCommentable:(0,P.H7)(t)}}),(e=>({dispatch:e})))((e=>{var{dispatch:t,canComment:n,commentCount:r,isCommentsOpen:a,node:i,isCommentable:l,className:o=""}=e,c=(0,we.Z)(e,["dispatch","canComment","commentCount","isCommentsOpen","node","isCommentable","className"]);if(!l)return null;const d=a?"Hide comments":r>0?"Show ".concat((0,E.YY)(r,"comment")):"Add comment";return(0,s.jsxs)("button",(0,C.Z)((0,w.Z)({onClick:e=>{e.stopPropagation(),t(r>0||n?{type:r>0?a?"hideComments":"showComments":"commentComposeOpen",nodeId:i.id,trigger:"click",source:"nodeGutterMenu"}:{type:"showModal",modal:"login",modalProps:{loginReason:"comment"},trigger:"click",source:"comment"})},title:d,"aria-label":d,className:"flex items-center sans-serif f6 pointer pa0 hover-mid-gray moon-gray bg-transparent bn no-wrap ".concat(o)},c),{children:[r>0?(0,s.jsx)("span",{className:"pr1",children:r>=9?"9+":r}):(0,s.jsx)(O.GL,{}),(0,s.jsx)(Ce.Z,{})]}))})),Ne=n(60803),Ze=n(952),Le=n(12447),Me=n(49516);const Se=e=>{let{dispatch:t,mode:n,id:r,disabled:a}=e;return(0,s.jsx)(s.Fragment,{children:Object.entries(ye.qz).filter((e=>{let[,{convertible:t}]=e;return t})).map((e=>{let[i,{label:l,icon:o}]=e;const c=n===i;return(0,s.jsxs)(W.sN,{disabled:a,"aria-label":"editor-menu-".concat(l),className:c?"blue":"dark-gray hover-black",onSelect:()=>{t({type:"setMode",id:r,source:"gutterMenu",trigger:"click",mode:i})},children:[(0,s.jsx)("span",{className:"w1 h1 mr1",children:(0,s.jsx)(o,{})}),l,c&&(0,s.jsx)(Me.Z,{className:"ml1"})]},i)}))})};var He=(0,I.$j)((()=>({})),(e=>({dispatch:e})))((e=>{var{dispatch:t,node:n,mode:r,focused:a,selected:i,hovered:l,className:o="",readOnly:c,children:d}=e,h=(0,we.Z)(e,["dispatch","node","mode","focused","selected","hovered","className","readOnly","children"]);const{id:u}=n,{convertible:m}=ye.qz[r],{className:p,styles:x}={styles:(0,s.jsx)(me(),{id:"b5651deb920f0506",dynamic:[Le.pp],children:"@media ".concat(Le.pp,"{*.__jsx-style-dynamic-selector{-webkit-border-bottom-left-radius:var(--border-radius-2);-moz-border-radius-bottomleft:var(--border-radius-2);border-bottom-left-radius:var(--border-radius-2)}}")}),className:me().dynamic([["b5651deb920f0506",[Le.pp]]])};return(0,s.jsx)(W.v2,{children:e=>{let{isExpanded:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(W.j2,(0,C.Z)((0,w.Z)({title:"".concat(ye.qz[r].label).concat(m?"\nClick to set language":""),className:te()(a||i&&l?"observable-focus-dark-blue":i?"washed-blue":n?"dark-gray":l?"gray":"moon-gray",m?a||i?"pointer hover-blue":l?"pointer hover-mid-gray":"pointer":"",a||i&&l?"bg-observable-focus-light-blue":l?"bg-light-silver":"bg-transparent",p,o,"bn pa0"),disabled:!m},h),{children:[d,x]})),(0,s.jsx)(W.qy,{position:W.Ly.right,children:(0,s.jsx)(Se,{dispatch:t,id:u,mode:r,disabled:c})})]})}})})),Re=n(48634),Ee=n(35053),_e=n(87099),De=n(64804),Fe=n(61777),Ie=n(26825),Pe=n(92946),Te=n(3961);class Ae extends Te.i{async process(e){const t=await e({type:"request_download_type",node_id:this._id});return{type:Ue(t.type),typeAsView:Ue(t.typeAsView)}}constructor(e){super(),this._id=e}}function Ue(e){return e?"blob"===e.type?{type:"blob",mime:"".concat(e.mime)}:{type:"".concat(e.type)}:void 0}class Oe extends Te.i{async process(e){return await e({type:"request_download",node_id:this._id,as_view:this._asView,download_type:this._type,format:this._format})}constructor(e,t,n,s){super(),this._id=e,this._asView=t,this._type=n,this._format=s}}const ze=e=>{var{commentCount:t,dispatch:n,editorOpen:r,editable:a,focused:i,readOnly:o,selected:c,hovered:d,isCommentingLocked:u,isCommentsOpen:m,isComposeOpen:p,node:x,deletable:f,commentable:v,canComment:b,safe:y,notebookSpecifier:k,className:N="",children:L}=e,M=(0,we.Z)(e,["commentCount","dispatch","editorOpen","editable","focused","readOnly","selected","hovered","isCommentingLocked","isCommentsOpen","isComposeOpen","node","deletable","commentable","canComment","safe","notebookSpecifier","className","children"]);const{id:S,pinned:H,mode:_}=x,D=(0,R.u2)(x),F=(0,I.v9)((e=>{let{notebook:t}=e;return t.saveVersion})),P=S>F,T=(0,h.useRef)(null),A=(0,h.useRef)(!1),[U]=(0,Ee._)(S,T,A,a,o,n,"node","notebook"),O=(0,I.v9)((e=>{let{notebook:t}=e;var n,s;return null===(n=t.workerStatus.get(S))||void 0===n||null===(s=n.display)||void 0===s?void 0:s.mode}));async function z(e,t,s){let r;try{r=await new Oe(S,e,t,s).run(n)}catch(a){return void n({type:"showErrorToast",message:"Unable to download.",key:"download"})}(0,_e.L)(r,"".concat(D||"untitled").concat(s?".".concat(s):""))}function B(){n({type:i?"blur":"focus",id:S})}let q,G="";function K(){n(q)}t?m?(G="Hide ".concat((0,E.xC)(t,"comment")),q={type:"hideComments",nodeId:S,trigger:"click",source:"nodeGutterMenu"}):(G="Show ".concat((0,E.YY)(t,"comment")),q={type:"showComments",nodeId:S,trigger:"click",source:"nodeGutterMenu"}):p?(G="Cancel comment",q={type:"commentComposeCancel",nodeId:S,content:"",trigger:"click",source:"nodeGutterMenu"}):b?(G="Add comment",q={type:"commentComposeOpen",nodeId:S,trigger:"click",source:"nodeGutterMenu"}):(G="Add comment",q={type:"showModal",modal:"login",modalProps:{loginReason:"comment"},trigger:"click",source:"comment"});const Y=!y&&!(0,R.cS)(x)&&"none"!==O,$=a?"Click for cell actions\nDrag to move cell":"Click to comment",{className:J,styles:Q}={styles:(0,s.jsx)(me(),{id:"d11f5349d80c66de",dynamic:[Le.pp,r&&Y?0:"var(--border-radius-2)"],children:"*.__jsx-style-dynamic-selector{will-change:transform;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}@media ".concat(Le.pp,"{*.__jsx-style-dynamic-selector{-webkit-border-top-left-radius:var(--border-radius-2);-moz-border-radius-topleft:var(--border-radius-2);border-top-left-radius:var(--border-radius-2);-webkit-border-bottom-left-radius:").concat(r&&Y?0:"var(--border-radius-2)",";-moz-border-radius-bottomleft:").concat(r&&Y?0:"var(--border-radius-2)",";border-bottom-left-radius:").concat(r&&Y?0:"var(--border-radius-2)","}}")}),className:me().dynamic([["d11f5349d80c66de",[Le.pp,r&&Y?0:"var(--border-radius-2)"]]])},ee=a&&!!D,ne=a&&!r&&!H,se=a&&!H&&Y,re=a&&Y&&!o,ae=a&&!o,ie=a,le=a,oe=a,ce=!o,de=a&&f&&!o,he=v&&(t>0||b||!u)&&!o,ue=a&&(0,R.q8)(x),pe=!Y&&ye.qz[x.mode].convertible&&!o;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(W.v2,{children:e=>{let{isExpanded:t}=e;return A.current=t,(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(W.j2,(0,C.Z)((0,w.Z)({ref:T,title:$,"aria-label":$,className:te()(i||c&&d?"observable-focus-dark-blue":c?"washed-blue":t?"dark-gray":d?"gray":"moon-gray",i||c?"hover-blue":d?"hover-mid-gray":"",i||c&&d?"bg-observable-focus-light-blue":d?"bg-light-silver":"bg-transparent",!(i||d||!Y||t)&&"dn",J,N,"bn pa0")},M),{children:[L,Q]})),(0,s.jsxs)(W.qy,{position:W.Ly.right,children:[ee?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(W.Uk,{href:"#".concat(D),children:(0,s.jsx)("div",{className:"mw5 code f7 fw5 hover-blue",children:D})}),(0,s.jsx)(W.R,{})]}):null,ne?(0,s.jsxs)(W.sN,{onSelect:B,children:[(0,s.jsx)(X.Z,{className:"w1 h1 mr1"}),"Edit"]}):se?(0,s.jsxs)(W.sN,{onSelect:B,children:[(0,s.jsx)(Z.Z,{className:"w1 h1 mr1"}),"Close"]}):null,re&&(0,s.jsxs)(W.sN,{onSelect:()=>n({type:"togglePin",id:S}),children:[(0,s.jsx)(V.Z,{className:"w1 h1 mr1","aria-label":H?"Unpin":"Pin"}),H?"Unpin":"Pin"]}),he&&(0,s.jsxs)(W.sN,{onSelect:K,"aria-label":G,disabled:P,title:P?"Fork this notebook to comment on this cell":void 0,children:[(0,s.jsx)(Ce.Z,{className:"w1 h1 mr1"}),G]}),ue&&(0,s.jsxs)(W.sN,{title:"Copy the code to import this cell",onSelect:async()=>{await navigator.clipboard.writeText(function(e,t){const{body:n}=(0,R.Qc)(e);if("ImportDeclaration"===(null===n||void 0===n?void 0:n.type)){const{specifiers:e,injections:t,source:s}=n;if(!t)return"import {".concat(e.map((e=>{let{imported:{name:t},local:{name:n},view:s,mutable:r}=e;return"".concat(s?"viewof ".concat(t):r?"mutable ".concat(t):t).concat(t===n?"":" as ".concat(n))})).join(", "),'} from "').concat(s.value,'"')}const s=(0,R.Ad)(e);return"import {".concat(s.join(", "),'} from "').concat(t,'"')}(x,k)),n({type:"showSuccessToast",message:"Copied import code to clipboard"})},children:[(0,s.jsx)(Fe.Z,{className:"w1 h1 mr1"}),"Copy import"]}),ce&&(0,s.jsxs)(W.sN,{onSelect:()=>n({type:"selectionToggle",id:S}),children:[(0,s.jsx)(g.Z,{className:"w1 h1 mr1"}),c?"Deselect":"Select"]}),ae&&(0,s.jsxs)(W.sN,{onSelect:()=>n({type:"duplicate",id:S,before:!1}),children:[(0,s.jsx)(j.Z,{className:"w1 h1 mr1"}),"Duplicate"]}),oe&&(0,s.jsxs)(W.sN,{title:"Copy a link to this cell",onSelect:async()=>{const e=new URL("#".concat(D||"cell-".concat(S)),window.location.href);await navigator.clipboard.writeText(e.href),n({type:"showSuccessToast",message:"Copied link to clipboard"})},children:[(0,s.jsx)(Pe.ZP,{className:"w1 h1 mr1"}),"Copy link"]}),ie&&(0,s.jsxs)(W.sN,{disabled:!D,title:D?"Embed this cell in a web page":"Name this cell to embed",onSelect:()=>n({type:"showModal",modal:"embed",modalProps:{selectedNode:x},source:"nodeGutterMenu"}),children:[(0,s.jsx)(De.Z,{className:"w1 h1 mr1"}),"Embed"]}),le&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(We,{onDownload:z,id:S,dispatch:n}),(0,s.jsx)(We,{asView:!0,onDownload:z,id:S,dispatch:n})]}),de&&(0,s.jsx)(Be,{dispatch:n,id:S}),pe?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(W.R,{}),(0,s.jsx)(Se,{dispatch:n,id:S,mode:_,disabled:o})]}):null]})]})}}),U&&(0,s.jsx)(l.h,{children:(0,s.jsx)("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,cursor:"grabbing",zIndex:1}})})]})},Be=e=>{let{dispatch:t,id:n}=e;const{0:r,1:a}=(0,h.useState)(!1),{isExpanded:i}=(0,Re.uF)();return(0,h.useEffect)((()=>{i||a(!1)}),[i]),r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(W.ti,{children:"Are you sure?"}),(0,s.jsxs)(W.sN,{onSelect:()=>t({type:"remove",id:n}),className:"hover-dark-red hover-bg-washed-red",children:[(0,s.jsx)(N.Z,{"aria-label":"Delete confirmation",className:"w1 h1 mr1"}),"Delete"]})]}):(0,s.jsxs)(W.sN,{onMouseUp:function(e){e.preventDefault(),a(!0)},onSelect:()=>t({type:"remove",id:n}),className:"hover-dark-red hover-bg-washed-red",children:[(0,s.jsx)(N.Z,{"aria-label":"Delete",className:"w1 h1 mr1"}),"Delete"]})},qe=new Set(["csv","map","set","typedarray","array","object"]),We=e=>{let{asView:t=!1,id:n,dispatch:r,onDownload:a}=e;const{0:i,1:l}=(0,h.useState)(),{isExpanded:o}=(0,Re.uF)();if((0,h.useEffect)((()=>{o?new Ae(n).run(r).then(l,(()=>{})):l(void 0)}),[r,n,o]),void 0===i)return null;const c=t?i.typeAsView:i.type;return void 0===c?null:(0,s.jsxs)(s.Fragment,{children:["svg"===c.type&&(0,s.jsxs)(W.sN,{onSelect:()=>a(t,c.type,"svg"),children:[(0,s.jsx)(Ie.Z,{className:"w1 h1 mr1"}),"Download SVG"]}),("svg"===c.type||"canvas"===c.type)&&(0,s.jsxs)(W.sN,{onSelect:()=>a(t,c.type,"png"),children:[(0,s.jsx)(Ie.Z,{className:"w1 h1 mr1"}),"Download PNG"]}),"css"===c.type&&(0,s.jsxs)(W.sN,{onSelect:()=>a(t,c.type,"css"),children:[(0,s.jsx)(Ie.Z,{className:"w1 h1 mr1"}),"Download CSS"]}),"blob"===c.type&&(0,s.jsxs)(W.sN,{onSelect:()=>a(t,c.type,function(e){switch(e){case"image/png":return"png";case"image/jpeg":return"jpg";case"image/gif":return"gif";case"image/bmp":return"bmp";case"application/json":return"json";case"application/x-sqlite3":return"db";case"application/zip":return"zip";case"text/css":return"css";case"text/csv":return"csv";case"text/plain":return"txt";case"text/html":return"html";case"text/javascript":return"js";case"audio/mpeg":return"mp3";case"video/mp4":return"mp4";case"text/tab-separated-values":return"tsv"}return""}(c.mime)),children:[(0,s.jsx)(Ie.Z,{className:"w1 h1 mr1"}),"Download file"]}),"csv"===c.type&&(0,s.jsxs)(W.sN,{onSelect:()=>a(t,c.type,"csv"),children:[(0,s.jsx)(Ie.Z,{className:"w1 h1 mr1"}),"Download CSV"]}),"string"===c.type&&(0,s.jsxs)(W.sN,{onSelect:()=>a(t,c.type,"txt"),children:[(0,s.jsx)(Ie.Z,{className:"w1 h1 mr1"}),"Download text"]}),qe.has(c.type)&&(0,s.jsxs)(W.sN,{onSelect:()=>a(t,c.type,"json"),children:[(0,s.jsx)(Ie.Z,{className:"w1 h1 mr1"}),"Download JSON"]})]})};const Ge=h.memo((function(e){let{dispatch:t,editorOpen:n,focused:r,selecting:a,selected:i,selectionFocused:l,height:o,hovered:c,isCommentingLocked:h,isCommentsOpen:u,isComposeOpen:m,commentable:p,canComment:x,deletable:f,editable:g=!0,node:v,notebookComments:b,notebookSpecifier:j,saveVersion:V,readOnly:y,safe:w,mode:C,outputHeight:k}=e;const{id:N,pinned:Z}=v,L=(0,I.v9)((e=>{let{notebook:t}=e;var n,s;return null===(n=t.workerStatus.get(N))||void 0===n||null===(s=n.display)||void 0===s?void 0:s.mode})),M=!w&&!(0,R.cS)(v)&&"none"!==L,E=ye.qz[C].icon,_=H.re,D=M?Math.min(Math.max(k,H.NQ),H.T6):H.T6,F=(b.get(v.id)||[]).filter((e=>e.node_id===v.id&&e.node_id<=V));return(0,s.jsxs)("div",{id:"cell-".concat(N),style:{height:o},className:me().dynamic([["b214c87a357486b8",[H.Mv]]])+" absolute gutter",children:[(c||F.length>0)&&(0,s.jsx)(ke,{canComment:x,commentCount:F.length,isCommentsOpen:u,node:v,className:"absolute top-0 z-1",style:{right:2*(_+4),height:D}}),(0,s.jsx)("button",{"aria-label":"gutter",onMouseEnter:()=>t({type:"hover",id:N}),onClick:e=>{a||e[S.Ao]?(t({type:"blur"}),t({type:"selectionToggle",id:N})):t({type:r?"blur":"focus",id:N})},title:a?i?"Unselect cell":"Select cell":Z?r?"Blur cell ".concat((0,d.ZP)("Escape")):"Focus cell":r?"Close cell ".concat((0,d.ZP)("Escape")):"Edit cell",className:me().dynamic([["b214c87a357486b8",[H.Mv]]])+" db bn bg-transparent absolute top-0 bottom-0 right-0 w-100 pointer moon-gray hover-mid-gray",children:g&&(r||c||a)&&(0,s.jsx)("div",{style:{right:_+4,width:_,height:D},className:me().dynamic([["b214c87a357486b8",[H.Mv]]])+" absolute top-0 flex items-center justify-center",children:a?(0,s.jsx)("input",{type:"checkbox",checked:i,className:me().dynamic([["b214c87a357486b8",[H.Mv]]])+" pointer"}):M?(0,s.jsx)(Ne.Z,{style:{transform:n?"":"rotate(-90deg)",transition:"transform 150ms ease"}}):null})}),(0,s.jsx)(ze,{dispatch:t,node:v,focused:r,selected:i||l,editorOpen:n,editable:g,hovered:c,notebookSpecifier:j,readOnly:y,safe:w,commentCount:F.length,isCommentingLocked:h,isCommentsOpen:u,isComposeOpen:m,commentable:p,canComment:x,deletable:f,className:"absolute top-0",style:{right:1,width:_,height:M?Math.max(k,D):o},children:(0,s.jsx)("div",{style:{width:_,height:D},className:me().dynamic([["b214c87a357486b8",[H.Mv]]])+" absolute top-0 flex items-center justify-center",children:M?(0,s.jsx)(Ze.Z,{}):n?(0,s.jsx)(E,{className:me().dynamic([["b214c87a357486b8",[H.Mv]]])}):null})}),M&&n&&(0,s.jsx)("div",{style:{top:k,height:"calc(100% - ".concat(k,"px)")},className:me().dynamic([["b214c87a357486b8",[H.Mv]]])+" absolute right-0",children:(0,s.jsx)(He,{node:v,mode:C,focused:r,hovered:c,selected:i||l,className:"absolute bottom-0",readOnly:y,style:{top:-1,right:1,width:_,borderTop:"solid 1px white"},children:(0,s.jsx)("div",{style:{width:_,height:H.T6},className:me().dynamic([["b214c87a357486b8",[H.Mv]]])+" absolute top-0 flex items-center justify-center",children:(0,s.jsx)(E,{className:me().dynamic([["b214c87a357486b8",[H.Mv]]])})})})}),(0,s.jsx)(me(),{id:"b214c87a357486b8",dynamic:[H.Mv],children:".gutter.__jsx-style-dynamic-selector{width:-webkit-calc((100vw - 100%) / 2 - ".concat(H.Mv,"px + 1px);width:-moz-calc((100vw - 100%) / 2 - ").concat(H.Mv,"px + 1px);width:calc((100vw - 100%) / 2 - ").concat(H.Mv,"px + 1px);margin-left:-webkit-calc((100% - 100vw)/2);margin-left:-moz-calc((100% - 100vw)/2);margin-left:calc((100% - 100vw)/2)}")})]})})),Ke=(0,I.$j)(((e,t)=>{let{notebook:n}=e,{node:s,isNodeCommentable:r}=t;return{isCommentingLocked:(0,E.fC)(n),isCommentsOpen:n.openComments.has(s.id),isComposeOpen:n.composingComments.has(s.id),commentable:r(s.id),canComment:(0,A.RF)(n),notebookComments:n.comments,notebookSpecifier:(0,E.J6)(n),saveVersion:n.saveVersion,deletable:n.model.nodes.length>1}}),(e=>({dispatch:e})))(Ge);var Ye=n(34790),$e=n(78120),Xe=n(3357),Je=n(7131),Qe=n(82893),et=n(2741),tt=n(61107),nt=n(40873),st=n(15612),rt=n(54137),at=n(60138);const it=e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"60",height:"40",viewBox:"0 0 60 40",fill:"none"},e),{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35.5135 25.7022C34.8749 26.3654 33.9627 26.75 32.875 26.75H31.6875V24.5H32.875C33.4123 24.5 33.7188 24.3221 33.8928 24.1415C34.08 23.9471 34.1875 23.6722 34.1875 23.375V22.8125C34.1875 22.506 34.1964 22.0144 34.6575 21.125C35.0625 20.4475 35.9062 20 35.9062 20C35.9062 20 35.029 19.6553 34.6575 18.9389C34.1964 18.0495 34.1875 17.494 34.1875 17.1875V16.625C34.1875 16.3278 34.08 16.0529 33.8928 15.8585C33.7188 15.6779 33.4123 15.5 32.875 15.5H31.6875V13.25H32.875C33.9627 13.25 34.8749 13.6346 35.5135 14.2978C36.1388 14.9471 36.4375 15.7972 36.4375 16.625V17.1875C36.4375 17.4435 36.4599 17.9106 36.655 18.2868C36.7424 18.4555 36.8552 18.5867 37.0091 18.6813C37.162 18.7753 37.4235 18.875 37.875 18.875V21.125C37.4235 21.125 37.162 21.2247 37.0091 21.3187C36.8552 21.4133 36.7424 21.5445 36.655 21.7132C36.4599 22.0894 36.4375 22.5565 36.4375 22.8125V23.375C36.4375 24.2028 36.1388 25.0529 35.5135 25.7022Z",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.4865 25.7022C25.1251 26.3654 26.0373 26.75 27.125 26.75H28.3125V24.5H27.125C26.5877 24.5 26.2812 24.3221 26.1072 24.1415C25.92 23.9471 25.8125 23.6722 25.8125 23.375V22.8125C25.8125 22.506 25.8036 22.0144 25.3425 21.125C24.9375 20.4475 24.0938 20 24.0938 20C24.0938 20 24.971 19.6553 25.3425 18.9389C25.8036 18.0495 25.8125 17.494 25.8125 17.1875V16.625C25.8125 16.3278 25.92 16.0529 26.1072 15.8585C26.2812 15.6779 26.5877 15.5 27.125 15.5H28.3125V13.25H27.125C26.0373 13.25 25.1251 13.6346 24.4865 14.2978C23.8612 14.9471 23.5625 15.7972 23.5625 16.625V17.1875C23.5625 17.4435 23.5401 17.9106 23.345 18.2868C23.2576 18.4555 23.1448 18.5867 22.9909 18.6813C22.838 18.7753 22.5765 18.875 22.125 18.875V21.125C22.5765 21.125 22.838 21.2247 22.9909 21.3187C23.1448 21.4133 23.2576 21.5445 23.345 21.7132C23.5401 22.0894 23.5625 22.5565 23.5625 22.8125V23.375C23.5625 24.2028 23.8612 25.0529 24.4865 25.7022Z",fill:"currentColor"})]}));var lt=n(45532);const ot=e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,s.jsxs)("g",{fill:"currentColor",children:[(0,s.jsx)("path",{d:"M19.7071 15.7071C19.3166 15.3166 19.3166 14.6834 19.7071 14.2929L24.2929 9.70711C24.6834 9.31658 25.3166 9.31658 25.7071 9.70711L30.2929 14.2929C30.6834 14.6834 30.6834 15.3166 30.2929 15.7071L25.7071 20.2929C25.3166 20.6834 24.6834 20.6834 24.2929 20.2929L19.7071 15.7071Z"}),(0,s.jsx)("rect",{x:"39",y:"5",width:"8",height:"8",rx:"2"}),(0,s.jsx)("rect",{x:"39",y:"17",width:"8",height:"8",rx:"2"}),(0,s.jsx)("rect",{x:"3.5",y:"11.5",width:"7",height:"7",rx:"1.5",stroke:"currentColor"})]}),(0,s.jsx)("path",{stroke:"currentColor",strokeOpacity:"0.35",strokeWidth:"2",d:"M38 21L36 21C35.4477 21 35 20.5523 35 20L35 15M35 15L32 15M35 15L35 10C35 9.44772 35.4477 9 36 9L38 9 M12 15L18 15"})]})),ct=e=>(0,s.jsx)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"5 5 50 30",fill:"none"},e),{children:(0,s.jsxs)("g",{transform:"translate(22, 12)",children:[(0,s.jsx)("rect",{x:"5.5",y:"3",width:"8.5",height:"2",rx:"0.5",fill:"currentColor"}),(0,s.jsx)("rect",{x:"2",y:"6",width:"12",height:"2",rx:"0.5",fill:"currentColor"}),(0,s.jsx)("rect",{x:"2",y:"9",width:"12",height:"2",rx:"0.5",fill:"currentColor"}),(0,s.jsx)("rect",{x:"2",y:"12",width:"6.5",height:"2",rx:"0.5",fill:"currentColor"})]})}));var dt=n(37720),ht=n(586);const ut=[{items:[pt("js"),pt("md"),pt("html")]},{title:"Data",items:[{type:"large",label:"File attachment",description:"Upload a local file",category:"Data",icon:e=>(0,s.jsx)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:(0,s.jsx)("path",{d:"M24.7851 9.69193L24.0524 10.3725L24.7851 9.69193ZM20.2008 14.0556L19.4849 14.7538L20.2008 14.0556ZM22.4652 13.2134L28.5448 19.4466L29.9766 18.0501L23.8969 11.8169L22.4652 13.2134ZM27.6793 20.2908L20.9167 13.3574L19.4849 14.7538L26.2476 21.6873L27.6793 20.2908ZM24.0524 10.3725L30.5173 17.3321L31.9827 15.9709L25.5177 9.01134L24.0524 10.3725ZM20.7743 10.4956C21.5997 9.46123 23.1518 9.40298 24.0524 10.3725L25.5177 9.01134C23.785 7.14606 20.7991 7.25813 19.2111 9.24804L20.7743 10.4956ZM20.9167 13.3574C20.1543 12.5758 20.0933 11.3489 20.7743 10.4956L19.2111 9.24804C17.9009 10.8898 18.0183 13.2502 19.4849 14.7538L20.9167 13.3574ZM28.5448 20.2908C28.3076 20.534 27.9165 20.534 27.6793 20.2908L26.2476 21.6873C27.2697 22.7352 28.9544 22.7352 29.9766 21.6873L28.5448 20.2908ZM28.5448 19.4466C28.7739 19.6814 28.7739 20.056 28.5448 20.2908L29.9766 21.6873C30.9633 20.6756 30.9633 19.0617 29.9766 18.0501L28.5448 19.4466Z",fill:"currentColor"})})),filter:e=>{let{allowFileAttachments:t}=e;return t},action:(e,t)=>{let{nextId:n}=t;(0,et.Z)().then((t=>{e({type:"attachLocalFiles",files:t,beforeId:n,source:"filesPane",trigger:"click"})}))}},{type:"large",label:"Cloud file",description:"Load a file from Google or Microsoft",icon:e=>(0,s.jsx)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30.057 10.115C29.2921 9.31814 28.026 9.29226 27.2292 10.0572L24.3436 12.8272L22.9585 11.3844L25.8442 8.61437C27.4379 7.08452 29.97 7.13628 31.4998 8.72997C33.0297 10.3237 32.9779 12.8558 31.3842 14.3856L28.4986 17.1557L27.1136 15.7129L29.9992 12.9428C30.7961 12.1779 30.822 10.9118 30.057 10.115ZM19.9571 19.8102C20.722 20.6071 21.9881 20.6329 22.7849 19.868L25.6706 17.098L27.0556 18.5408L24.1699 21.3108C22.5763 22.8407 20.0441 22.7889 18.5143 21.1952C16.9844 19.6015 17.0362 17.0694 18.6299 15.5396L21.5155 12.7695L22.9005 14.2123L20.0149 16.9824C19.218 17.7473 19.1922 19.0134 19.9571 19.8102ZM26.4787 12.1636L22.1503 16.3187L23.5353 17.7615L27.8638 13.6065L26.4787 12.1636Z",fill:"currentColor"})})),filter:e=>{let{allowPrivateData:t}=e;return t},action:e=>e({type:"showModal",modal:"addCloudFile"})},...Xe.B7.map((e=>xt(e,"js"))),{type:"large",label:"Database query",description:"Query a SQL database",icon:e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,s.jsx)("path",{d:"M30 11C30 11.2456 29.7749 11.7372 28.7954 12.2269C27.8758 12.6867 26.5353 13 25 13C23.4647 13 22.1242 12.6867 21.2046 12.2269C20.2251 11.7372 20 11.2456 20 11C20 10.7544 20.2251 10.2628 21.2046 9.77311C22.1242 9.31327 23.4647 9 25 9C26.5353 9 27.8758 9.31327 28.7954 9.77311C29.7749 10.2628 30 10.7544 30 11Z",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29 13.2361C30.2275 12.6868 31 11.8885 31 11V13V15.25C31 17.0449 28.3137 18 25 18C21.6863 18 19 17.0449 19 15.25V13V11C19 11.8885 19.7725 12.6868 21 13.2361V13.2365V13.2475V13.2585V13.2695V13.2805V13.2915V13.3025V13.3136V13.3246V13.3357V13.3467V13.3578V13.3689V13.3799V13.391V13.4021V13.4133V13.4244V13.4355V13.4466V13.4578V13.4689V13.4801V13.4912V13.5024V13.5136V13.5248V13.536V13.5472V13.5584V13.5696V13.5808V13.592V13.6032V13.6145V13.6257V13.6369V13.6482V13.6594V13.6707V13.6819V13.6932V13.7045V13.7158V13.727V13.7383V13.7496V13.7609V13.7722V13.7835V13.7948V13.8061V13.8174V13.8287V13.84V13.8513V13.8626V13.874V13.8853V13.8966V13.9079V13.9193V13.9306V13.9419V13.9533V13.9646V13.9759V13.9873V13.9986V14.0099V14.0213V14.0326V14.0439V14.0553V14.0666V14.0779V14.0893V14.1006V14.1119V14.1233V14.1346V14.1459V14.1573V14.1686V14.1799V14.1913V14.2026V14.2139V14.2252V14.2366V14.2479V14.2592V14.2705V14.2818V14.2931V14.3044V14.3157V14.327V14.3383V14.3496V14.3609V14.3722V14.3834V14.3947V14.406V14.4172V14.4285V14.4398V14.451V14.4623V14.4735V14.4847V14.496V14.5072V14.5184V14.5296V14.5408V14.552V14.5632V14.5744V14.5856V14.5968V14.608V14.6191V14.6303V14.6414V14.6526V14.6637V14.6748V14.6859V14.6971V14.7082V14.7193V14.7303V14.7414V14.7525V14.7635V14.7746V14.7856V14.7967V14.8077V14.8187V14.8297V14.8407V14.8517V14.8627V14.8736V14.8846V14.8955V14.9065V14.9174V14.9283V14.9392V14.9501V14.961V14.9719V14.9827V14.9936V15.0044V15.0152V15.026V15.0368V15.0476V15.0584V15.0691V15.0799V15.0906V15.1013V15.1121V15.1227V15.1334V15.1441V15.1459C21.0646 15.2086 21.216 15.3194 21.542 15.4585C22.291 15.7779 23.4959 16 25 16C26.5041 16 27.709 15.7779 28.458 15.4585C28.784 15.3194 28.9354 15.2086 29 15.1459V15.1396V15.132V15.1243V15.1165V15.1087V15.1009V15.093V15.0851V15.0772V15.0692V15.0612V15.0531V15.045V15.0369V15.0287V15.0205V15.0123V15.004V14.9957V14.9874V14.979V14.9706V14.9622V14.9537V14.9452V14.9366V14.928V14.9194V14.9108V14.9021V14.8934V14.8847V14.8759V14.8671V14.8582V14.8494V14.8405V14.8315V14.8226V14.8136V14.8046V14.7955V14.7864V14.7773V14.7682V14.759V14.7498V14.7405V14.7313V14.722V14.7127V14.7033V14.694V14.6846V14.6751V14.6657V14.6562V14.6467V14.6372V14.6276V14.618V14.6084V14.5988V14.5891V14.5794V14.5697V14.56V14.5502V14.5404V14.5306V14.5208V14.5109V14.501V14.4911V14.4812V14.4713V14.4613V14.4513V14.4413V14.4312V14.4212V14.4111V14.401V14.3909V14.3807V14.3705V14.3604V14.3502V14.3399V14.3297V14.3194V14.3091V14.2988V14.2885V14.2782V14.2678V14.2574V14.247V14.2366V14.2262V14.2157V14.2053V14.1948V14.1843V14.1738V14.1632V14.1527V14.1421V14.1316V14.121V14.1104V14.0997V14.0891V14.0784V14.0678V14.0571V14.0464V14.0357V14.025V14.0142V14.0035V13.9927V13.982V13.9712V13.9604V13.9496V13.9387V13.9279V13.9171V13.9062V13.8953V13.8845V13.8736V13.8627V13.8518V13.8409V13.8299V13.819V13.8081V13.7971V13.7862V13.7752V13.7642V13.7532V13.7422V13.7312V13.7202V13.7092V13.6982V13.6872V13.6761V13.6651V13.654V13.643V13.6319V13.6209V13.6098V13.5987V13.5877V13.5766V13.5655V13.5544V13.5433V13.5322V13.5211V13.51V13.4989V13.4878V13.4767V13.4656V13.4545V13.4434V13.4322V13.4211V13.41V13.3989V13.3878V13.3766V13.3655V13.3544V13.3433V13.3321V13.321V13.3099V13.2988V13.2877V13.2765V13.2654V13.2543V13.2432V13.2361ZM29.0419 15.0893C29.0447 15.0899 29.0398 15.1028 29.0191 15.1261C29.0288 15.1003 29.0392 15.0886 29.0419 15.0893ZM20.9581 15.0893C20.9608 15.0886 20.9712 15.1003 20.9809 15.1261C20.9602 15.1028 20.9553 15.0899 20.9581 15.0893Z",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29 13.2361C30.2275 12.6868 31 11.8885 31 11V13V19C31 20.7949 28.3137 22 25 22C21.6863 22 19 20.7949 19 19V13V11C19 11.8885 19.7725 12.6868 21 13.2361V13.2457V13.2647V13.2838V13.3029V13.3221V13.3413V13.3605V13.3798V13.3992V13.4185V13.438V13.4574V13.4769V13.4965V13.5161V13.5357V13.5554V13.5751V13.5948V13.6146V13.6344V13.6543V13.6741V13.6941V13.714V13.734V13.7541V13.7741V13.7942V13.8144V13.8345V13.8547V13.8749V13.8952V13.9155V13.9358V13.9561V13.9765V13.9969V14.0174V14.0378V14.0583V14.0788V14.0994V14.1199V14.1405V14.1611V14.1818V14.2024V14.2231V14.2438V14.2646V14.2853V14.3061V14.3269V14.3477V14.3686V14.3894V14.4103V14.4312V14.4521V14.473V14.494V14.515V14.5359V14.5569V14.5779V14.599V14.62V14.6411V14.6621V14.6832V14.7043V14.7254V14.7465V14.7677V14.7888V14.81V14.8311V14.8523V14.8735V14.8947V14.9158V14.937V14.9583V14.9795V15.0007V15.0219V15.0431V15.0644V15.0856V15.1069V15.1281V15.1494V15.1706V15.1919V15.2131V15.2344V15.2556V15.2769V15.2981V15.3194V15.3406V15.3619V15.3831V15.4043V15.4256V15.4468V15.468V15.4893V15.5105V15.5317V15.5529V15.5741V15.5953V15.6165V15.6376V15.6588V15.68V15.7011V15.7222V15.7434V15.7645V15.7856V15.8067V15.8278V15.8488V15.8699V15.8909V15.9119V15.9329V15.9539V15.9749V15.9959V16.0168V16.0377V16.0586V16.0795V16.1004V16.1212V16.1421V16.1629V16.1837V16.2044V16.2252V16.2459V16.2666V16.2873V16.3079V16.3286V16.3492V16.3698V16.3903V16.4108V16.4313V16.4518V16.4723V16.4927V16.5131V16.5334V16.5538V16.5741V16.5944V16.6146V16.6348V16.655V16.6751V16.6953V16.7153V16.7354V16.7554V16.7754V16.7953V16.8152V16.8351V16.855V16.8748V16.8945V16.9142V16.9339V16.9536V16.9732V16.9928V17.0123V17.0318V17.0512V17.0706V17.09V17.1093V17.1286V17.1478V17.167V17.1862V17.2053V17.2243V17.2433V17.2623V17.2812V17.3001V17.3189V17.3377V17.3564V17.3751V17.3937V17.4123V17.4308V17.4493V17.4677V17.4861V17.5044V17.5227V17.5409V17.559V17.5771V17.5952V17.6132V17.6311V17.649V17.6668V17.6846V17.7023V17.72V17.7375V17.7551V17.7726V17.79V17.8073V17.8246V17.8418V17.859V17.8761V17.8932V17.9101V17.927V17.9439V17.9607V17.9774V17.9941V18.0106V18.0272V18.0436V18.06V18.0763V18.0926V18.1088V18.1249V18.1409V18.1569V18.1728V18.1886V18.2044V18.22V18.2357V18.2512V18.2667V18.282V18.2974V18.3126V18.3278V18.3428V18.3579V18.3728V18.3876V18.4024V18.4171V18.4317V18.4463V18.4607V18.4751V18.4894V18.5036V18.5178V18.5318V18.5458V18.5597V18.5735V18.5872V18.6008V18.6144V18.6278V18.6412V18.6545V18.6677V18.6808V18.6938V18.7068V18.7196V18.7324V18.745V18.7576V18.7701V18.7825V18.7948V18.807V18.8191V18.8312V18.8431V18.8549V18.8667V18.8783V18.8899V18.9013V18.9127V18.9239V18.9341C21.0457 19.0021 21.1957 19.1633 21.6288 19.3729C22.3708 19.7321 23.5531 20 25 20C26.4469 20 27.6292 19.7321 28.3712 19.3729C28.8043 19.1633 28.9543 19.0021 29 18.9341V18.9314V18.9232V18.9148V18.9064V18.8978V18.889V18.8802V18.8712V18.8621V18.8529V18.8436V18.8342V18.8246V18.8149V18.8051V18.7952V18.7852V18.7751V18.7648V18.7545V18.744V18.7334V18.7227V18.7119V18.701V18.69V18.6788V18.6676V18.6562V18.6448V18.6332V18.6215V18.6098V18.5979V18.5859V18.5738V18.5616V18.5493V18.5369V18.5244V18.5118V18.4991V18.4863V18.4733V18.4603V18.4472V18.434V18.4207V18.4073V18.3938V18.3802V18.3666V18.3528V18.3389V18.3249V18.3109V18.2967V18.2825V18.2681V18.2537V18.2392V18.2246V18.2099V18.1951V18.1802V18.1652V18.1502V18.1351V18.1198V18.1045V18.0891V18.0737V18.0581V18.0425V18.0267V18.0109V17.995V17.9791V17.963V17.9469V17.9307V17.9144V17.898V17.8816V17.865V17.8484V17.8318V17.815V17.7982V17.7813V17.7643V17.7473V17.7302V17.713V17.6957V17.6784V17.661V17.6435V17.6259V17.6083V17.5907V17.5729V17.5551V17.5372V17.5193V17.5012V17.4832V17.465V17.4468V17.4285V17.4102V17.3918V17.3734V17.3549V17.3363V17.3176V17.2989V17.2802V17.2614V17.2425V17.2236V17.2046V17.1855V17.1665V17.1473V17.1281V17.1088V17.0895V17.0702V17.0507V17.0313V17.0118V16.9922V16.9726V16.9529V16.9332V16.9134V16.8936V16.8737V16.8538V16.8339V16.8139V16.7938V16.7737V16.7536V16.7334V16.7132V16.6929V16.6726V16.6523V16.6319V16.6115V16.591V16.5705V16.55V16.5294V16.5088V16.4881V16.4674V16.4467V16.426V16.4052V16.3843V16.3635V16.3426V16.3217V16.3007V16.2797V16.2587V16.2376V16.2166V16.1954V16.1743V16.1531V16.132V16.1107V16.0895V16.0682V16.0469V16.0256V16.0043V15.9829V15.9615V15.9401V15.9187V15.8972V15.8757V15.8543V15.8327V15.8112V15.7897V15.7681V15.7465V15.7249V15.7033V15.6816V15.66V15.6383V15.6166V15.595V15.5733V15.5515V15.5298V15.5081V15.4863V15.4646V15.4428V15.421V15.3992V15.3774V15.3556V15.3338V15.312V15.2902V15.2684V15.2465V15.2247V15.2029V15.181V15.1592V15.1373V15.1155V15.0936V15.0718V15.0499V15.0281V15.0063V14.9844V14.9626V14.9407V14.9189V14.8971V14.8753V14.8534V14.8316V14.8098V14.788V14.7662V14.7445V14.7227V14.7009V14.6792V14.6574V14.6357V14.614V14.5923V14.5706V14.5489V14.5272V14.5056V14.4839V14.4623V14.4407V14.4191V14.3975V14.376V14.3544V14.3329V14.3114V14.2899V14.2685V14.247V14.2256V14.2042V14.1829V14.1615V14.1402V14.1189V14.0976V14.0763V14.0551V14.0339V14.0128V13.9916V13.9705V13.9494V13.9283V13.9073V13.8863V13.8654V13.8444V13.8235V13.8026V13.7818V13.761V13.7402V13.7195V13.6988V13.6781V13.6575V13.6369V13.6164V13.5959V13.5754V13.5549V13.5345V13.5142V13.4939V13.4736V13.4534V13.4332V13.413V13.3929V13.3729V13.3529V13.3329V13.313V13.2931V13.2733V13.2535V13.2361ZM29.0175 18.8988C29.0186 18.899 29.0166 18.9065 29.0086 18.9204C29.0125 18.9055 29.0165 18.8985 29.0175 18.8988ZM20.9825 18.8988C20.9835 18.8985 20.9875 18.9055 20.9914 18.9204C20.9834 18.9065 20.9814 18.899 20.9825 18.8988Z",fill:"currentColor"})]})),action:(e,t)=>{let{nextId:n,trigger:s}=t;return e({type:"insertBefore",id:n,node:{mode:"sql"},trigger:s,source:"nodeInserterMenu"})}}]},{title:"Tables",items:[{type:"large",label:"Data table",description:"Filter and summarize tabular data",icon:e=>{var{width:t="50",height:n="30",viewBox:r="-17 -7 50 30"}=e,a=(0,we.Z)(e,["width","height","viewBox"]);return(0,s.jsx)(lt.iA,(0,w.Z)({width:t,height:n,viewBox:r},a))},action:(e,t)=>{let{nextId:n,trigger:s}=t;return e({type:"insertBefore",id:n,node:{mode:"table"},trigger:s,source:"nodeInserterMenu"})}},(0,C.Z)((0,w.Z)({},xt(Xe.Cq.find((e=>{let{label:t}=e;return"Table\xa0input"===t})),"js")),{label:"JavaScript table"}),(0,C.Z)((0,w.Z)({},xt(Xe.L7.find((e=>{let{label:t}=e;return"Table"===t})),"md")),{label:"Markdown table"}),{label:"HTML table",description:"Basic custom table layout",icon:e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor"},e),{children:[(0,s.jsxs)("g",{fill:"currentColor",children:[(0,s.jsx)("path",{d:"M4 5C4 4.44772 4.44772 4 5 4H18V10H4V5Z",fill:"currentColor"}),(0,s.jsx)("rect",{x:"4",y:"11",width:"14",height:"7",fillOpacity:"0.35"}),(0,s.jsx)("path",{d:"M4 19H18V26H5C4.44772 26 4 25.5523 4 25V19Z",fillOpacity:"0.35"}),(0,s.jsx)("rect",{x:"18",y:"4",width:"14",height:"6",fill:"currentColor"}),(0,s.jsx)("rect",{x:"18",y:"11",width:"14",height:"7",fillOpacity:"0.35"}),(0,s.jsx)("rect",{x:"18",y:"19",width:"14",height:"7",fillOpacity:"0.35"}),(0,s.jsx)("path",{d:"M32 4H45C45.5523 4 46 4.44772 46 5V10H32V4Z",fill:"currentColor"}),(0,s.jsx)("rect",{x:"32",y:"11",width:"14",height:"7",fillOpacity:"0.35"}),(0,s.jsx)("path",{d:"M32 19H46V25C46 25.5523 45.5523 26 45 26H32V19Z",fillOpacity:"0.35"})]}),(0,s.jsx)("path",{d:"M18 26V4",stroke:"white"}),(0,s.jsx)("path",{d:"M32 26V4",stroke:"white"})]})),type:"large",action:(e,t)=>{let{previousId:n}=t;return e({type:"insertSnippet",apply:ft('<table>\n  <thead>\n    <tr>\n      <th>Name</th>\n      <th>Fuel economy</th>\n      <th>Year</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${cars.slice(0, 5).map(car => htl.html`<tr>\n      <td>${car["name"]}</td>\n      <td>${car["economy (mpg)"]} mpg</td>\n      <td>\u2019${car["year"]}</td>\n    </tr>`)}\n  </tbody>\n</table>'),label:"Insert",mode:"html",afterId:n})}}]},{title:"Plot",items:Xe.aS.map((e=>xt(e,"js")))},{title:"Maps",items:[{label:"Interactive map",description:"Zoomable map with Leaflet",thumbnail:e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,s.jsx)("path",{d:"M29 19H31V20H30V22H29V19Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M38 23V21V20H40V19H42V20H43V21H44V23H43V24H42V25H41V23H38Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M46 23V24H45V25H44H43V24H44H45V23H46Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M41 18V17H43V18H44V19H42V18H41Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M37 19H40V18H39V17H40V16H41V15H39V16H38V17H36V18H37V19Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M23 11H24H25V10H26V9H27H28V10H27V11H29V12H30V13H32V14H33V16H34V17H35V14H36V16H38V14H39V11H38V10H39H40V12H41V9H40V8H39V7H40H41V8H42V5H39V4H37V5H34V4H31V5H30V6H29V4H28V6H27V5H26V7H24V8H23V9H22V11H23Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M24 11V12H29V13H30V15H28V16H30V17H29V18H28V20V21H27V23H26V24H25V23H24V17H21V16H20V14H21V13H22V12H23V11H24Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M6 12V9H5V8H4V7H5V6H6V5H8V6H12V5H13H14V4H16V6H14V7H16V9H15V10H14V11H13V12H12V13H10V14V15H11H15V16H16V17H17V18H19V20H18V22H17V24H16V25H15V27H16V28H15V27H13V21H12V20H11V16H9V15H8V13H7V12H6Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M17 5V4H21V5H20V6H19V7H18V5H17Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M21 6H22V7H21V6Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M23 3H25V4H23V3Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M23 5H25V6H24V7H23V5Z",fill:"currentColor"})]})),apply:(0,Xe.eu)((e=>"#{1:".concat(e("map"),'} = {\n  const container = yield htl.html`<div style="height: 500px;">`;\n  const map = L.map(container).setView([#{2:37.774}, #{3:-122.423}], #{4:13});\n  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {\n    attribution: "\xa9 <a href=https://www.openstreetmap.org/copyright>OpenStreetMap</a> contributors"\n  }).addTo(map);\n}')))}].map((e=>xt(e,"js")))},{title:"Trees and Networks",items:[{label:"Tidy tree",description:"Tree diagram with Plot",thumbnail:e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,s.jsx)("path",{d:"M10 15H14C15.1046 15 16 14.1046 16 13V11C16 9.89543 16.8954 9 18 9H22 M10 15H14C15.1046 15 16 15.8954 16 17V19C16 20.1046 16.8954 21 18 21H22 M40 4H36C34.8954 4 34 4.89543 34 6V7C34 8.10457 33.1046 9 32 9H28H40 M32 21H28H40M32 21C33.1046 21 34 20.1046 34 19V18C34 16.8954 34.8954 16 36 16H40M32 21C33.1046 21 34 21.8954 34 23V24C34 25.1046 34.8954 26 36 26H40",stroke:"currentColor",strokeOpacity:"0.35",strokeWidth:"2"}),(0,s.jsxs)("g",{fill:"currentColor",children:[(0,s.jsx)("rect",{x:"5",y:"14",width:"4",height:"2",rx:"0.5"}),(0,s.jsx)("rect",{x:"23",y:"8",width:"4",height:"2",rx:"0.5"}),(0,s.jsx)("rect",{x:"23",y:"20",width:"4",height:"2",rx:"0.5"}),(0,s.jsx)("rect",{x:"41",y:"15",width:"4",height:"2",rx:"0.5"}),(0,s.jsx)("rect",{x:"41",y:"20",width:"4",height:"2",rx:"0.5"}),(0,s.jsx)("rect",{x:"41",y:"25",width:"4",height:"2",rx:"0.5"}),(0,s.jsx)("rect",{x:"41",y:"3",width:"4",height:"2",rx:"0.5"}),(0,s.jsx)("rect",{x:"41",y:"8",width:"4",height:"2",rx:"0.5"})]})]})),mode:"js",type:"snippet",apply:(0,Ye.DB)('Plot.plot({\n  axis: null,\n  margin: 20,\n  marginRight: 120,\n  marks: [\n    Plot.tree(flare.slice(0, 50), {path: "name", delimiter: "."})\n  ]\n})')},{label:"Circle packing",description:"Nested hierarchy with D3",thumbnail:e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,s.jsxs)("g",{stroke:"currentColor",children:[(0,s.jsx)("circle",{cx:"33",cy:"13",r:"9.5"}),(0,s.jsxs)("g",{strokeOpacity:"0.35",children:[(0,s.jsx)("circle",{cx:"14.5",cy:"10.5",r:"7",stroke:"#C4C4C4"}),(0,s.jsx)("circle",{cx:"20",cy:"22",r:"3.5",stroke:"#C4C4C4"})]})]}),(0,s.jsxs)("g",{fill:"currentColor",children:[(0,s.jsx)("circle",{cx:"30",cy:"9",r:"3"}),(0,s.jsx)("circle",{cx:"37",cy:"14",r:"4"}),(0,s.jsx)("circle",{cx:"29",cy:"16",r:"3"}),(0,s.jsxs)("g",{fillOpacity:"0.35",children:[(0,s.jsx)("circle",{cx:"16.5",cy:"12.5",r:"2.5"}),(0,s.jsx)("circle",{cx:"12.5",cy:"8.5",r:"2.5"}),(0,s.jsx)("circle",{cx:"20",cy:"22",r:"2"})]})]})]})),mode:"js",type:"snippet",apply:(0,Ye.DB)('Pack(flare, {\n  path: (d) => d.name.replaceAll(".", "/"), // e.g. flare/animate/Easing\n  label: (d) => d.name.split(".").pop(), // display text\n  value: (d) => d?.size, // area of each circle\n  title: (d, n) => [n.id, n.value.toLocaleString()].join("\\n"), // hover text\n  width,\n  height: 720\n})'),imports:[["Pack","@d3/pack"]]},{label:"Icicle partition",description:"Left-to-right hierarchy with D3",thumbnail:e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor"},e),{children:[(0,s.jsx)("rect",{x:"5",y:"5",width:"12",height:"8"}),(0,s.jsx)("rect",{x:"18",y:"9",width:"13",height:"4"}),(0,s.jsx)("rect",{x:"32",y:"11",width:"13",height:"2"}),(0,s.jsxs)("g",{fillOpacity:"0.35",children:[(0,s.jsx)("rect",{x:"5",y:"14",width:"12",height:"6"}),(0,s.jsx)("rect",{x:"18",y:"14",width:"13",height:"2"}),(0,s.jsx)("rect",{x:"18",y:"17",width:"13",height:"3"}),(0,s.jsx)("path",{d:"M18 5H31V8H18V5Z"}),(0,s.jsx)("rect",{x:"32",y:"9",width:"13",height:"1"}),(0,s.jsx)("rect",{x:"32",y:"17",width:"13",height:"1"}),(0,s.jsx)("rect",{x:"32",y:"19",width:"13",height:"1"}),(0,s.jsx)("path",{d:"M32 21H45V24C45 24.5523 44.5523 25 44 25H32V21Z"}),(0,s.jsx)("rect",{x:"5",y:"21",width:"12",height:"4"}),(0,s.jsx)("path",{d:"M18 21H31V25H18V21Z"})]})]})),mode:"js",type:"snippet",apply:(0,Ye.DB)('Icicle(flare, {\n  path: (d) => d.name.replaceAll(".", "/"), // e.g. flare/animate/Easing\n  label: (d) => d.name.split(".").pop(), // display text\n  value: (d) => d?.size, // height of each rect\n  title: (d, n) => [n.id, n.value.toLocaleString()].join("\\n"), // hover text\n  width,\n  height: 500\n})'),imports:[["Icicle","@d3/icicle"]]},{label:"Sunburst partition",description:"Radial hierarchy with D3",thumbnail:e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor"},e),{children:[(0,s.jsx)("path",{fillOpacity:"0.35",d:"M23.9648 12.1524L21.9997 8.67561C22.7855 8.30283 23.6335 8.07995 24.5 8.0179V12.0116C24.3177 12.0421 24.1386 12.0892 23.9648 12.1524Z M24.5 7.01473C23.4609 7.07979 22.4438 7.34711 21.5061 7.80229L19.5357 4.31631C20.0106 4.07343 20.4998 3.86315 21 3.68631C22.1242 3.28884 23.3038 3.06032 24.5 3.01044V7.01473Z M30.1374 21.1337L32.8953 24.0368C32.072 24.7562 31.1554 25.3586 30.1716 25.8284C29.6279 26.0881 29.0637 26.3073 28.4834 26.4833C26.595 27.0562 24.5944 27.1544 22.6589 26.7694C20.7234 26.3844 18.9128 25.5281 17.3873 24.2761C17.2123 24.1325 17.0417 23.9843 16.8756 23.8315L19.7071 21C19.7783 21.0628 19.8507 21.1244 19.9243 21.1848C20.9414 22.0195 22.1486 22.5905 23.4391 22.8472C24.6441 23.0869 25.8869 23.0456 27.0713 22.7282C27.1176 22.7158 27.1637 22.703 27.2098 22.6897C27.2474 22.6789 27.285 22.6678 27.3225 22.6564C28.3561 22.3429 29.3131 21.8241 30.1374 21.1337Z M26.6958 17.511L29.4464 20.4064C28.7363 20.9905 27.9161 21.4304 27.032 21.6986C26.7691 21.7783 26.5025 21.8423 26.2336 21.8905C25.3756 22.0441 24.494 22.0365 23.6344 21.8655C22.5053 21.6409 21.4491 21.1414 20.5593 20.4111C20.5111 20.3716 20.4635 20.3314 20.4165 20.2907L23.2404 17.4667C23.5891 17.7154 23.9873 17.8879 24.4089 17.9718C24.8976 18.069 25.4027 18.0442 25.8796 17.8995C26.1706 17.8112 26.4456 17.68 26.6958 17.511Z M21.9927 14.6304C21.9897 14.6546 21.987 14.6788 21.9846 14.703C21.9358 15.1989 22.01 15.6992 22.2007 16.1595C22.2888 16.3723 22.4006 16.5735 22.5333 16.7596L19.7093 19.5836C19.2192 19.0178 18.8213 18.3751 18.5328 17.6788C18.0923 16.6153 17.9209 15.4595 18.0337 14.3139C18.0609 14.0381 18.1043 13.765 18.1635 13.4959L21.9927 14.6304Z M22.2768 13.6716C22.3365 13.5492 22.4046 13.4306 22.4807 13.3167C22.6508 13.0621 22.8579 12.8357 23.0942 12.6444L21.1291 9.16767C21.0857 9.19646 21.0427 9.22572 21 9.25545C20.2847 9.75353 19.6666 10.3823 19.1797 11.111C18.8808 11.5585 18.6355 12.0371 18.4476 12.5371L22.2768 13.6716Z M17.4858 12.2521C17.7036 11.6563 17.9924 11.0864 18.3475 10.5549C18.9506 9.65233 19.7297 8.88393 20.6355 8.29435L18.6652 4.80836C17.2163 5.70891 15.9735 6.90978 15.0224 8.33317C14.4431 9.20009 13.9815 10.1354 13.6465 11.1145L17.4858 12.2521Z M13.3624 12.0733C13.2182 12.6467 13.1161 13.2317 13.0578 13.8238C12.8644 15.7877 13.1583 17.769 13.9134 19.5922C14.4538 20.8968 15.2184 22.0916 16.1685 23.1244L19 20.2929C18.4181 19.6333 17.947 18.8799 17.6081 18.0618C17.1046 16.8462 16.9086 15.5252 17.0376 14.2158C17.071 13.8767 17.1259 13.5411 17.2017 13.2109L13.3624 12.0733Z"}),(0,s.jsx)("path",{d:"M25.5 3.01044V7.01473C26.6847 7.0889 27.8376 7.42579 28.8749 8.00002C28.9168 8.02321 28.9585 8.04678 29 8.07074C29.151 8.15792 29.2995 8.2502 29.4451 8.34749C30.7355 9.20975 31.7468 10.4283 32.3565 11.8541L36.1589 10.5866C36.1353 10.5269 36.1112 10.4673 36.0866 10.4078C35.1783 8.2151 33.6402 6.34096 31.6668 5.02238C30.8325 4.46488 29.9361 4.01728 29 3.68631C27.8778 3.28956 26.6984 3.0604 25.5 3.01044Z M36.4877 11.5311L32.6915 12.7965C32.9952 13.8564 33.0769 14.9692 32.9298 16.0647L36.8758 16.7224C37.1281 14.9823 36.9947 13.2101 36.4877 11.5311Z M36.6911 17.7054L32.7349 17.046C32.7327 17.0545 32.7304 17.0629 32.7282 17.0713C32.7158 17.1176 32.7029 17.1638 32.6897 17.2098C32.3434 18.4149 31.7181 19.5237 30.8624 20.445L33.6203 23.3481C34.5276 22.4112 35.2716 21.3374 35.8284 20.1716C36.2033 19.3866 36.4933 18.56 36.6911 17.7054Z M25.5 8.0179V12.0116C25.9214 12.0821 26.325 12.2413 26.6834 12.4807C27.1816 12.8136 27.57 13.2869 27.7993 13.8405C28.0286 14.3942 28.0887 15.0034 27.9717 15.5911C27.8826 16.0395 27.6935 16.4599 27.4208 16.8222L30.1714 19.7177C31.0296 18.777 31.6163 17.6184 31.8655 16.3657C31.8742 16.3217 31.8826 16.2777 31.8904 16.2336C32.1262 14.9168 31.9798 13.5589 31.4672 12.3212C30.9545 11.0836 30.0978 10.0199 29 9.25546C28.9633 9.22988 28.9263 9.20463 28.889 9.17973C27.8769 8.50346 26.7084 8.10442 25.5 8.0179Z"})]})),mode:"js",type:"snippet",apply:(0,Ye.DB)('Sunburst(flare, {\n  path: (d) => d.name.replaceAll(".", "/"), // e.g. flare/animate/Easing\n  label: (d) => d.name.split(".").pop(), // display text\n  value: (d) => d?.size, // angle of each arc\n  title: (d, n) => [n.id, n.value.toLocaleString()].join("\\n"), // hover text\n  width,\n  height: 720\n})'),imports:[["Sunburst","@d3/sunburst"]]},{label:"Treemap",description:"Nested hierarchy with D3",thumbnail:e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor"},e),{children:[(0,s.jsx)("rect",{x:"5",y:"5",width:"20",height:"12"}),(0,s.jsxs)("g",{fillOpacity:"0.35",children:[(0,s.jsx)("rect",{x:"26",y:"5",width:"18",height:"7"}),(0,s.jsx)("rect",{x:"26",y:"13",width:"9",height:"7"}),(0,s.jsx)("rect",{x:"36",y:"13",width:"8",height:"7"}),(0,s.jsx)("rect",{x:"5",y:"18",width:"20",height:"7"}),(0,s.jsx)("rect",{x:"26",y:"21",width:"12",height:"4"}),(0,s.jsx)("rect",{x:"39",y:"21",width:"5",height:"4"})]})]})),mode:"js",type:"snippet",apply:(0,Ye.DB)('Treemap(flare, {\n  path: (d) => d.name.replaceAll(".", "/"), // e.g. flare/animate/Easing\n  label: (d) => d.name.split(".").pop(), // display text\n  group: (d) => d.name.split(".")[1], // for color; e.g. animate\n  value: (d) => d?.size, // area of each rect\n  title: (d, n) => [n.id, n.value.toLocaleString()].join("\\n"), // hover text\n  width,\n  height: 500\n})'),imports:[["Treemap","@d3/treemap"]]},{label:"Force-directed graph",description:"Node-link diagram with D3",thumbnail:e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor"},e),{children:[(0,s.jsx)("path",{fillOpacity:"0.35",d:"M9.45007 9.62691L14.221 13.8678C14.4808 13.2308 14.9531 12.7032 15.5499 12.3731L10.779 8.13226C10.5192 8.76917 10.0469 9.29678 9.45007 9.62691Z M19.6441 13.5815C19.8712 14.0038 20 14.4869 20 15C20 15.1908 19.9822 15.3773 19.9482 15.5582L27.3559 14.4186C27.1288 13.9962 27 13.5131 27 13C27 12.8093 27.0178 12.6227 27.0518 12.4418L19.6441 13.5815Z M32.0826 10.8407C32.5645 11.3055 32.8912 11.9302 32.9773 12.6294L37.9174 10.1593C37.4355 9.69448 37.1088 9.06979 37.0227 8.37064L32.0826 10.8407Z M41.4899 10.6045C41.051 10.8561 40.5423 11 40 11C39.8374 11 39.6778 10.9871 39.5222 10.9622L40.5101 16.3956C40.9491 16.1439 41.4577 16 42 16C42.1626 16 42.3222 16.0129 42.4778 16.0379L41.4899 10.6045Z M39.4982 20.6562C39.1834 20.1816 39 19.6122 39 19C39 18.9042 39.0045 18.8094 39.0133 18.7159L32.5018 20.3438C32.8166 20.8184 33 21.3878 33 22C33 22.0958 32.9955 22.1906 32.9867 22.2841L39.4982 20.6562Z M29 19.1707C29.3128 19.0602 29.6494 19 30 19C30.3506 19 30.6872 19.0602 31 19.1707V15.8293C30.6872 15.9399 30.3506 16 30 16C29.6494 16 29.3128 15.9399 29 15.8293V19.1707Z M32.0826 15.1593L39.0227 18.6294C39.1088 17.9302 39.4355 17.3055 39.9174 16.8407L32.9773 13.3706C32.8912 14.0698 32.5645 14.6945 32.0826 15.1593Z M15.7066 17.7076C15.0888 17.412 14.588 16.9112 14.2924 16.2934L11.2934 19.2924C11.9112 19.588 12.412 20.0888 12.7076 20.7066L15.7066 17.7076Z"}),(0,s.jsx)("circle",{cx:"8",cy:"7",r:"2"}),(0,s.jsx)("circle",{cx:"17",cy:"15",r:"2"}),(0,s.jsx)("circle",{cx:"10",cy:"22",r:"2"}),(0,s.jsx)("circle",{cx:"30",cy:"13",r:"2"}),(0,s.jsx)("circle",{cx:"42",cy:"19",r:"2"}),(0,s.jsx)("circle",{cx:"30",cy:"22",r:"2"}),(0,s.jsx)("circle",{cx:"40",cy:"8",r:"2"})]})),mode:"js",type:"snippet",apply:(0,Ye.DB)("ForceGraph(miserables, {\n  nodeId: (d) => d.id, // node identifier, to match links\n  nodeGroup: (d) => d.group, // group identifier, for color\n  nodeTitle: (d) => d.id, // hover text\n  width,\n  height: 520,\n  invalidation // stop when the cell is re-run\n})"),imports:[["ForceGraph","@d3/force-directed-graph"]]},{label:"Graphviz",description:"Node-link diagram with DOT",thumbnail:ot,apply:gt("dot`digraph g {\n\trankdir = LR;\n\ta -> b -> c;\n}`",4,1)},{label:"Mermaid",description:"Node-link diagram with Mermaid",thumbnail:ot,apply:gt("mermaid`graph LR\na--\x3eb\nb--\x3ec`",8,1)}].map((e=>xt(e,"js")))},{title:"Inputs",items:Xe.Cq.filter((e=>{let{label:t}=e;return"Table\xa0input"!==t})).map((e=>xt(e,"js")))},{title:"Text",items:[...Xe.L7.filter((e=>{let{label:t}=e;return"Table"!==t})).map((e=>{let{label:t,description:n,apply:s,thumbnail:r}=e;return{label:t,description:null!==n&&void 0!==n?n:"",thumbnail:r||ct,apply:s}})).map((e=>xt(e,"md"))),xt({label:"Mathematical formula",description:"Typeset math with TeX",thumbnail:e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:[(0,s.jsx)("rect",{x:"20",y:"14",width:"10",height:"2",rx:"0.5",fill:"currentColor"}),(0,s.jsx)("path",{d:"M24 8H26V13H24V9.5L23 10V8.5L24 8Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M24 17H22L24 19.5L22 22H24L25 20.75L26 22H28L26 19.5L28 17H26L25 18.25L24 17Z",fill:"currentColor"})]})),type:"snippet",apply:gt("c = \\pm\\sqrt{a^2 + b^2}")},"tex")]},{title:"Graphics",items:[{label:"D3\xa0starter",description:"Scales, axes, margins, and a line",icon:e=>(0,s.jsx)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30",fill:"none"},e),{children:(0,s.jsx)("path",{d:"M15 5H16.776C19.5414 5 22.1935 6.00089 24.149 7.78249C26.1044 9.56408 27.203 11.9804 27.203 14.5C27.203 17.0196 26.1044 19.4359 24.149 21.2175C22.1935 22.9991 19.5414 24 16.776 24H15V19.8242H16.776C18.3259 19.8242 19.8122 19.2632 20.9081 18.2648C22.004 17.2663 22.6197 15.9121 22.6197 14.5C22.6197 13.0879 22.004 11.7337 20.9081 10.7352C19.8122 9.73676 18.3259 9.17582 16.776 9.17582H15V5ZM23.3074 5H30.6406C31.849 4.99999 33.0323 5.31362 34.052 5.90417C35.0718 6.49472 35.8857 7.33774 36.3986 8.33453C36.9115 9.33132 37.1021 10.4406 36.9481 11.5325C36.7941 12.6244 36.3018 13.6538 35.5289 14.5C36.3018 15.3462 36.7941 16.3756 36.9481 17.4675C37.1021 18.5594 36.9115 19.6687 36.3986 20.6655C35.8857 21.6623 35.0718 22.5053 34.052 23.0958C33.0323 23.6864 31.849 24 30.6406 24H23.3074C25.1119 22.9702 26.5921 21.5313 27.6034 19.8242H30.6404C30.8736 19.8242 31.1046 19.7823 31.3201 19.701C31.5355 19.6197 31.7313 19.5005 31.8962 19.3502C32.0612 19.2 32.192 19.0216 32.2812 18.8253C32.3705 18.629 32.4164 18.4185 32.4164 18.206C32.4164 17.9935 32.3705 17.7831 32.2812 17.5868C32.192 17.3905 32.0612 17.2121 31.8962 17.0619C31.7313 16.9116 31.5355 16.7924 31.3201 16.7111C31.1046 16.6298 30.8736 16.5879 30.6404 16.5879H28.8644C29.1515 15.2083 29.1515 13.7917 28.8644 12.4121H30.6404C30.8736 12.4121 31.1046 12.3702 31.3201 12.2889C31.5355 12.2076 31.7313 12.0884 31.8962 11.9381C32.0612 11.7879 32.192 11.6095 32.2812 11.4132C32.3705 11.2169 32.4164 11.0065 32.4164 10.794C32.4164 10.5815 32.3705 10.371 32.2812 10.1747C32.192 9.9784 32.0612 9.80002 31.8962 9.64976C31.7313 9.49951 31.5355 9.38032 31.3201 9.299C31.1046 9.21768 30.8736 9.17582 30.6404 9.17582H27.6034C26.5921 7.46865 25.1119 6.02981 23.3074 5V5Z",fill:"currentColor"})})),type:"large",action:(e,t)=>{let{previousId:n}=t;return e({type:"insertSnippet",apply:(0,Xe.eu)((e=>"".concat(e("chart"),' = {\n  const width = 640;\n  const height = 400;\n  const margin = {top: 20, right: 30, bottom: 30, left: 40};\n\n  const x = d3.scaleUtc()\n      .domain(d3.extent(aapl, d => d.Date))\n      .range([margin.left, width - margin.right]);\n\n  const y = d3.scaleLinear()\n      .domain([0, d3.max(aapl, d => d.Close)])\n      .range([height - margin.bottom, margin.top]);\n\n  const svg = d3.create("svg")\n      .attr("width", width)\n      .attr("height", height);\n\n  svg.append("g")\n      .attr("transform", `translate(0,$\\{height - margin.bottom})`)\n      .call(d3.axisBottom(x));\n\n  svg.append("g")\n      .attr("transform", `translate($\\{margin.left},0)`)\n      .call(d3.axisLeft(y));\n\n  svg.append("path")\n      .attr("fill", "none")\n      .attr("stroke", "steelblue")\n      .attr("stroke-width", 1.5)\n      .attr("d", d3.line()\n        .x(d => x(d.Date))\n        .y(d => y(d.Close))\n        (aapl));\n\n  return svg.node();\n}'))),label:"D3\xa0starter",mode:"js",afterId:n})}},{label:"SVG",description:"Expressive declarative graphics",icon:e=>(0,s.jsx)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30"},e),{children:(0,s.jsx)("path",{d:"M35 12.2308C35 15.5 29 20.0769 25 24C21 20.0769 15 15.5 15 12.2308C15 8.96154 17 7 19.6667 7C22.3333 7 24.3333 9.61538 25 10.9231C25.6667 9.61538 27.6667 7 30.3333 7C33 7 35 8.96154 35 12.2308Z",stroke:"currentColor",fill:"none",strokeWidth:"2"})})),type:"large",action:(e,t)=>{let{previousId:n}=t;return e({type:"insertSnippet",apply:ft('<svg width=${width} height="200" viewBox="0 0 ${width} 200">\n  <rect width="100%" height="100%" fill="hsl(216deg 100% 13%)" />\n</svg>'),label:"SVG",mode:"html",afterId:n})}},{label:"Canvas",description:"Low-level, high-performance",icon:e=>(0,s.jsxs)("svg",(0,C.Z)((0,w.Z)({width:"50",height:"30",viewBox:"0 0 50 30"},e),{children:[(0,s.jsx)("rect",{x:"30",y:"16",width:"9",height:"9",rx:"1",stroke:"currentColor",fill:"none",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"25.5",cy:"8.5",r:"5.5",fill:"currentColor",fillOpacity:"0.35"}),(0,s.jsx)("path",{d:"M16.433 12.75L21.6292 21.75C21.8216 22.0833 21.5811 22.5 21.1962 22.5H10.8038C10.4189 22.5 10.1784 22.0833 10.3708 21.75L15.567 12.75C15.7594 12.4167 16.2406 12.4167 16.433 12.75Z",fill:"currentColor",stroke:"#currentColor"})]})),type:"large",action:(e,t)=>{let{previousId:n}=t;return e({type:"insertSnippet",apply:(0,Xe.eu)((e=>"".concat(e("canvas"),' = {\n  const context = DOM.context2d(width, 200);\n  context.fillStyle = "hsl(216deg 100% 13%)";\n  context.fillRect(0, 0, width, 200);\n  return context.canvas;\n}'))),label:"Canvas",mode:"js",afterId:n})}}]},{title:"Imports",items:Xe.Xk.map((e=>xt(e,"js")))}],mt=[...["js","md","html"].map((e=>{const{label:t,icon:n}=ye.qz[e];return{label:"Insert as ".concat(t),type:"small",icon:n,action:(t,n)=>{let{previousId:s,filter:r}=n;return t({type:"insertSnippet",apply:ft(r),label:"Insert",mode:e,afterId:s})}}})),{label:"Search",type:"small",icon:at.Z,action:(e,t)=>{let{filter:n}=t;return e({type:"showModal",modal:"search",modalProps:{query:n}})}}];function pt(e){const{label:t,icon:n}=ye.qz[e];return{type:"small",label:t,icon:n,action:(t,n)=>{let{nextId:s,trigger:r}=n;return t({type:"insertBefore",id:s,node:{mode:e},trigger:r,source:"nodeInserterMenu"})}}}function xt(e,t){var n;const s=null!==(n=e.shortLabel)&&void 0!==n?n:e.label;var r,a;return{type:"large",label:s,description:null!==(r=e.description)&&void 0!==r?r:"",icon:null!==(a=e.thumbnail)&&void 0!==a?a:it,newUntil:e.newUntil,action:(n,r)=>{let{previousId:a}=r;return n({type:"insertSnippet",apply:e.apply,label:s,mode:t,afterId:a,imports:e.imports})}}}function ft(e){return(t,n,s,r)=>{t.dispatch(t.state.update({changes:{from:s,to:r,insert:e},selection:$e.jT.cursor(s+e.length)}))}}function gt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(s,r,a,i)=>{s.dispatch(s.state.update({changes:{from:a,to:i,insert:e},selection:$e.jT.range(t,e.length-n)}))}}function vt(e){e.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown",bubbles:!0}))}for(const kt of ut)for(const e of kt.items)e.category=kt.title;{const e=new Set;for(const t of ut)for(const n of t.items){for(;e.has(n.label);)n.label+=" ";e.add(n.label)}}const bt=2592e5,jt=e=>{let{newUntil:t}=e;const n=+t-+new Date,r=n<bt?"saturate(".concat(n/bt,")"):void 0;return(0,s.jsx)("span",{className:"br2 ttu ml1 bg-faint-blue dark-blue",style:{padding:3,fontSize:"0.5rem",filter:r},children:"New"})},Vt=e=>{let{item:t,onClick:n,labelMatcher:r,descriptionMatcher:a,fuzzyMatch:i=!1}=e;const{label:l,type:o,newUntil:c,icon:d}=t;return(0,s.jsxs)(st.O2,{value:l,className:"combobox-option ph1 theme-blue",onClick:e=>n(e,l),children:["small"===o?(0,s.jsxs)("div",{className:"jsx-fba29814d32d7d5f flex justify-between items-center h2 pa1 br2 fw5",children:[(0,s.jsxs)("div",{className:"jsx-fba29814d32d7d5f truncate flex",children:[(0,s.jsx)("div",{className:"jsx-fba29814d32d7d5f",children:r&&i?(0,s.jsx)(rt.q,{text:l,matcher:r}):l}),c&&c>new Date&&(0,s.jsx)(jt,{newUntil:c})]}),(0,s.jsx)(d,{style:{width:14,height:14},className:"jsx-fba29814d32d7d5f thumbnail br-100 pa1 mid-gray ml2 bg-near-white highlight-blue flex-shrink-0"})]}):(0,s.jsxs)("div",{className:"jsx-fba29814d32d7d5f flex justify-between items-center ph1 pv2 br2",children:[(0,s.jsxs)("div",{className:"jsx-fba29814d32d7d5f flex-auto",children:[(0,s.jsxs)("div",{className:"jsx-fba29814d32d7d5f mb1 fw5 flex",children:[(0,s.jsx)("div",{className:"jsx-fba29814d32d7d5f",children:r&&i?(0,s.jsx)(rt.q,{text:l,matcher:r}):l}),c&&c>new Date&&(0,s.jsx)(jt,{newUntil:c})]}),(0,s.jsx)("div",{className:"jsx-fba29814d32d7d5f f7 gray highlight-inherit truncate pb1 nb1",children:!!t.description&&(a&&i?(0,s.jsx)(rt.q,{text:t.description,matcher:a}):t.description)})]}),(0,s.jsx)(d,{style:{width:50,height:30},className:"jsx-fba29814d32d7d5f thumbnail mid-gray ml2 br2 bg-near-white highlight-blue flex-shrink-0"})]}),(0,s.jsx)(me(),{id:"fba29814d32d7d5f",children:".combobox-option:hover .thumbnail{background-color:var(--silver)}"})]})};var yt=e=>{let{previousId:t,nextId:n,focusId:r,hoverId:a,insertingId:i,dispatch:l}=e;const o=null!==r&&(r===t||r===n),c=null!==a&&(a===t||a===n),u=null!==t&&null!==n,{0:m,1:p}=(0,h.useState)(!1),{open:x,openMenu:f,closeMenu:g,triggerRef:v,uiRef:b}=(0,Qe.O)(),j=(0,h.useRef)(null),V=(0,h.useRef)(null),y=(0,h.useRef)(x),k=(0,h.useRef)(),{0:N,1:Z}=(0,h.useState)(""),L=(0,I.v9)((e=>{let{currentUser:t}=e;return null!==t})),M=(0,Le.GS)(Le.hs),S=L&&M,R=(0,I.v9)((e=>{let{currentUser:t,notebook:n}=e;return(0,A.Yb)(t)&&(0,P.j5)(t,n)})),_=(0,I.v9)((e=>{let{notebook:t}=e;return(0,E.cE)(t)})),D=(0,I.v9)((e=>{let{currentUser:t}=e;return(0,E.Sx)(t)})),F=(0,h.useMemo)((()=>N.length?(0,nt.v)(N,{allowAcronyms:!0}):null),[N]),T=(0,h.useMemo)((()=>N.length?(0,nt.v)(N,{allowAcronyms:!1}):null),[N]),U=(0,h.useMemo)((()=>{const e={allowFileAttachments:R,allowPrivateData:_},t=F&&T?t=>(F.test(t.label)||T.test(function(e){const t=[e.label];return e.category&&t.push(e.category),e.description&&t.push(e.description),t.join("\n")}(t)))&&(!t.filter||t.filter(e)):t=>!t.filter||t.filter(e);return ut.map((e=>{var{items:n}=e,s=(0,we.Z)(e,["items"]);return(0,C.Z)((0,w.Z)({},s),{items:n.filter(t)})})).filter((e=>e.items.length>0))}),[F,T,R,_]),O=(0,Je.a)(V);function z(e){requestAnimationFrame((()=>{var t,n;let s=null===(t=V.current)||void 0===t?void 0:t.querySelector("[data-highlighted]");null!==(null===s||void 0===s?void 0:s.previousSibling)&&(vt(e),s=null===(n=V.current)||void 0===n?void 0:n.querySelector("[data-highlighted]"),s||vt(e))}))}function B(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keypress";const r=U.length?U.flatMap((e=>e.items)).find((t=>t.label===e)):mt.find((t=>t.label===e));r&&(l({type:"closeInsertMenu",trigger:s,filter:N,selectedItem:e}),r.action(l,{nextId:n,previousId:t,trigger:s,filter:N}))}function q(e,t){e.preventDefault(),B(t,"click")}(0,h.useEffect)((()=>{const e=i===n;y.current!==e&&(y.current=e,e?f():(Z(""),g()))}),[f,g,i,n,x]),(0,h.useEffect)((()=>{y.current!==x&&(y.current=x,x||(Z(""),l({type:"closeInsertMenu",trigger:"Implicit",filter:N})))}),[l,x,N]),(0,h.useEffect)((()=>{if(!u)return;const e=e=>p(e.shiftKey),t=()=>p(!1);return addEventListener("keydown",e),addEventListener("keyup",e),addEventListener("blur",t),()=>{removeEventListener("keydown",e),removeEventListener("keyup",e),removeEventListener("blur",t)}}),[u]);const W=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"pa2 ".concat(N?"bb b--light-gray":"absolute o-0"),children:(0,s.jsx)(st.gA,{ref:j,placeholder:"Filter",autocomplete:!1,spellCheck:!1,onChange:function(e){Z(e.target.value),z(e.target)},onKeyDown:O,onPaste:function(e){e.preventDefault();const n=e.clipboardData.getData("text");l({type:"insertSnippet",apply:ft(N+n),label:"Insert",mode:"js",afterId:t})},onFocus:function(e){z(e.target)},className:"w-100 border-box",type:"search",value:N,autoFocus:!0})}),(0,s.jsx)(st.Gk,{ref:V,className:"relative",style:{maxHeight:"25em",overflowY:"scroll"},children:U.length?U.map(((e,t)=>{let{title:n,items:r}=e;return(0,s.jsxs)("div",{className:"pt2 mb2 ".concat(t?"bt b--light-gray":""),children:[n&&(0,s.jsx)("div",{className:"gray f7 ph2 pv1",children:T?(0,s.jsx)(rt.q,{text:n,matcher:T}):n}),r.map(((e,t)=>(0,s.jsx)(Vt,{item:e,labelMatcher:F,descriptionMatcher:T,onClick:q,fuzzyMatch:!0},t)))]},t)})):(0,s.jsx)("div",{className:"pt2 mb2",children:mt.map(((e,t)=>(0,s.jsx)(Vt,{item:e,labelMatcher:F,descriptionMatcher:T,onClick:q},t)))})},N)]});return(0,s.jsxs)("div",{className:"absolute",style:{marginTop:1-H.KI,left:-H.KI-H.re/2-5},children:[(0,s.jsxs)("div",{ref:v,className:"jsx-e91a1b2dce5303d0 absolute",children:[(0,s.jsx)("svg",{width:H.KI,height:H.KI-2,viewBox:"-8.5 -7.5 17 15",style:{overflow:"visible"},role:"button","aria-label":"Click to insert or merge cells",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none",onClick:function(e){e.preventDefault(),window.matchMedia(Le.ro).matches?k.current&&(clearTimeout(k.current),k.current=void 0,l({type:"insertBefore",id:n,node:{mode:D},trigger:"click",source:"nodeInserter"})):u&&e.shiftKey?l({type:"merge",beforeId:t,afterId:n}):l(x?{type:"closeInsertMenu",trigger:"click",filter:N}:{type:"openInsertMenu",id:n,before:!0,trigger:"click",source:"nodeInserter"})},onPointerDown:function(){!y.current&&window.matchMedia(Le.ro).matches&&(k.current=setTimeout((()=>{l({type:"openInsertMenu",id:n,before:!0,trigger:"click",source:"nodeInserter"}),k.current=void 0}),500))},onPointerCancel:function(){k.current&&(clearTimeout(k.current),k.current=void 0)},onDoubleClick:function(e){e.shiftKey||(e.preventDefault(),l({type:"insertBefore",id:n,node:{mode:D},trigger:"click",source:"nodeInserter"}))},onMouseDown:tt.P,className:"jsx-e91a1b2dce5303d0 "+"".concat(x?"light-blue":o||c?"moon-gray":"transparent"),children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("title",{className:"jsx-e91a1b2dce5303d0",children:"Merge cells"}),(0,s.jsx)("path",{d:"M-3,4L0,1.5L3,4M0,1.5V6.5",className:"jsx-e91a1b2dce5303d0"}),(0,s.jsx)("path",{d:"M-3,4L0,1.5L3,4M0,1.5V6.5",transform:"rotate(180)",className:"jsx-e91a1b2dce5303d0"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("title",{className:"jsx-e91a1b2dce5303d0",children:null!==r&&r===n?"Insert cell before (".concat((0,d.ZP)("Shift-Mod-Enter"),")"):null!==r&&r===t?"Insert cell after (".concat((0,d.ZP)("Mod-Enter"),")"):"Insert cell"}),(0,s.jsx)("path",{d:"M0,-4.5V4.5M-4.5,0H4.5",className:"jsx-e91a1b2dce5303d0"}),x&&(0,s.jsx)("path",{d:"M8.5,0h23M-8.5,0h-23",style:{stroke:"var(--faint-blue)"},className:"jsx-e91a1b2dce5303d0"})]})}),(0,s.jsx)(me(),{id:"e91a1b2dce5303d0",children:"svg.jsx-e91a1b2dce5303d0{overflow:visible;will-change:transform}svg.jsx-e91a1b2dce5303d0:not(.black):hover{color:var(--mid-gray)}svg.jsx-e91a1b2dce5303d0:not(.black):active{color:var(--black)}.cursor.jsx-e91a1b2dce5303d0{width:0;-webkit-transition:width.2s;-moz-transition:width.2s;-o-transition:width.2s;transition:width.2s;border-top-width:0;border-top-style:solid}.cursor.active.jsx-e91a1b2dce5303d0{width:-webkit-calc(14rem - 17px);width:-moz-calc(14rem - 17px);width:calc(14rem - 17px);border-top-width:2px}"})]}),x&&(0,s.jsx)(dt.J,{extraStyle:{right:"auto",left:-2,top:10,width:"18rem",marginTop:"0.5rem"},ref:b,children:(0,s.jsx)(st.hQ,{"aria-label":"custom option demo",role:"dialog",onSelect:B,onBlur:function(e){e.currentTarget.contains(e.relatedTarget)||g()},openOnFocus:!0,children:S?(0,s.jsx)(ht.y,{type:"insertmenu",right:-3,top:24,children:W}):W})})]})},wt=n(84269);const Ct=e=>{let{notebook:t,dispatch:n,editors:l,currentUser:o,editorComponent:c,disablePointerEvents:d=!1,isNodeCommentable:u=(()=>!1),isEditorAlwaysOpen:m=(()=>!1),editable:p=!0}=e;const{model:x,safe:f,heights:g,focusId:v,selection:b,selectionFocusId:j,editorStates:V,dragId:y,dropId:w,hoverId:C}=t;!function(e,t,n,s){const{0:r,1:a}=(0,h.useState)(S.Qg&&!!location.hash),{0:i,1:l}=(0,h.useState)(!0),o=(0,h.useRef)();(0,h.useEffect)((()=>{if(r){const e=setTimeout((()=>l(!1)),3e3);return()=>clearTimeout(e)}}),[r]),(0,h.useEffect)((()=>{if(r){const r=location.hash.slice(1);let h=!1,u=201;if(r.startsWith("comment-")){const e=document.getElementById(r);if(e)u=e.getBoundingClientRect().top,h=!0;else{const e=r.slice(8);for(const[t,r]of n)if(r.some((t=>t.id===e))){s({type:"showComments",nodeId:t,trigger:"Implicit",source:"hash"});break}}}else for(const n of e){var c,d;if(i&&!(null===(c=t.get(n.id))||void 0===c?void 0:c.worker))break;if((0,R.u2)(n)===r||"cell-".concat(n.id)===r){h=!0;break}u+=((null===(d=t.get(n.id))||void 0===d?void 0:d.total)||0)+H.KI}if(h)if(i)o.current&&clearTimeout(o.current),o.current=setTimeout((()=>l(!1)),150);else{const e=u-H.MT-5;Math.abs(window.scrollY-e)>H.MT&&scrollTo(0,e),a(!1)}else i||a(!1)}return()=>{o.current&&clearTimeout(o.current)}}),[r,i,e,t,n,s])}(x.nodes,g,t.comments,n);const k=(0,E.os)(t);return(0,s.jsxs)("div",{className:"relative notebook z-0 pb6",onMouseLeave:()=>n({type:"hover",id:null}),children:[!f&&(0,s.jsx)("div",{className:"absolute w-100 ".concat(null!==y||d?"pen":""),style:{top:-H.KI,overflowAnchor:"none"},children:(0,s.jsx)(wt.Z,{state:t,dispatch:n,currentUser:o})}),p&&(0,s.jsx)(yt,{previousId:null,nextId:x.nodes[0].id,focusId:v,hoverId:C,insertingId:t.insertingId,dispatch:n}),x.nodes.map(((e,o,d)=>{var x,y;const{id:N,pinned:Z}=e,L=V.get(N);if(!L)return null;const M=L.field(r.A),S=L.field(a.C),H=v===N,E=g.get(N),_=E?E.display+E.worker:0,D=(0,R.cS)(e),F=V.get(N).field(i.JN),I=p&&(m(N)||f||Z||H||D||"none"===(null===(x=e.data)||void 0===x||null===(y=x.display)||void 0===y?void 0:y.mode)||!!F.length||!(0,R.QF)(e)||t.searchResultsVisible&&!!t.searchResults&&t.searchResults.has(e.id)),P=E?E.editor+_:0;return(0,s.jsxs)(h.Fragment,{children:[w===N&&(0,s.jsx)(Ve,{}),(0,s.jsx)(Ke,{node:e,height:P,outputHeight:_,focused:H,editorOpen:I,hovered:C===N,selecting:b.size>0,selected:b.has(N),selectionFocused:j===N,readOnly:k,safe:f,mode:S,isNodeCommentable:u,editable:p}),(0,s.jsx)(je,{node:e,editorState:L,focused:H,selected:b.has(N),selectionFocused:j===N,editorOpen:I,workerHeight:E?E.worker:0,editors:l,hovered:C===N,editorComponent:c,hasPrevious:o>0,hasNext:o<d.length-1}),p&&!k&&(0,s.jsx)(yt,{previousId:N,nextId:o<d.length-1?d[o+1].id:null,focusId:v,hoverId:C,insertingId:t.insertingId,dispatch:n})]},M)})),null===w&&(0,s.jsx)(Ve,{}),(b.size||null!==j)&&(0,s.jsx)(M,{model:x,selection:b,selectionFocusId:j,dispatch:n})]})}},21142:function(e,t,n){var s=n(41799),r=n(69396),a=n(99534),i=n(85893),l=n(65988),o=n.n(l),c=n(12447),d=(n(67294),n(4242)),h=n(52433);t.Z=(0,d.$j)((e=>{let{page:t}=e;return{paddingRight:null!==t.pane&&(0,h.wo)(t.pane).width,paddingLeft:t.collectionsSidebarOpen?216:0}}))((e=>{var{className:t="",children:n,paddingRight:l,paddingLeft:d}=e,h=(0,a.Z)(e,["className","children","paddingRight","paddingLeft"]);return(0,i.jsxs)("div",(0,r.Z)((0,s.Z)({},h),{className:o().dynamic([["b9104e8a53b967b6",[c.hs,l?"calc(max(".concat(l,"px - max((100vw - var(--max-width-8))/2, 0px), var(--spacing-extra-large) - var(--spacing-large)) + var(--spacing-large))"):"var(--spacing-extra-large)",l?"calc(max(".concat(l,"px - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)",d?"calc(max(".concat(d,"px + var(--spacing-large) - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)"]]])+" "+(h&&null!=h.className&&h.className||"".concat(d?"mw-page":"mw8"," mw-page-xl center ph4 pr5-l body ").concat(t)),children:[n,(0,i.jsx)(o(),{id:"b9104e8a53b967b6",dynamic:[c.hs,l?"calc(max(".concat(l,"px - max((100vw - var(--max-width-8))/2, 0px), var(--spacing-extra-large) - var(--spacing-large)) + var(--spacing-large))"):"var(--spacing-extra-large)",l?"calc(max(".concat(l,"px - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)",d?"calc(max(".concat(d,"px + var(--spacing-large) - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)"],children:"@media ".concat(c.hs,"{.body.__jsx-style-dynamic-selector{padding-right:").concat(l?"calc(max(".concat(l,"px - max((100vw - var(--max-width-8))/2, 0px), var(--spacing-extra-large) - var(--spacing-large)) + var(--spacing-large))"):"var(--spacing-extra-large)","}}@media screen and (min-width:90em){.body.__jsx-style-dynamic-selector{padding-right:").concat(l?"calc(max(".concat(l,"px - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)","}}@media screen and (min-width:60em){.body.__jsx-style-dynamic-selector{padding-left:").concat(d?"calc(max(".concat(d,"px + var(--spacing-large) - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)","}}")})]}))}))},56367:function(e,t,n){n.d(t,{R:function(){return d}});var s=n(85893),r=n(602),a=n(68337),i=n.n(a),l=n(67294),o=n(84193);const c=i()().add("@",{validate(e,t,n){const s=e.slice(t);n.re.mention||(n.re.mention=new RegExp("^([a-zA-Z0-9_]){1,39}(?!_)(?=$|".concat(n.re.src_ZPCc,")")));const r=n.re.mention.exec(s);return r?!(t>=2&&"@"===s[t-2])&&r[0].length:0},normalize(e){e.url="/".concat(e.url)}}),d=e=>{let{content:t}=e;const n=[];let a=0,i=0;const d=t.split("\n"),h=c.match(t),u=new Map,m=h?h.filter((e=>"@"===e.schema)):[],[p]=(0,r.h_)(m.length?"/users-exist?".concat(m.map((e=>"login=".concat(e.text.substring(1).toLowerCase()))).sort().join("&")):null);if(p)for(const[s,r]of p)r&&"unavailable"!==r?u.set(s,!0):u.set(s,!1);for(const r of d){const e=c.match(r);if(e){let t=0;for(const{index:i,lastIndex:c,schema:d,text:h,url:m}of e)i>t&&n.push((0,s.jsx)(l.Fragment,{children:r.substring(t,i)},++a)),"@"===d?u.get(h.substring(1).toLowerCase())?n.push((0,s.jsx)(o.Z,{href:m.toLowerCase(),children:(0,s.jsx)("a",{rel:"noopener noreferrer ugc",className:"no-underline black hover-blue",children:h},++a)})):n.push((0,s.jsx)(s.Fragment,{children:h})):n.push((0,s.jsx)(o.Z,{href:m,children:(0,s.jsx)("a",{rel:"nofollow noopener noreferrer ugc",className:"no-underline black hover-blue",children:h},++a)})),t=c;r.length>t&&n.push((0,s.jsx)(l.Fragment,{children:r.substring(t)},++a))}else n.push((0,s.jsx)(l.Fragment,{children:r},++a));d.length>1&&++i<d.length&&n.push((0,s.jsx)("br",{},++a))}return(0,s.jsx)(s.Fragment,{children:n})}},78009:function(e,t,n){n.d(t,{l:function(){return m}});var s=n(41799),r=n(69396),a=n(99534),i=n(85893),l=n(94184),o=n.n(l),c=n(730),d=n(27193),h=(n(67294),n(4242)),u=n(8385);const m=(0,h.$j)((e=>{let{notebook:{following:t,participants:n}}=e;return{following:t,participants:n}}),(e=>({dispatch:e})))((e=>{const{dispatch:t,participants:n,following:l,size:h}=e,m=(0,a.Z)(e,["dispatch","participants","following","size"]);return n.length?(0,i.jsx)("div",(0,r.Z)((0,s.Z)({className:"flex flex-row-reverse"},m),{children:n.map(((e,s)=>(0,i.jsx)("button",{className:o()(!e.self&&"pointer","bg-transparent pa0 ma0 bn tooltipped tooltipped-sw"),"aria-label":e.self?"You":l===e.id?"Stop following ".concat((0,d.KY)(e)):"Follow ".concat((0,d.KY)(e)),disabled:e.self,onClick:()=>t({type:"follow",id:l===e.id?null:e.id}),style:{marginLeft:(.6*-h*n.length-1)/n.length},children:(0,i.jsx)(u.q,{user:e,size:h,style:{borderColor:(0,c.Zt)(s),boxShadow:l===e.id?"0 0 8px ".concat((0,c.Zt)(s)):"none"},className:"br-100 ba bw1"})},s)))})):null}))},9172:function(e,t,n){n.d(t,{X:function(){return o},h:function(){return l}});var s=n(41799),r=n(69396),a=n(99534),i=n(85893);const l=e=>{var{children:t,className:n=""}=e,l=(0,a.Z)(e,["children","className"]);return(0,i.jsx)("div",(0,r.Z)((0,s.Z)({className:"flex sticky z-3 top-0 bg-white justify-between items-center pa3 bb b--light-silver br3 br--top f5 fw6 lh-title near-black ".concat(n)},l),{children:t}))},o=e=>{var{children:t,className:n="",forceScrollable:l=!1}=e,o=(0,a.Z)(e,["children","className","forceScrollable"]);return(0,i.jsx)("div",(0,r.Z)((0,s.Z)({className:"".concat(l?"overflow-y-scroll":"overflow-y-auto "," w-100 ").concat(n)},o),{children:t}))}},52433:function(e,t,n){n.d(t,{YE:function(){return Tt},wo:function(){return Pt}});var s=n(85893),r=n(65988),a=n.n(r),i=n(94184),l=n.n(i),o=n(37497),c=n(586),d=n(12447),h=n(27193),u=n(69150),m=n(5152),p=n.n(m),x=n(67294),f=n(4242),g=n(89905),v=n(30238),b=n(64804),j=n(3764),V=n(63231),y=n(28041),w=n(1099),C=n(26492),k=n(47311),N=n(98768),Z=n(45532),L=n(22513),M=n(42568),S=n(12627),H=n(48627),R=n(3961),E=n(602),_=n(21857),D=n(3142),F=n(84236),I=n(47692),P=n(36448),T=n(22027),A=n(9172);const U=e=>{let{db:t,table:n,visible:r}=e;const i=(0,f.I0)(),{expandedTables:l,tableSchemas:o}=(0,f.v9)((e=>{let{page:t}=e;return{expandedTables:t.expandedTables,tableSchemas:t.tableSchemas}})),c=(0,_.hS)(t,n),d=l.has(c),h=o.get(c),u=d&&!h,m=(0,x.useRef)();return(0,x.useEffect)((()=>{if(u){const e=new H.n4(t,n);m.current=e,e.run(i).then((s=>{e===m.current&&i({type:"updateDatabasesPaneTableSchema",db:t,table:n,columns:s})}),(()=>{e===m.current&&i({type:"updateDatabasesPaneTableSchema",db:t,table:n,columns:null})}))}}),[t,n,u,i]),r?(0,s.jsxs)("div",{className:"jsx-4add2cea7651a892 ml2 mr1",children:[(0,s.jsxs)("button",{onClick:()=>i({type:"toggleDatabasesPaneTable",db:t,table:n}),className:"jsx-4add2cea7651a892 w-100 bn br2 bg-white hover-bg-only pointer flex pa1 br2",children:[(0,s.jsx)(Z.sJ,{className:"pr1",style:{flexShrink:0}}),(0,s.jsx)("span",{className:"jsx-4add2cea7651a892 fw5 truncate mw-100 dark-gray",children:(0,F.Vi)(n)}),d&&(void 0===h?(0,s.jsx)(T.Z,{className:"ml2"}):null===h?(0,s.jsx)(L.Z,{className:"red ml2"}):null)]}),d&&h&&(0,s.jsx)("div",{className:"jsx-4add2cea7651a892 pl1 pb2",children:Array.from(h,(e=>{let[t,n]=e;return(0,s.jsxs)("div",{className:"jsx-4add2cea7651a892 w-100 flex justify-between pv1 pl2 items-center",children:[(0,s.jsx)("span",{style:{maxWidth:"70%"},className:"jsx-4add2cea7651a892 truncate dark-gray",children:t}),(0,s.jsx)("span",{style:{maxWidth:"30%"},title:n.databaseType,className:"jsx-4add2cea7651a892 gray br2",children:n.type})]},t)}))}),(0,s.jsx)(a(),{id:"4add2cea7651a892",children:".hover-bg-only.jsx-4add2cea7651a892:hover{background-color:var(--black-05)}"})]}):null},O=e=>{let{db:t,owner:n,readOnly:r}=e;const i=(0,f.I0)(),{expandedDatabases:l,databaseSchemas:c}=(0,f.v9)((e=>{let{page:t}=e;return{expandedDatabases:t.expandedDatabases,databaseSchemas:t.databaseSchemas}})),d=(0,_.x2)(t),u=l.has(d),m=c.get(d),p=u&&!m,g=(0,x.useRef)();return(0,x.useEffect)((()=>{if(p){const e=new H.Y2(t);g.current=e,e.run(i).then((n=>{e===g.current&&i({type:"updateDatabasesPaneDatabaseSchema",db:t,tables:n})}),(()=>{e===g.current&&i({type:"updateDatabasesPaneDatabaseSchema",db:t,tables:null})}))}}),[t,p,i]),(0,s.jsxs)("div",{className:"jsx-4add2cea7651a892 ma3 f7",children:[(0,s.jsxs)("div",{className:"jsx-4add2cea7651a892 flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:()=>i({type:"toggleDatabasesPaneDatabase",db:t}),className:"jsx-4add2cea7651a892 w-100 bn br2 bg-white hover-bg-only pointer",children:(0,s.jsxs)("div",{className:"jsx-4add2cea7651a892 flex items-center ",children:[(0,s.jsxs)("div",{className:"jsx-4add2cea7651a892 tl",children:[(0,s.jsx)("div",{className:"jsx-4add2cea7651a892 pb1 fw6 near-black",children:t.name}),(0,s.jsxs)("div",{className:"jsx-4add2cea7651a892 gray",children:[(0,_.w4)(t.dialect)||"Unknown","DatabaseClient"===t.type&&"team"===n.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"jsx-4add2cea7651a892 light-gray",children:" \u2022 "}),(0,h.KY)(n)]})]})]}),(0,s.jsx)("div",{className:"jsx-4add2cea7651a892",children:u&&(void 0===m?(0,s.jsx)(T.Z,{className:"ml2"}):null===m?(0,s.jsx)(L.Z,{className:"red ml2"}):null)})]})}),(0,s.jsxs)("div",{className:"jsx-4add2cea7651a892 flex flex-shrink-0 items-center",children:[(0,s.jsx)(o.hU,{icon:v.Z,onClick:()=>i({type:"insertDatabase",source:t}),title:"Insert into notebook"}),(0,s.jsxs)(M.v2,{children:[(0,s.jsx)(o.hU,{icon:w.v,title:"Database actions",colorless:!0,asMenuButton:!0,disabled:r}),(0,s.jsxs)(M.qy,{style:{width:200},children:[(0,s.jsxs)(M.sN,{onSelect:()=>i({type:"refreshDatabasesPaneSchema",db:t}),disabled:r,children:[(0,s.jsx)(N.Z,{className:"mr2"})," Refresh schema"]}),(0,s.jsxs)(M.sN,{onSelect:()=>i({type:"insertDatabase",source:t}),disabled:r,children:[(0,s.jsx)(v.Z,{className:"mr2"})," Insert into notebook"]}),"DatabaseClient"===t.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(M.sN,{onSelect:()=>i({type:"copyDatabaseCode",db:t}),children:[(0,s.jsx)(b.Z,{className:"mr2"})," Copy usage code"]}),(0,s.jsx)(M.R,{}),(0,s.jsxs)(M.Uk,{href:"".concat((0,P.rF)(n),"/databases?edit=").concat(encodeURIComponent(t.name)),className:"nowrap",children:[(0,s.jsx)(V.Z,{className:"mr2","aria-label":"Database actions"}),"Edit details"]})]})]})]})]})]}),null===m||void 0===m?void 0:m.map((e=>(0,s.jsx)(U,{visible:u,db:t,table:e},(0,_.VS)(e)))),(0,s.jsx)(a(),{id:"4add2cea7651a892",children:".hover-bg-only.jsx-4add2cea7651a892:hover{background-color:var(--black-05)}"})]})},z=()=>{const e=(0,f.I0)(),{nodes:t,owner:n,files:r,allowsConnections:a,teamNotebook:i,readOnly:c}=(0,f.v9)((e=>{let{notebook:t}=e;return{nodes:t.model.nodes,owner:t.owner,files:t.files,allowsConnections:(0,D.cE)(t),teamNotebook:(0,D.p0)(t),readOnly:(0,D.os)(t)}})),d=(0,x.useRef)(),{0:h,1:u}=(0,x.useState)([]);(0,x.useEffect)((()=>{const t=[],n=new R.S((async(e,s)=>{e({type:"request_data_sources",mode:"table"});try{for await(const e of s()){if(d.current!==n)return;const{name:s,dialect:r}=e;if("array"===r)continue;const a={name:"".concat(s),type:"cell",dialect:(0,_.Ov)(r)};t.push(a),t.sort(_.zO),u(t.slice())}}catch(r){console.error("Error fetching database clients: ",r)}}));return d.current=n,n.run(e),()=>{d.current=void 0,u([])}}),[e]);const{databaseClients:m}=(0,I.Z)(t),[p]=(0,E.h_)(m.size>0&&a?"".concat(i?"/team/".concat(n.id):"/user","/data-connectors?detail=false"):null),g=(0,x.useMemo)((()=>p?p.map((e=>({name:e.name,type:"DatabaseClient",dialect:(0,_.h8)(e.type)}))):[]),[p]).filter((e=>{let{name:t}=e;return m.has(t)})),v=(0,x.useMemo)((()=>{const e=[];for(const[t,n]of r){const s=(0,S.S5)(n,"sql");null!==s&&e.push({name:t,type:"FileAttachment",dialect:s})}return e}),[r]);return(0,s.jsxs)(A.X,{children:[(0,s.jsx)(A.h,{children:"Databases"}),(0,s.jsxs)("div",{className:"mb3",children:[(0,s.jsxs)("div",{className:"ph3 pt3 f6 fw6 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:l()("flex items-center",a?"near-black":"gray"),children:[(0,s.jsx)(j.Z,{className:l()("mr2 pa1 br2",a?"bg-near-white":"bg-white moon-gray")}),"Database connections"]}),(0,s.jsx)(o.hU,{onClick:()=>e({type:"showModal",modal:"addDatabase"}),icon:k.ZP,"aria-label":"Add database",colorless:!0,disabled:c||!a,className:"nt2 nb2"})]}),!a&&(0,s.jsx)("div",{className:"ph3 pt2 gray f7",children:"Only available in private notebooks"}),g.length>0&&g.map((e=>(0,s.jsx)(O,{db:e,owner:n,readOnly:c},(0,_.x2)(e)))),h.length>0&&(0,s.jsx)("div",{className:"ph3 pt3 mt3 f6 fw6 flex justify-between items-center bt b--light-silver",children:(0,s.jsxs)("div",{className:"flex items-center near-black",children:[(0,s.jsx)(C.Z,{className:"mr2 pa1 br2 bg-near-white"}),"Database cells"]})}),h.length>0&&h.map((e=>(0,s.jsx)(O,{db:e,owner:n,readOnly:c},(0,_.x2)(e)))),v.length>0&&(0,s.jsx)("div",{className:"ph3 pt3 mt3 f6 fw6 flex justify-between items-center bt b--light-silver",children:(0,s.jsxs)("div",{className:"flex items-center near-black",children:[(0,s.jsx)(y.Z,{className:"mr2 pa1 br2 bg-near-white"}),"Database files"]})}),v.length>0&&v.map((e=>(0,s.jsx)(O,{db:e,owner:n,readOnly:c},(0,_.x2)(e))))]})]})};var B=n(34091),q=n(26959),W=n(84193),G=n(74080),K=n(66421),Y=n(56912),$=n(928);const X=()=>{const e=(0,f.I0)(),t=(0,f.v9)((e=>{let{notebook:t}=e;return t})),n=(0,f.v9)((e=>{let{page:{dependenciesPaneSpecifier:t}}=e;return t}));(0,x.useEffect)((()=>{const t=setTimeout((()=>{n&&e({type:"removeDependenciesPaneSpecifier"})}),3e3);return()=>clearTimeout(t)}),[n,e]);const r=(0,Y.uF)(t),a=(0,Y.uF)(t,{ignoreResolutions:!0});return r&&a?(0,s.jsx)(J,{dispatch:e,notebook:t,importData:r,latestImportData:a,selectedSpecifier:n}):(0,s.jsxs)(A.X,{children:[(0,s.jsx)(A.h,{children:"Dependencies"}),(0,s.jsx)("div",{className:"flex justify-center pa3",children:(0,s.jsx)(T.Z,{})})]})},J=e=>{let{dispatch:t,notebook:n,importData:r,latestImportData:i,selectedSpecifier:l}=e;const{directImports:c}=(0,x.useMemo)((()=>(0,Y.$r)(r)),[r]),{0:d,1:h}=(0,x.useState)(new Map),u=(0,x.useRef)(!0);(0,x.useEffect)((()=>{const e=setTimeout((()=>{u.current=!1}),1e3);return()=>clearTimeout(e)}),[]);const m=(0,K.mG)(n),p=(0,D.os)(n)||!(m&&(0,G.QY)(n))||n.isCompare,f=n.trashed?" because the notebook is in the trash":m?n.isCompare?" while in compare mode":"aborted"===n.clientState?" because there was a connection error":n.autosave?n.isReverting?" because the notebook is reverting":(0,D.os)(n)?" because the notebook is read-only":null:" while viewing history":" because you don\u2019t have permission to edit this notebook",g=new Set(Array.from(c).flatMap((e=>{let[t,n]=e;return[t,...n.map((e=>{let[,t]=e;return t}))]}))),v=new Map(Object.entries(i.specifiers).slice(1).flatMap((e=>{let[t,n]=e;return(0,Y.xT)(n)?[]:[[t,$.Z.parse(n.resolution)]]}))),b=new Set(Object.entries(r.specifiers).slice(1).filter((e=>{let[,t]=e;return(0,Y.xT)(t)})).map((e=>{let[t]=e;return t}))),j=new Map([...v].filter((e=>{let[t]=e;var n;return!(null===(n=$.Z.parse(t))||void 0===n?void 0:n.version)}))),V=new Map(n.model.resolutions.filter((e=>"notebook"===e.type)).map((e=>[e.specifier,$.Z.parse(e.value)]))),y=new Map([...j].filter((e=>{let[t,n]=e;const s=V.get(t);return s&&void 0!==s.version&&s.version!==n.version}))),C=[...y.keys()].filter((e=>g.has(e))).length;function k(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=new Map(d);if(e)for(const[t,r]of y)n.set(t,r.version);else for(const[t,r]of j){var s;(null===(s=V.get(t))||void 0===s?void 0:s.version)||n.set(t,r.version)}[...V].forEach((e=>{let[t]=e;v.has(t)||n.set(t,void 0)})),t({type:"toggleDependencyLock",locked:!0,bulk:!0}),h(n)}function N(e,t){if(!v.get(e))return;const n=V.has(e)?V.get(e).version:null,s=new Map(d);t==n?s.delete(e):s.set(e,t),h(s)}return(0,s.jsxs)(A.X,{children:[(0,s.jsx)(A.h,{children:"Dependencies"}),c.size>0?(0,s.jsxs)(s.Fragment,{children:[p?(0,s.jsxs)("div",{className:a().dynamic([["6f12096f9dcdc32a",[u.current?"0.25s":"0s"]]])+" f7 pa3 bb b--light-silver bg-washed-yellow",children:["Dependency changes cannot be made",f,"."]}):null,(0,s.jsx)("div",{className:a().dynamic([["6f12096f9dcdc32a",[u.current?"0.25s":"0s"]]])+" pa3 flex items-center justify-between lh-copy f6 bb b--light-silver",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:a().dynamic([["6f12096f9dcdc32a",[u.current?"0.25s":"0s"]]])+" "+"mr2 ".concat(C?"fw7":""),children:C?(0,D.YY)(C,"update available","updates available"):"No updates available"}),(0,s.jsx)(o.KM,{disabled:p||!C,onClick:()=>k(!0),text:"Update all",className:"nowrap nr2"}),(0,s.jsxs)(M.v2,{children:[(0,s.jsx)(o.hU,{icon:w.v,title:"Notebook import actions",colorless:!0,asMenuButton:!0}),(0,s.jsxs)(M.qy,{position:M.Ly.bottomLeft,children:[(0,s.jsx)(M.sN,{disabled:p,onSelect:k,children:"Lock all"}),(0,s.jsx)(M.sN,{disabled:p,onSelect:function(){t({type:"toggleDependencyLock",locked:!1,bulk:!0}),h(new Map([...V].map((e=>{let[t]=e;return[t,v.has(t)?null:void 0]}))))},children:"Unlock all"})]})]})]})}),(0,s.jsxs)("div",{className:a().dynamic([["6f12096f9dcdc32a",[u.current?"0.25s":"0s"]]])+" pa3",children:[(0,s.jsx)("div",{className:a().dynamic([["6f12096f9dcdc32a",[u.current?"0.25s":"0s"]]])+" pv2 f6 fw6 lh-title near-black",children:"Direct imports"}),Array.from(g).filter((e=>c.has(e))).sort().map((e=>{var t,n;return(0,s.jsx)("div",{"data-cy":"notebook-import",className:a().dynamic([["6f12096f9dcdc32a",[u.current?"0.25s":"0s"]]])+" "+"nl1 nr1 mv1".concat(l===e?" blue-fade":"").concat(b.has(e)?" error":""),children:(0,s.jsx)(Q,{specifier:e,resolvedVersion:d.has(e)?d.get(e):null===(t=V.get(e))||void 0===t?void 0:t.version,latestVersion:null===(n=v.get(e))||void 0===n?void 0:n.version,onLock:t=>N(e,t),isReadonly:p,isDirty:d.has(e)})},e)}))]}),g.size>c.size&&(0,s.jsxs)("div",{className:a().dynamic([["6f12096f9dcdc32a",[u.current?"0.25s":"0s"]]])+" pa3 pt0",children:[(0,s.jsx)("div",{className:a().dynamic([["6f12096f9dcdc32a",[u.current?"0.25s":"0s"]]])+" pv2 f6 fw6 lh-title near-black",children:"Indirect imports"}),Array.from(g).filter((e=>!c.has(e))).sort().map((e=>{var t,n,i;return(0,s.jsx)("div",{"data-cy":"notebook-import",className:a().dynamic([["6f12096f9dcdc32a",[u.current?"0.25s":"0s"]]])+" "+"nl1 nr1 mv1 ".concat(l&&(null===(t=c.get(l))||void 0===t?void 0:t.some((t=>{let[,n]=t;return n===e})))?"blue-fade":"").concat(b.has(e)?" error":""),children:(0,s.jsx)(Q,{specifier:e,resolvedVersion:d.has(e)?d.get(e):null===(n=V.get(e))||void 0===n?void 0:n.version,latestVersion:null===(i=v.get(e))||void 0===i?void 0:i.version,onLock:t=>N(e,t),isReadonly:p,isDirty:d.has(e),importers:r.imports.filter((t=>{let[,n]=t;return n===e})).map((e=>{let[t]=e;return t}))})},e)}))]})]}):(0,s.jsx)("div",{className:a().dynamic([["6f12096f9dcdc32a",[u.current?"0.25s":"0s"]]])+" pa3 mid-gray",children:"This notebook has no dependencies"}),d.size?(0,s.jsxs)("div",{className:a().dynamic([["6f12096f9dcdc32a",[u.current?"0.25s":"0s"]]])+" pa2 sticky bottom-0 right-0 left-0 flex justify-end br3 br--bottom shadow-1-ns bg-white",children:[(0,s.jsx)(o.kq,{text:"Cancel",onClick:()=>h(new Map)}),(0,s.jsx)(o.KM,{text:"Save ".concat((0,D.YY)(d.size,"change")),onClick:function(){d.size&&(t({type:"resolveDependencies",source:"dependenciesPane",trigger:"click",resolutions:[...d].map((e=>{let[t,n]=e;return{type:"notebook",specifier:t,value:void 0===n?null:"".concat(v.get(t).id).concat(null===n?"":"@".concat(n))}}))}),h(new Map))}})]}):null,(0,s.jsx)(a(),{id:"6f12096f9dcdc32a",dynamic:[u.current?"0.25s":"0s"],children:".error.__jsx-style-dynamic-selector a{color:var(--red)}.blue-fade.__jsx-style-dynamic-selector{-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-animation-name:flash;-moz-animation-name:flash;-o-animation-name:flash;animation-name:flash;-webkit-animation-duration:2s;-moz-animation-duration:2s;-o-animation-duration:2s;animation-duration:2s;-webkit-animation-iteration-count:1;-moz-animation-iteration-count:1;-o-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease;-moz-animation-timing-function:ease;-o-animation-timing-function:ease;animation-timing-function:ease;-webkit-animation-delay:".concat(u.current?"0.25s":"0s",";-moz-animation-delay:").concat(u.current?"0.25s":"0s",";-o-animation-delay:").concat(u.current?"0.25s":"0s",";animation-delay:").concat(u.current?"0.25s":"0s","}@-webkit-keyframes flash{0%{background-color:var(--observable-focus-light-blue)}60%{background-color:var(--observable-focus-light-blue)}100%{background-color:#fefefe}}@-moz-keyframes flash{0%{background-color:var(--observable-focus-light-blue)}60%{background-color:var(--observable-focus-light-blue)}100%{background-color:#fefefe}}@-o-keyframes flash{0%{background-color:var(--observable-focus-light-blue)}60%{background-color:var(--observable-focus-light-blue)}100%{background-color:#fefefe}}@keyframes flash{0%{background-color:var(--observable-focus-light-blue)}60%{background-color:var(--observable-focus-light-blue)}100%{background-color:#fefefe}}")})]})},Q=e=>{let{specifier:t,resolvedVersion:n,latestVersion:r,onLock:a,importers:i,isDirty:l,isReadonly:o}=e;const c=$.Z.parse(t);return null===c?(0,s.jsx)(ee,{specifier:t,title:"URL import versions cannot be locked",buttonText:"N/A",locked:!1,rel:"ugc nofollow noreferrer",isReadonly:o,isDirty:l,importers:i,dim:!0}):void 0!==c.version?(0,s.jsx)(ee,{specifier:c,title:'This dependency version is locked via the "@'.concat(c.version,'" in the import statement'),buttonText:"".concat(c.version),locked:!0,isReadonly:o,isDirty:l,importers:i}):void 0===n&&void 0===r?(0,s.jsx)(ee,{specifier:c,title:"Error: specified notebook not found",buttonText:"\u26a0\ufe0e",locked:!1,isReadonly:o,isDirty:l,importers:i,dim:!0}):o?(0,s.jsx)(ee,{specifier:c,title:n?"Version is locked":"Version is not locked",buttonText:"".concat(n||r),locked:!!n,isReadonly:o,isDirty:l,importers:i}):n||void 0===r?n!==r&&r?(0,s.jsx)(ee,{specifier:c,title:"Update this dependency to ".concat(r),buttonText:"".concat(n," \u2192 ").concat(r),locked:!0,isReadonly:o,isDirty:l,importers:i,onLockClick:()=>a(null),onButtonClick:()=>a(r)}):(0,s.jsx)(ee,{specifier:c,title:"This dependency version is the latest",buttonText:"".concat(n),locked:!0,isReadonly:o,isDirty:l,importers:i,onLockClick:()=>a(null)}):(0,s.jsx)(ee,{specifier:c,title:"Lock at version ".concat(r),buttonText:"".concat(r),locked:!1,isReadonly:o,isDirty:l,importers:i,onLockClick:()=>a(r)})},ee=e=>{let{specifier:t,title:n,buttonText:r,locked:a,isReadonly:i,isDirty:l,importers:c,onLockClick:d=null,onButtonClick:h=null,dim:u=!1,rel:m=""}=e;const p=(0,f.I0)();return(0,s.jsxs)("div",{className:"flex items-center justify-between pa1".concat(u?" gray":""),children:[(0,s.jsx)(W.Z,{href:t instanceof $.Z?t.toNotebookURL():t,children:(0,s.jsx)("a",{rel:m,title:"".concat(t).concat(c?"\nImported by:\n".concat(c.join("\n")):""),className:"truncate overflow-hidden nowrap",children:"".concat(t)})}),(0,s.jsxs)("div",{className:"ml2 tr flex justify-end items-center nowrap",title:n,children:[i||null===h?(0,s.jsx)(o.sn,{disabled:!0,onClick:()=>{},style:{lineHeight:.5,color:"var(--".concat(u?"gray":"dark-gray",")")},className:"bn pr1",text:r}):(0,s.jsx)(o.KM,{onClick:()=>{h(),p({type:"upgradeDependency"})},style:{lineHeight:.5},className:"bn mr1",text:r}),(0,s.jsx)("button",{"data-cy":"".concat(a?"Locked":"Unlocked"," ").concat(t),disabled:!i&&null===d,style:{color:l?"var(--blue)":void 0,lineHeight:.5},onClick:d?()=>{p({type:"toggleDependencyLock",locked:!a}),d()}:()=>{},className:"ph0 flex items-center bn bg-transparent  ".concat(null!==d?"hover-black pointer dark-gray":"gray"),children:a?(0,s.jsx)(B.Z,{}):(0,s.jsx)(q.Z,{})})]})]},"notebook-".concat(t))};var te=n(27565),ne=n(27919),se=n(92946),re=n(19671),ae=n(2741),ie=n(48873),le=n(11222),oe=n(4598),ce=n(41799),de=n(99534),he=n(26825),ue=n(19868),me=n(2845),pe=n(8433),xe=n(18582),fe=n(47743),ge=n(11342),ve=n(40821);const be=e=>{let{name:t,provider:n,dispatch:r,mimeType:a,size:i,downloadUrl:l}=e;return(0,s.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,s.jsxs)(M.v2,{children:[(0,s.jsx)(o.hU,{icon:w.v,title:"File actions",colorless:!0,asMenuButton:!0}),(0,s.jsxs)(M.qy,{style:{width:200},children:[(0,s.jsxs)(M.sN,{onSelect:()=>r({type:"cloudFileSnippet",name:t,provider:n,mimeType:a,size:i}),children:[(0,s.jsx)(v.Z,{className:"mr2"})," Insert into notebook"]}),l?(0,s.jsxs)(M.Uk,{onClick:()=>r({type:"downloadCloudFile",provider:n,mimeType:a,size:i}),href:l,children:[(0,s.jsx)(he.Z,{className:"mr2"})," Download"]}):null,(0,s.jsxs)(M.sN,{onSelect:()=>r({type:"removeCloudFile",name:t,provider:n,mimeType:a,size:i}),className:"hover-dark-red hover-bg-washed-red",children:[(0,s.jsx)(pe.Z,{className:"mr2"})," Delete"]})]})]})})},je=e=>{let{name:t,path:n,used:r,hasToken:a,dispatch:i}=e;const l=(0,ge.Xk)(n),{data:o,error:c}=(0,ve.ZP)(a?"/user/token?provider=microsoftData":null,E.a8,{revalidateOnFocus:!1}),{data:d,error:h=c}=(0,ve.ZP)((()=>!c&&o&&l?(0,ge.g4)(n,o.access_token):null),xe.r,{revalidateOnFocus:!1});var u;return(0,s.jsxs)("div",{className:"ma3 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center truncate",children:[(0,s.jsx)(me.ZP,{className:"flex-shrink-0 mr2",style:{width:24,height:24}}),(0,s.jsxs)("div",{className:"f7 truncate",children:[(0,s.jsx)("div",{className:"fw6 dark-gray flex items-center truncate",children:!h&&a&&l?(0,s.jsx)("div",{className:"truncate",children:(0,s.jsx)("a",{href:null!==(u=null===d||void 0===d?void 0:d.webUrl)&&void 0!==u?u:void 0,className:"hover-blue no-underline",target:"_blank",rel:"noreferrer",children:t})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ne.Z,{className:"flex-shrink-0",style:{width:12,height:12},children:(0,s.jsx)("title",{children:null===h||void 0===h?void 0:h.message})}),(0,s.jsx)("div",{className:"ml2 dark-red truncate",children:t})]})}),(0,s.jsxs)("div",{className:"pt1 gray truncate",children:[r?(0,s.jsx)("span",{className:"f7 fw6 blue",children:"In use"}):(0,s.jsx)("span",{className:"f7 gray",children:"Unused"})," \u2022 ",(null===o||void 0===o?void 0:o.provider_username)||"No account connected"]})]})]}),(0,s.jsx)(be,{name:t,mimeType:(0,ge.bh)(d,t),size:(0,ge.ap)(d),downloadUrl:d?d["@microsoft.graph.downloadUrl"]:void 0,provider:"microsoftData",dispatch:i})]})},Ve=e=>{let{name:t,path:n,used:r,hasToken:a,dispatch:i}=e;const l=(0,fe.ty)(n),{data:o,error:c}=(0,ve.ZP)(a?"/user/token?provider=googleData":null,E.a8,{revalidateOnFocus:!1}),{data:d,error:h=c}=(0,ve.ZP)((()=>!c&&o&&l?(0,fe.wA)("".concat(n,"?fields=mimeType,size,webContentLink,webViewLink&supportsAllDrives=true"),o.access_token):null),xe.r,{revalidateOnFocus:!1});var u,m;return(0,s.jsxs)("div",{className:"ma3 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center truncate",children:[(0,s.jsx)(ue.Z,{className:"flex-shrink-0 mr2",style:{width:24,height:24}}),(0,s.jsxs)("div",{className:"f7 truncate",children:[(0,s.jsx)("div",{className:"fw6 dark-gray flex items-center truncate",children:!h&&a&&l?(0,s.jsx)("div",{className:"truncate",children:(0,s.jsx)("a",{href:null===d||void 0===d?void 0:d.webViewLink,className:"hover-blue no-underline",target:"_blank",rel:"noreferrer",children:t})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ne.Z,{className:"flex-shrink-0",style:{width:12,height:12},children:(0,s.jsx)("title",{children:null===h||void 0===h?void 0:h.message})}),(0,s.jsx)("div",{className:"ml2 dark-red truncate",children:t})]})}),(0,s.jsxs)("div",{className:"pt1 gray truncate",children:[r?(0,s.jsx)("span",{className:"f7 fw6 blue",children:"In use"}):(0,s.jsx)("span",{className:"f7 gray",children:"Unused"})," \u2022 ",(null===o||void 0===o?void 0:o.provider_username)||"No account connected"]})]})]}),(0,s.jsx)(be,{name:t,mimeType:null!==(u=null===d||void 0===d?void 0:d.mimeType)&&void 0!==u?u:"",size:+(null!==(m=null===d||void 0===d?void 0:d.size)&&void 0!==m?m:0),downloadUrl:null===d||void 0===d?void 0:d.webContentLink,provider:"googleData",dispatch:i})]})},ye=e=>{var{specifier:t}=e,n=(0,de.Z)(e,["specifier"]);switch(t.provider){case"microsoftData":return(0,s.jsx)(je,(0,ce.Z)({},t,n));case"googleData":return(0,s.jsx)(Ve,(0,ce.Z)({},t,n))}};var we=n(69396),Ce=n(58127),ke=n(88725);const Ne=e=>{let{children:t,onDrop:n,dispatch:r,fileSource:a,loginSource:i,currentUser:l,readOnly:o,disabled:c}=e;const{isDraggingOver:d,dragAndDropEvents:u}=(0,Ce.Y)((e=>{let{dataTransfer:{files:t}}=e;(0,K.Yb)(l)?((e=>{r({type:"attachLocalFiles",files:e,source:a,trigger:"dragAndDrop"})})(Array.from(t)),n&&n(Array.from(t))):l||r({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:"dragAndDrop",source:i})}));return(0,s.jsxs)("div",(0,we.Z)((0,ce.Z)({className:"relative mb3","data-cy":"drop-target"},o||c?null:u),{children:[t,d&&(0,s.jsxs)("div",{className:"flex absolute nb3 right-0 bottom-0 top-0 left-0 tc bg-near-white b--light-silver o-90 b--dashed justify-center flex-column z-max bw1",children:[(0,s.jsx)("div",{className:"f6 fw6 near-black",children:"Upload files"}),(0,s.jsxs)("div",{className:"f7 fw5 dark-gray mt2",children:[(0,h.BU)(ke.D_)," maximum per file"]})]})]}))};var Ze=e=>(0,s.jsxs)("svg",(0,we.Z)((0,ce.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2"},e),{children:[(0,s.jsx)("path",{d:"M4 9L4 3C4 2.44771 4.44772 2 5 2L11.0001 2C11.5523 2 12 2.44768 12 2.99992V2.99992"}),(0,s.jsx)("path",{d:"M12 7L12 13C12 13.5523 11.5523 14 11 14L5 14C4.44771 14 4 13.5523 4 13V13"}),(0,s.jsx)("path",{d:"M1 6L4 9L7 6"}),(0,s.jsx)("path",{d:"M15 10L12 7L9 10"})]})),Le=n(26674);const Me=e=>{let{file:t,dispatch:n,used:r,currentUser:a,isFileDeletable:i,canDeleteFile:l,pane:c,readOnly:d}=e;function h(e){n({type:"insertFile",file:e})}function u(e,t,s){(0,K.Yb)(a)?n({type:"showModal",modal:"replaceFile",modalProps:{fileToReplace:e}}):a||n({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:t,source:s})}return(0,s.jsxs)("div",{className:"flex items-center justify-between ma3","data-cy":"file-item",children:[(0,s.jsx)("div",{className:"overflow-x-hidden",children:(0,s.jsx)(Le.J,{file:t,used:r})}),(0,s.jsxs)("div",{className:"flex flex-shrink-0 items-center",children:[(0,s.jsx)(o.hU,{icon:r?Ze:v.Z,onClick:r?()=>u(t,"click","".concat(c,"PaneReplaceFileButton")):()=>h(t),title:r?"Replace file":"Insert into notebook"}),(0,s.jsxs)(M.v2,{children:[(0,s.jsx)(o.hU,{icon:w.v,title:"File actions",colorless:!0,asMenuButton:!0}),(0,s.jsxs)(M.qy,{style:{width:200},children:[(0,s.jsxs)(M.sN,{onSelect:()=>h(t),disabled:d,children:[(0,s.jsx)(v.Z,{className:"mr2"})," Insert into notebook"]}),(0,s.jsxs)(M.sN,{onSelect:()=>n({type:"copyFileCode",file:t}),children:[(0,s.jsx)(b.Z,{className:"mr2"})," Copy usage code"]}),(0,s.jsx)(M.R,{}),"downloadUrl"in t&&(0,s.jsxs)(M.Uk,{onClick:()=>n({type:"downloadFile",file:t}),href:t.downloadUrl,children:[(0,s.jsx)(he.Z,{className:"mr2"})," Download"]}),(0,s.jsxs)(M.sN,{onSelect:()=>u(t,"click","".concat(c,"PaneMenuReplace")),disabled:!r||d,children:[(0,s.jsx)(Ze,{className:"mr2"})," Replace file"]}),l&&!d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(M.R,{}),(0,s.jsxs)(M.sN,{disabled:!i,onSelect:()=>n({type:"showModal",modal:"deleteFile",modalProps:{name:t.name}}),className:"hover-dark-red hover-bg-washed-red",children:[(0,s.jsx)(pe.Z,{className:"mr2"})," Delete"]})]}):null]})]})]})]})},Se=e=>{let{title:t,icon:n,"aria-label":r,onAdd:i,disabled:c,allowsPrivate:d=!0}=e;return(0,s.jsxs)("div",{className:"jsx-335f9f217f61bc08 "+(l()("ph3 pt3 f6 fw6 lh-title flex items-center justify-between section-header",d?"near-black":"gray")||""),children:[(0,s.jsxs)("span",{className:"jsx-335f9f217f61bc08 flex items-center",children:[x.createElement(n,{className:l()("mr2 pa1 br2 border-box",d?"bg-near-white":"bg-white moon-gray"),style:{width:24,height:24}}),t]}),(0,s.jsx)(o.hU,{onClick:i,icon:k.ZP,"aria-label":r,colorless:!0,disabled:c,className:"nt2 nb2"}),(0,s.jsx)(a(),{id:"335f9f217f61bc08",children:".section-header.jsx-335f9f217f61bc08{border-top:1px solid var(--light-silver);margin-top:var(--spacing-medium)}.section-header.jsx-335f9f217f61bc08:first-of-type{border:none;margin-top:0}"})]})},He=e=>{let{files:t,used:n,currentUser:r,notebook:a,dispatch:i}=e;t=[...t].sort(((e,t)=>e.name<t.name?-1:1));const l=t.filter((e=>n.has(e.name))),o=t.filter((e=>!n.has(e.name))),c=e=>(0,s.jsx)(Me,{isFileDeletable:(0,G.cn)(e,a),canDeleteFile:(0,K.uP)(e,a),file:e,dispatch:i,used:n.has(e.name),currentUser:r,pane:"files",readOnly:(0,D.os)(a)},e.name),d=t.filter((e=>"pending"!==e.status&&"local"!==e.status)).reduce(((e,t)=>e+(t.size||0)),0),u=(0,s.jsxs)(s.Fragment,{children:["File attachments"," ",d>0&&(0,s.jsxs)("span",{className:"ml1 gray",children:["(",(0,h.BU)(d),")"]})]}),m=!(0,G.j5)(r,a);return 0===t.length&&m?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Se,{title:u,icon:y.Z,"aria-label":"Upload files",disabled:(0,D.os)(a)||m,onAdd:()=>{(0,K.Yb)(r)?(i({type:"notebookFilePickerOpened",source:"filesPane",trigger:"click"}),(0,ae.Z)().then((e=>i({type:"attachLocalFiles",files:e,source:"filesPane",trigger:"click"})))):r||i({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:"click",source:"filesPaneAttachFileButton"})}}),l.map(c),o.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Re,{children:"Unused"}),o.map(c)]}):null]})},Re=e=>{let{children:t}=e;return(0,s.jsxs)("div",{className:"flex ma3",children:[(0,s.jsx)("span",{className:"gray mr1",children:t}),(0,s.jsx)("span",{className:"flex-grow-1 bb b--light-silver",style:{height:9}})]})},Ee=e=>{let{cloudFiles:t,notebook:n,currentUser:r,used:a,dispatch:i}=e;const l=t.map((e=>(0,ie.a)(e))).filter(le.K),[o]=(0,E.h_)(r&&(0,D.cE)(n)&&l.length>0&&"/user/tokens");function c(e,t){(0,re.MR)((0,re.ym)({type:"notebook:manage:cloudFileAuth",notebook:n,currentUser:r,data:{provider:e,alreadyAuthenticated:t},eventVersion:1}))}return(0,D.cE)(n)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Se,{icon:se.ZP,title:"Cloud files","aria-label":"Add cloud file",onAdd:()=>i({type:"showModal",modal:"addCloudFile"}),disabled:(0,D.os)(n)}),(0,D.vi)(n).map((e=>(0,s.jsx)(te.E,{provider:e,alreadyAuthenticated:!!o&&o.some((t=>t.provider===e)),onAuth:c,children:(0,s.jsxs)("div",{className:"ph3 mt2 f7 flex items-center",children:[(0,s.jsx)(ne.Z,{className:"mr2 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"mr1 mid-gray",children:["This notebook encountered an error importing"," ",oe.c[e].name," files. Please"]}),(0,s.jsx)("button",{type:"submit",className:"blue pointer underline-hover bg-transparent pa0 bn",children:"connect your account"}),"."]})]})},e))),o&&l.length?(0,s.jsxs)(s.Fragment,{children:[Object.entries(oe.c).map((e=>{let[t,n]=e;return l.some((e=>e.provider===t))&&(0,s.jsx)(te.E,{provider:t,alreadyAuthenticated:o.some((e=>e.provider===t)),onAuth:c,children:(0,s.jsxs)("div",{className:"ph3 mt2 f7",children:[(0,s.jsxs)("span",{className:"mr1 mid-gray",children:["This notebook uses ",n.name," files."]}),(0,s.jsx)("button",{className:"blue pointer underline-hover bg-transparent pa0 bn",type:"submit",children:o.some((e=>e.provider===t))?"Switch account":"Connect account"})]})},t)})),l.map((e=>(0,s.jsx)(ye,{specifier:e,used:a.has(e.specifier),dispatch:i,hasToken:o.some((t=>t.provider===e.provider))},e.specifier)))]}):null]}):(0,P.Hw)(n)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Se,{icon:se.ZP,title:"Cloud files",disabled:!0,allowsPrivate:!1,onAdd:()=>{}}),(0,s.jsx)("div",{className:"ph3 pt2 gray f7",children:"Only available in private notebooks"})]}):null},_e=(0,f.$j)((e=>{let{notebook:t,currentUser:n}=e;return{notebook:t,currentUser:n}}),(e=>({dispatch:e})))((e=>{let{notebook:t,currentUser:n,dispatch:r}=e;const{model:{nodes:a,resolutions:i},files:l}=t,{fileAttachments:o}=(0,I.Z)(a),c=i.filter(D.HC),d=(0,D.Pu)(l);return(0,s.jsxs)(A.X,{children:[(0,s.jsx)(A.h,{children:"Files"}),(0,s.jsxs)(Ne,{dispatch:r,currentUser:n,fileSource:"filesPane",loginSource:"filesPaneDragAndDrop",readOnly:(0,D.os)(t),disabled:!(0,G.j5)(n,t),children:[(0,s.jsx)(He,{files:d,used:o,currentUser:n,dispatch:r,notebook:t}),(0,s.jsx)(Ee,{dispatch:r,notebook:t,currentUser:n,cloudFiles:c,used:o})]})]})}));var De=n(63527),Fe=n(11233),Ie=n(60803),Pe=n(60138),Te=n(51289),Ae=n(40178),Ue=n(19170);const Oe=(0,De.V)([["Enter",e=>{let{dispatch:t}=e;return t({type:"selectNextSearchResult"}),!0}],["Shift-Enter",e=>{let{dispatch:t}=e;return t({type:"selectPreviousSearchResult"}),!0}],["Escape",e=>{let{dispatch:t}=e;return t({type:"dismissPane"}),!0}]]),ze=(0,f.$j)((e=>{let{notebook:t}=e;return{regexSearch:t.regexSearch,searchTerm:t.searchTerm,searchResults:t.searchResults,selectedSearchResult:t.selectedSearchResult}}),(e=>({dispatch:e})))((e=>{let{regexSearch:t,searchTerm:n,searchResults:r,selectedSearchResult:a,dispatch:i}=e;function l(e){i({type:"setSearchTerm",searchTerm:e})}const c=(0,Ue._)(r,a),d=r&&void 0!==c,h=function(){if(n&&t)try{new RegExp(n,"gu")}catch(e){return e.message||"invalid regex"}}(),u=(0,x.useRef)(null);return(0,x.useEffect)((()=>{u.current&&u.current!==document.activeElement&&u.current.select()}),[]),(0,s.jsxs)("div",{className:"mh3",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(Fe.x,{type:"text",placeholder:"Find",value:n,ref:u,onChange:e=>{let{target:{value:t}}=e;return l(t)},className:"flex-auto",hasError:h,onKeyDown:function(e){Oe({dispatch:i},e)&&(e.preventDefault(),e.stopPropagation())},leftElement:(0,s.jsx)("div",{children:(0,s.jsx)(Pe.Z,{className:"db moon-gray"})}),rightElement:(0,s.jsx)(o.hU,{icon:g.Z,onClick:()=>l(""),style:{width:28,height:28,marginRight:2},colorless:!0,disabled:!n})}),(0,s.jsxs)("div",{className:"flex ml2",children:[(0,s.jsx)(o.hA,{icon:()=>(0,s.jsx)(Ie.Z,{className:d?"":"moon-gray",style:{transform:"rotate(-180deg)"}}),title:"Previous search result ".concat((0,Ae.ZP)(Te.Mq?"Shift-Mod-G":"Shift-F3")),onClick:()=>i({type:"selectPreviousSearchResult"}),disabled:!d,style:{borderRadius:"4px 0 0 4px",width:32,height:32},colorless:!0}),(0,s.jsx)(o.hA,{icon:()=>(0,s.jsx)(Ie.Z,{className:d?"":"moon-gray"}),title:"Next search result ".concat((0,Ae.ZP)(Te.Mq?"Mod-G":"F3")),onClick:()=>i({type:"selectNextSearchResult"}),disabled:!d,style:{borderRadius:"0 4px 4px 0",width:32,height:32,marginLeft:1},colorless:!0})]})]}),h&&(0,s.jsx)("div",{className:"red mt2",children:h})]})}));var Be=n(17764),qe=n(40287),We=n(95024),Ge=n(75063);const Ke=(0,De.V)([["Enter",e=>{let{dispatch:t}=e;return t({type:"replaceCurrent",trigger:"keypress",source:"findPane"}),!0}],["Mod-Enter",e=>{let{dispatch:t}=e;return t({type:"replaceAll",trigger:"keypress",source:"findPane"}),!0}]]),Ye=(0,f.$j)((e=>{let{page:t,notebook:n}=e;var s;return{replaceInputExpanded:t.replaceInputExpanded,replaceTerm:n.replaceTerm,canReplace:!!n.selectedSearchResult&&!!(null===(s=n.searchResults)||void 0===s?void 0:s.size)&&!(0,D.os)(n)}}),(e=>({dispatch:e})))((e=>{let{canReplace:t,replaceInputExpanded:n,replaceTerm:r,dispatch:a}=e;return(0,s.jsxs)("div",{className:"flex flex-column mt3 pa3 bt b--light-silver",children:[(0,s.jsxs)("button",{className:"f6 fw6 bn flex items-center bg-transparent b--transparent relative pointer pa0",onClick:()=>a({type:"toggleReplaceInputExpanded"}),children:[n?(0,s.jsx)(Be.Z,{className:"mr1"}):(0,s.jsx)(qe.Z,{className:"mr1"}),"Replace"]}),n&&(0,s.jsxs)("div",{className:"flex mt2",children:[(0,s.jsx)(Fe.x,{type:"text",placeholder:"Replace",value:r,onChange:e=>{let{target:{value:t}}=e;return a({type:"setReplaceTerm",replaceTerm:t})},className:"flex-auto",leftElement:(0,s.jsx)(Ze,{className:"moon-gray"}),onKeyDown:function(e){Ke({dispatch:a},e)&&(e.preventDefault(),e.stopPropagation())},rightElement:(0,s.jsx)(o.hU,{icon:g.Z,onClick:()=>a({type:"setReplaceTerm",replaceTerm:""}),style:{width:28,height:28,marginRight:2},colorless:!0,disabled:!r})}),(0,s.jsxs)("div",{className:"flex ml2",children:[(0,s.jsx)(o.hA,{icon:()=>(0,s.jsx)(Ge.x,{className:t?"":"moon-gray"}),title:"Replace current ".concat((0,Ae.ZP)("Enter")),onClick:()=>a({type:"replaceCurrent",trigger:"click",source:"findPane"}),disabled:!t,style:{borderRadius:"4px 0 0 4px",width:32,height:32},colorless:!0}),(0,s.jsx)(o.hA,{icon:()=>(0,s.jsx)(We.E,{className:t?"":"moon-gray"}),title:"Replace all ".concat((0,Ae.ZP)("Mod-Enter")),onClick:()=>a({type:"replaceAll",trigger:"click",source:"findPane"}),disabled:!t,style:{borderRadius:"0 4px 4px 0",width:32,height:32,marginLeft:1},colorless:!0})]})]})]})}));var $e=n(33494),Xe=n(31536),Je=n(72760);const Qe=e=>{let{selectedSearchResult:t,node:n,searchResults:r,dispatch:a}=e;const i=Xe.qz[n.mode].icon,l=(0,Je.u2)(n),o=(0,x.useRef)(null);return(0,x.useEffect)((()=>{o.current&&t&&(0,$e.zT)(o.current)}),[t]),(0,s.jsxs)("div",{className:"ma3",children:[(0,s.jsxs)("div",{className:"mt3 mb1 flex items-center dark-gray monospace-bold",children:[(0,s.jsx)(i,{className:"mr1"}),l||(0,s.jsxs)("span",{className:"i",children:["unnamed (#",n.id,")"]})]}),r.map(((e,r)=>{const i=(null===t||void 0===t?void 0:t.nodeResultIndex)===r&&t.nodeId===n.id;return(0,s.jsx)("div",{className:"mh3",ref:i?o:null,"data-cy":"find-result-row",children:(0,s.jsxs)("button",{className:"w-100 pa1 tl bn br2 monospace ".concat(i?"bg-blue white":"bg-transparent hover-bg-light-silver"," "),onClick:()=>a({type:"selectSearchResult",selectedSearchResult:{nodeId:n.id,nodeResultIndex:r}}),children:[(0,s.jsx)("span",{className:i?"o-70":"o-50",children:e.beforeText}),(0,s.jsx)("span",{className:"br1\n                ".concat(i?"bg-observable-orange black":"bg-observable-yellow","\n              "),children:e.termText}),(0,s.jsx)("span",{className:i?"o-70":"o-50",children:e.afterText})]})},r)}))]})},et=(0,f.$j)((e=>{let{notebook:t}=e;return{model:t.model,selectedSearchResult:t.selectedSearchResult,searchResults:t.searchResults}}),(e=>({dispatch:e})))((e=>{let{model:t,selectedSearchResult:n,searchResults:r,dispatch:a}=e;if(!r)return null;if(!(0,Ue.n)(r))return(0,s.jsx)("div",{className:"pa3",children:"No results"});const i=[];for(const l of t.nodes){const e=r.get(l.id);e&&i.push((0,s.jsx)(Qe,{node:l,selectedSearchResult:n,searchResults:e,dispatch:a},l.id))}return(0,s.jsx)("div",{className:"overflow-y-auto flex-auto bt b--light-silver",children:(0,s.jsx)("div",{children:i})})}));var tt=n(16691);const nt=(0,f.$j)((e=>{let{page:t,notebook:n}=e;return{findOptionsInputExpanded:t.findOptionsInputExpanded,caseSensitiveSearch:n.caseSensitiveSearch,wholeWordSearch:n.wholeWordSearch,regexSearch:n.regexSearch}}),(e=>({dispatch:e})))((e=>{let{findOptionsInputExpanded:t,caseSensitiveSearch:n,wholeWordSearch:r,regexSearch:a,dispatch:i}=e;return(0,s.jsxs)("div",{className:"flex flex-column pa3 bt b--light-silver",children:[(0,s.jsxs)("button",{className:"f6 fw6 bn flex items-center bg-transparent b--transparent relative pointer pa0",onClick:()=>i({type:"toggleFindOptionsExpanded"}),children:[t?(0,s.jsx)(Be.Z,{className:"mr1"}):(0,s.jsx)(qe.Z,{className:"mr1"}),"Settings"]}),t&&(0,s.jsxs)("div",{className:"mt2",children:[(0,s.jsx)(tt.X,{checked:n,onChange:()=>i({type:"toggleCaseSensitiveSearch"}),label:"Case sensitive"}),(0,s.jsx)(tt.X,{checked:r,onChange:()=>i({type:"toggleWholeWordSearch"}),label:"Whole word"}),(0,s.jsx)(tt.X,{checked:a,onChange:()=>i({type:"toggleRegexSearch"}),label:"Regular expression"})]})]})})),st=(0,f.$j)((e=>{let{notebook:t}=e;return{searchResults:t.searchResults,selectedSearchResult:t.selectedSearchResult}}),null)((e=>{let{searchResults:t,selectedSearchResult:n}=e;const r=(0,d.GS)("(max-width: 960px)",!1),a=(0,Ue._)(t,n),i=(0,Ue.n)(t);return(0,s.jsxs)("div",{className:"flex align-items pa3 ".concat(r?"mr3 pr4":""),children:[(0,s.jsx)("div",{className:"f5 fw6 near-black flex-auto lh-title",children:"Find and replace"}),(0,s.jsx)("div",{className:"f6 dark-gray",children:t?void 0===n?(0,s.jsx)(s.Fragment,{children:i}):(0,s.jsxs)(s.Fragment,{children:[a+1,(0,s.jsx)("span",{className:"gray",children:" of "}),i]}):null})]})})),rt=(0,De.V)([["ArrowDown","Shift-ArrowDown",e=>{let{dispatch:t}=e;return t({type:"selectNextSearchResult"}),!0}],["ArrowUp","Shift-ArrowUp",e=>{let{dispatch:t}=e;return t({type:"selectPreviousSearchResult"}),!0}]]),at=(0,f.$j)(null,(e=>({dispatch:e})))((e=>{let{dispatch:t}=e;return(0,s.jsxs)(A.X,{className:"flex flex-column",onKeyDown:function(e){rt({dispatch:t},e)&&(e.preventDefault(),e.stopPropagation())},children:[(0,s.jsxs)("div",{className:"flex flex-column",children:[(0,s.jsx)(st,{}),(0,s.jsx)(ze,{}),(0,s.jsx)(Ye,{}),(0,s.jsx)(nt,{})]}),(0,s.jsx)(et,{})]})}));var it=n(62990);const lt=6e5,ot=new Set(["revert"]),ct=new Set(["pin","unpin"]);function dt(e,t){if(!e.length)return;const n=[];let s;for(let r=0;r<e.length;r++)e[r].relevant?(s&&n.push(s),n.push([r,r]),s=void 0):s?s[1]=r:s=[r,r],delete e[r].relevant;return s&&n.push(s),{folds:n,events:e,title:t}}var ht=n(87769),ut=n(93797),mt=n(99414),pt=n(71066),xt=n(89642),ft=n(8385);function gt(e){const{node_id:t}=e,{node_name:n,node_value_start:s}=e,r=n||s?"":" empty cell";switch(e.type){case"insert_node":return"Added".concat(r);case"modify_node":return e.is_new?"Added".concat(r):e.node_old_name?"Renamed":"Edited".concat(r);case"remove_node":return"Removed".concat(r);case"move_node":return"Moved".concat(r);case"pin_node":return"Pinned".concat(r);case"unpin_node":return"Unpinned".concat(r);case"modify_title":return"Titled \u201c".concat(e.title,"\u201d");case"modify_license":return null===e.license?"Removed license":"Licensed ".concat((0,xt.ax)(e.license));case"modify_copyright":return""!==e.copyright?"Copyright".concat(e.copyright.replace(/^copyright\b/i,"")):"Removed copyright notice";case"revert":return"Reverted to ".concat(t);case"create":return e.fork?"Forked from \u201c".concat(e.fork.title,"\u201d"):"Created";case"mode_node":{const{label:t}=Xe.qz[e.mode]||{label:""};return"Mode ".concat(t)}case"resolve_dependency":{var a,i;const{specifier_type:t,specifier:n,value:s}=e;if("notebook"!==t)return"";if(!s||!(null===(a=$.Z.parse(s))||void 0===a?void 0:a.version))return"Version lock for ".concat(n," was removed");const r=null===(i=$.Z.parse(s))||void 0===i?void 0:i.version;return"Locked ".concat(n," to version ").concat(r)}case"modify_data":return"Edited".concat(r);case"modify_name":return e.node_old_name?"Renamed":"Named";default:return""}}function vt(e){const{merge:t}=e;if(t){const e="Merged \u201c".concat(t.document.title,"\u201d");return(0,s.jsx)("span",{title:e,children:e})}const{node_old_name:n,node_name:r,node_value_start:a}=e,i=gt(e);return(0,s.jsxs)("span",{title:"".concat(i," ").concat("Renamed"===i?"".concat(n," to "):"").concat(r||a||""),children:[i," ","Renamed"===i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{fontSize:"0.8rem"},className:"code",children:n})," ","to"," "]}),r||a?(0,s.jsxs)("span",{style:{fontSize:"0.8rem"},className:"code",children:[r||a," "]}):null]})}const bt=e=>{let{events:t,isVersioned:n,currentVersion:r,dispatch:i}=e;const[,...l]=t,o=!!l.length,c=!t.slice(1).some((e=>e.version===r)),{0:h,1:u}=(0,x.useState)(!c),m=(0,d.GS)(d.ro),p=m?{width:"2em",height:"2em"}:{width:"1.5em",height:"1.5em"},f=m?"3em":"2em";return(0,s.jsx)(s.Fragment,{children:t.map(((e,t)=>{if(c&&!h&&t>0)return null;const l=function(e){if(e.publish_time)return ht.Z;switch(e.type){case"create":return mt.Z;case"modify_license":case"modify_copyright":return ut.Z;case"pin_node":case"unpin_node":return pt.Z;case"resolve_dependency":{var t;const{specifier_type:n,value:s}=e;return"notebook"!==n||s&&(null===(t=$.Z.parse(s))||void 0===t?void 0:t.version)?B.Z:q.Z}case"revert":return N.Z;default:return V.Z}}(e),d=0===t,g=n&&e.version===r,v=g?"bg-light-blue":"bg-transparent",b=g?"white":d?"black":"gray",j=c?g?"white":"near-black":"moon-gray",y=c?g?"hover-light-silver":"hover-dark-gray":"",w=g?"white":e.latest_publish?"blue":"gray",C=g?"o-60 white":"moon-gray",{user:k}=e.merge?e.merge:e;function Z(){i({type:"loadVersion",version:e.version})}return(0,s.jsxs)(x.Fragment,{children:[(0,s.jsx)("div",{className:a().dynamic([["5dee8b5464a935d5",[f]]])+" "+"cell cellStart ".concat(v),children:d&&o&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),u(!h)},disabled:!c,style:{width:m?f:"auto"},title:h?"Collapse history range":"Expand history range",className:a().dynamic([["5dee8b5464a935d5",[f]]])+" "+"flex items-center justify-center pointer f7 lh-solid fw6 bg-transparent b--transparent br2 bn pa0 h-100 ".concat(j," ").concat(y),children:h?(0,s.jsx)(Be.Z,(0,ce.Z)({},p)):(0,s.jsx)(qe.Z,(0,ce.Z)({},p))})}),(0,s.jsx)("div",{title:e.time&&(0,it.Dh)(e.time),onClick:Z,className:a().dynamic([["5dee8b5464a935d5",[f]]])+" "+"cell ".concat(v," fw5 ").concat(b," tr nowrap"),children:e.time&&(0,it.jD)(e.time)}),(0,s.jsx)("div",{title:(0,P.RX)(k),onClick:Z,className:a().dynamic([["5dee8b5464a935d5",[f]]])+" "+"cell ".concat(v),children:(0,s.jsx)(ft.q,{user:k,size:16,className:"v-top br-pill"})}),(0,s.jsx)("div",{onClick:Z,className:a().dynamic([["5dee8b5464a935d5",[f]]])+" "+"cell ".concat(v),children:(0,s.jsx)(l,{className:a().dynamic([["5dee8b5464a935d5",[f]]])+" "+(w||"")})}),(0,s.jsx)("button",{onClick:Z,tabIndex:0,className:a().dynamic([["5dee8b5464a935d5",[f]]])+" "+"cell br0 bn ".concat(v," ").concat(w),children:e.latest_publish?(0,s.jsx)("span",{title:"Published (latest). ".concat(gt(e)),className:a().dynamic([["5dee8b5464a935d5",[f]]])+" truncate",children:"Published (latest)"}):e.publish_time?(0,s.jsx)("span",{title:"Published. ".concat(gt(e)),className:a().dynamic([["5dee8b5464a935d5",[f]]])+" truncate",children:"Published"}):(0,s.jsx)("span",{className:a().dynamic([["5dee8b5464a935d5",[f]]])+" truncate",children:vt(e)})}),(0,s.jsx)("div",{onClick:Z,className:a().dynamic([["5dee8b5464a935d5",[f]]])+" "+"cell cellEnd ".concat(v," tr"),children:(0,s.jsxs)("span",{className:a().dynamic([["5dee8b5464a935d5",[f]]])+" "+(C||""),children:["v",e.version]})}),(0,s.jsx)(a(),{id:"5dee8b5464a935d5",dynamic:[f],children:".cell.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:4px;height:".concat(f,";max-width:100%;overflow:hidden;cursor:pointer}button.cell.__jsx-style-dynamic-selector{padding:4px 2px}.cellStart.__jsx-style-dynamic-selector{-webkit-border-top-left-radius:4px;-moz-border-radius-topleft:4px;border-top-left-radius:4px;-webkit-border-bottom-left-radius:4px;-moz-border-radius-bottomleft:4px;border-bottom-left-radius:4px;margin-left:var(--spacing-small)}.cellEnd.__jsx-style-dynamic-selector{-webkit-border-top-right-radius:4px;-moz-border-radius-topright:4px;border-top-right-radius:4px;-webkit-border-bottom-right-radius:4px;-moz-border-radius-bottomright:4px;border-bottom-right-radius:4px;margin-right:var(--spacing-small);padding-right:var(--spacing-small)}")})]},t)}))})},jt=e=>{let{range:{folds:t,events:n,title:r},isVersioned:i,currentVersion:l,dispatch:o,isFirst:c}=e;return n.length?(0,s.jsxs)(s.Fragment,{children:[!c&&(0,s.jsx)("div",{style:{height:1},className:"jsx-72f872caad23174c spacer flex-auto mt3 bg-light-silver",children:(0,s.jsx)(a(),{id:"72f872caad23174c",children:".spacer.jsx-72f872caad23174c{grid-column-start:1;grid-column-end:7}"})}),(0,s.jsxs)("div",{className:"jsx-d962454df8eed240 pt3 pb2 ph3 flex rangeHeader",children:[(0,s.jsx)("span",{className:"jsx-d962454df8eed240 mr1 f6 fw6 near-black",children:r}),(0,s.jsx)(a(),{id:"d962454df8eed240",children:".rangeHeader.jsx-d962454df8eed240{grid-column-start:1;grid-column-end:7}"})]}),t.map(((e,t)=>(0,s.jsx)(bt,{events:n.slice(e[0],e[1]+1),isVersioned:i,dispatch:o,currentVersion:l},"".concat(r).concat(t))))]}):null},Vt=(0,f.$j)((e=>{let{notebook:t,currentUser:n}=e;return{notebook:t,currentUser:n}}))((e=>{let{notebook:t,currentUser:n}=e;const{suggestionsTo:r}=t;if(!r.length)return null;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"jsx-448bdbec10f793c0 pt3 pb1 ph3 flex suggestionsEntry",children:[(0,s.jsx)("span",{className:"jsx-448bdbec10f793c0 mr1 f6 fw6 near-black",children:"Suggestions"}),(0,s.jsx)("hr",{style:{height:1,marginTop:"0.65em"},className:"jsx-448bdbec10f793c0 flex-auto mt2 bn bg-light-gray v-base"})]}),r.map(((e,r)=>{const{creator:a,description:i,from_id:l,to_id:o}=e;return(0,s.jsx)("div",{title:"View suggestion",className:"jsx-448bdbec10f793c0 br2 pa2 mt2 mh3 bg-washed-yellow suggestionsEntry",children:(0,s.jsx)(W.Z,{href:"/compare/".concat(o,"...").concat(l),children:(0,s.jsxs)("a",{onClick:()=>function(e){let{to_id:s,to_owner:r,from_id:a,from_owner:i}=e;(0,re.MR)((0,re.ym)({type:"notebook:view:suggestion",data:{base:(0,re.tb)({id:s,owner:r},n),target:(0,re.tb)({id:a,owner:i},n),trigger:"click",source:"historyPane"},eventVersion:1,notebook:t,currentUser:n}))}(e),className:"jsx-448bdbec10f793c0 no-underline",children:[(0,s.jsxs)("div",{className:"jsx-448bdbec10f793c0 flex items-center",children:[(0,s.jsx)(ft.q,{user:a,className:"br-100 mr2",size:16}),(0,P.RX)(a)]}),(0,s.jsxs)("div",{className:"jsx-448bdbec10f793c0 mid-gray f7 pt2",children:["\u201c",i,"\u201d"]})]})})},r)})),(0,s.jsx)(a(),{id:"448bdbec10f793c0",children:".suggestionsEntry.jsx-448bdbec10f793c0{grid-column-start:1;grid-column-end:7}"})]})})),yt=x.memo((function(e){let{history:t,forkOf:n,autosave:r,version:i,dispatch:l}=e;const o=t&&function(e,t){let{users:n,events:s,merges:r,identifiers:a}=e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const l=new Map;for(const b of n)l.set(b.id,b);for(const b of r)l.set(b.user.id,b.user);const o=l.size;s=s.slice().reverse().filter((e=>"noop"!==e.type));const c=[];for(let b=0;b<s.length;b++){const e=s[b],{user_id:n,publish_user_id:a,time:i,publish_time:o}=e,d=(0,de.Z)(e,["user_id","publish_user_id","time","publish_time"]),h=r.find((t=>e.version===t.to_end_version));c.push((0,we.Z)((0,ce.Z)({},d),{user:l.get(n),publish_user:l.get(a),time:i,publish_time:o,fork:t&&t.version===e.version?t:null,merge:h,relevant:!!(0===b||h||e.publish_time||ot.has(e.type)||"create"===e.type&&t||s[b-1].time.getTime()-e.time.getTime()>lt)&&!ct.has(e.type)}))}const d=new Map,h=new Map,u=new Map,m=new Map(a);for(let b=c.length-1;b>=0;b--){const e=c[b];switch(e.type){case"modify_node":case"insert_node":{const t=d.get(e.node_id);t&&e.node_name&&t!==e.node_name&&(e.node_old_name=t),d.set(e.node_id,e.node_name),h.set(e.node_id,e.node_value_start);break}case"modify_data":case"move_node":case"pin_node":case"unpin_node":case"remove_node":d.get(e.node_id)?e.node_name=d.get(e.node_id):h.get(e.node_id)?e.node_value_start=h.get(e.node_id):m.has(e.node_id)&&Object.assign(e,m.get(e.node_id));break;case"modify_name":{const t=d.get(e.node_id);t&&e.node_name&&t!==e.node_name&&(e.node_old_name=t),d.set(e.node_id,e.node_name);break}case"revert":u.set(e.version,e.node_id)}}const p=c.findIndex((e=>"create"===e.type));p>=0&&c.splice(p+1,c.length);let x,f=0;for(const b of c){const e=+b.publish_time;if(e&&e>f&&(f=e,x=b),"revert"===b.type){let e=b.node_id;for(;u.has(e);)e=u.get(e);b.node_id=e}}x&&(x.latest_publish=!0);const g=new Map;for(const b of c){let e;e=b.time?(0,it.gE)(b.time,i)?(0,it.vm)(b.time):(0,it.um)(b.time,i)?(0,it.mr)(b.time,{month:"short",day:"numeric"}):(0,it.mr)(b.time,{month:"short",day:"numeric",year:"numeric"}):"Earlier";let t=g.get(e);t?t.push(b):(t=[b],g.set(e,t))}const v=[];for(const[b,j]of g){const e=dt(j,b);e&&v.push(e)}return{ranges:v,events:c,userCount:o}}(t,n);return o?(0,s.jsx)("div",{className:"overflow-y-auto",children:(0,s.jsxs)("div",{className:"jsx-d511b6cc9924123c history pb3",children:[(0,s.jsx)(Vt,{}),o.ranges.map(((e,t)=>(0,s.jsx)(jt,{range:e,dispatch:l,isVersioned:!r,currentVersion:i,isFirst:0===t},t))),(0,s.jsx)(a(),{id:"d511b6cc9924123c",children:".history.jsx-d511b6cc9924123c{display:grid;grid-template-columns:auto auto auto auto 1fr auto;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"})]})}):(0,s.jsx)("div",{className:"flex justify-center p4",children:(0,s.jsx)(T.Z,{})})})),wt=(0,f.$j)((e=>{let{notebook:t}=e;return{notebook:t}}),(e=>({dispatch:e})))((e=>{let{notebook:{autosave:t,id:n,forkOf:r,saveVersion:a,model:{version:i}},dispatch:l}=e;const[o]=(0,E.h_)("/document/".concat(n,"/history")),c=t?i:a;return(0,s.jsxs)(A.X,{children:[(0,s.jsx)(A.h,{children:"Version history"}),(0,s.jsx)(yt,{history:o,forkOf:r,autosave:t,version:c,dispatch:l})]})})),Ct=p()((()=>Promise.all([n.e(4301),n.e(4959)]).then(n.bind(n,34959))),{loadableGenerated:{webpack:()=>[34959]}});var kt=n(48373),Nt=n(35053),Zt=n(96386),Lt=n(33042),Mt=n(78009);const St=14,Ht="var(--moon-gray)",Rt=e=>{let{from:t,to:n,sign:r,yScale:a}=e;const i="circular"===(0,Zt.Do)(t,n);return(0,s.jsx)("path",{d:"M ".concat(3*r," 0 H ").concat(r*St/2," v ").concat(a(t.node,n.node)," h ").concat(r*(i?-1:1)*4),fill:"none",strokeWidth:"2",stroke:"currentColor"})},Et=e=>{let{node:t,nameClassName:n}=e;const r=(0,Je.Qc)(t),a=(0,Je.u2)(t),i=r.id;let l=t.value;return i&&(l="".concat(l.slice(0,i.start)," ").concat(l.slice(i.end))),l=l.trim(),l.length>255&&(l="".concat(l.slice(0,255),"\u2026")),(0,s.jsxs)("div",{className:"truncate code f7",title:"".concat(a?"".concat(a," "):"").concat(l),children:[a&&(0,s.jsxs)("span",{className:n,children:[a," "]}),l]})},_t=x.memo((function(e){let{node:t,connections:n,focusedNode:r,participants:i,selected:l,error:o,yScale:c,dispatch:d,onSelect:h,readOnly:u}=e;const{id:m}=t,p=n.get(t),{up:f,down:g,isIsland:v}=p,b=(0,x.useRef)(null);(0,Nt._)(m,b,void 0,!0,u,d,"minimap-cell","minimap-cells");const j=r?(0,Zt.Do)(p,n.get(r)):"none",V="none"===j,y="same"===j,w="direct downstream"===j||"indirect downstream"===j,C="direct upstream"===j||"indirect upstream"===j,k="direct downstream"===j||"direct upstream"===j;return(0,s.jsxs)("button",{ref:b,"data-cy":j,"data-node-id":m,style:{height:21,fontFamily:"inherit",color:o?"var(--red)":y||k?"var(--blue)":v||r?Ht:"black",paddingLeft:45,paddingTop:1,paddingBottom:1},onClick:e=>{e[Te.Ao]?d({type:"selectionToggle",id:m}):h({type:y?"blur":"focus",id:m},{focused:y,downstream:w,upstream:C,direct:k})},className:"jsx-5b348d2ff6ad01ac bg-white minimap-cell br2 bn pv0 pr0 bg-transparent tl w-100 flex relative pointer justify-between items-center",children:[(0,s.jsxs)("div",{style:{boxShadow:l?"inset 0 0 0 1.5px var(--washed-blue)":void 0},className:"jsx-5b348d2ff6ad01ac "+"flex minimap-cell-label h-100 w-100 ph1 items-center moon-gray br2 ".concat(y?"bg-blue white focused":""),children:[(0,s.jsx)(Et,{node:t,nameClassName:y?"fw6":k?"blue":r?"":"black"}),i&&(0,s.jsx)(Mt.l,{size:14,link:!1})]}),(0,s.jsxs)("svg",{style:{overflow:"visible",top:10.5,left:"calc(var( --spacing-extra-small ) + ".concat(17,"px)"),width:30,height:30},className:"jsx-5b348d2ff6ad01ac "+"absolute z-".concat(y?2:1),children:[(0,s.jsxs)("g",{transform:"translate(".concat(r?w?St:C?-14:0:0,", 0)"),className:"jsx-5b348d2ff6ad01ac",children:[!(r&&V)&&(0,s.jsxs)("g",{className:"jsx-5b348d2ff6ad01ac",children:[f.length&&(0,s.jsx)("path",{d:"M 0 0 h ".concat(-8),fill:"none",strokeWidth:"2",stroke:"currentColor",className:"jsx-5b348d2ff6ad01ac"}),g.length&&(0,s.jsx)("path",{d:"M 0 0 h ".concat(8),fill:"none",strokeWidth:"2",stroke:"currentColor",className:"jsx-5b348d2ff6ad01ac"})]}),(0,s.jsx)("circle",{r:v?1.5:3,fill:"currentColor",className:"jsx-5b348d2ff6ad01ac"})]}),y&&(0,s.jsxs)("g",{className:"jsx-5b348d2ff6ad01ac pen",children:[g.map(((e,t)=>(0,s.jsx)(Rt,{from:p,to:n.get(e),sign:1,yScale:c},t))),f.map(((e,t)=>(0,s.jsx)(Rt,{from:p,to:n.get(e),sign:-1,yScale:c},t)))]})]}),(0,s.jsx)(a(),{id:"5b348d2ff6ad01ac",children:".minimap-cell.jsx-5b348d2ff6ad01ac:hover .minimap-cell-label.jsx-5b348d2ff6ad01ac:not(.focused){background-color:var(--near-white)}"})]})})),Dt=(0,f.$j)((e=>{let{notebook:t,currentUser:n}=e;return{notebook:t,currentUser:n}}),(e=>({dispatch:e})))((e=>{let{notebook:t,currentUser:n,dispatch:r}=e;const{model:a,editorStates:i,participants:l,focusId:o,selectionFocusId:c,selection:h,dropId:u}=t,{nodes:m}=a,p=(0,D.os)(t),f=(0,x.useMemo)((()=>function(e){const t=new Map;for(const n of e){const{node_ids:e}=n;for(const s of e)t.has(s)?t.get(s).push(n):t.set(s,[n])}return t}(l)),[l]),g=(0,x.useMemo)((()=>(0,Zt.E6)(m)),[m]),v=(0,x.useMemo)((()=>(e,t)=>21*(m.indexOf(t)-m.indexOf(e))),[m]),b=(0,d.GS)(d.ro),{0:j,1:V}=(0,x.useState)(null),y="focus"===(null===j||void 0===j?void 0:j.type)?(0,Lt.DY)(a,j.id):"blur"===(null===j||void 0===j?void 0:j.type)?void 0:null!==o?(0,Lt.DY)(a,o):null!==c?(0,Lt.DY)(a,c):void 0;function w(e,s){b?V(e):r(e),(0,re.MR)((0,re.ym)({type:"notebook:view:minimapClick",data:s,eventVersion:2,notebook:t,currentUser:n}))}const C=(0,x.useRef)(!1);return(0,x.useEffect)((()=>(C.current=!0,()=>{C.current=!1})),[]),(0,x.useEffect)((()=>()=>{j&&!C.current&&r(j)}),[r,j]),(0,s.jsxs)(A.X,{children:[(0,s.jsx)(A.h,{children:"Minimap"}),(0,s.jsx)("div",{className:"pa3 relative minimap-cells",children:m.map((e=>{var t;return(0,s.jsxs)(s.Fragment,{children:[u===e.id&&(0,s.jsx)("div",{className:"absolute bt b--blue",style:{marginTop:-.5,width:"calc(100% - 2 * var( --spacing-medium ))"}}),(0,s.jsx)(_t,{node:e,connections:g,focusedNode:y,selected:h.has(e.id),participants:f.get(e.id),error:!!(null===(t=i.get(e.id))||void 0===t?void 0:t.field(kt.ei).length),yScale:v,onSelect:w,dispatch:r,readOnly:p},e.id)]})}))})]})})),Ft=p()((()=>n.e(2828).then(n.bind(n,62828))),{loadableGenerated:{webpack:()=>[62828]}}),It=p()((()=>n.e(559).then(n.bind(n,10559))),{loadableGenerated:{webpack:()=>[10559]}});function Pt(e){const t=u.j;switch(e){case"help":return{pane:(0,s.jsx)(Ft,{}),closeLabel:"help",width:t};case"files":return{pane:(0,s.jsx)(_e,{}),closeLabel:"files",width:t};case"history":return{pane:(0,s.jsx)(wt,{}),closeLabel:"history",width:t};case"guide":return{pane:(0,s.jsx)(It,{}),closeLabel:"guide",width:t};case"minimap":return{pane:(0,s.jsx)(Dt,{}),closeLabel:"minimap",width:u.l6};case"dependencies":return{pane:(0,s.jsx)(X,{}),closeLabel:"dependencies",width:t};case"insights":return{pane:(0,s.jsx)(Ct,{}),closeLabel:"insights",width:t};case"find":return{pane:(0,s.jsx)(at,{}),closeLabel:"find",width:t};case"databases":return{pane:(0,s.jsx)(z,{}),closeLabel:"databases",width:t};default:return{pane:null,closeLabel:"",width:0}}}const Tt=(0,f.$j)((e=>{let{page:t}=e;return{paneType:t.pane,helpArticlesOpen:t.helpArticlesOpen}}),(e=>({dispatch:e})))((e=>{let{dispatch:t,paneType:n,helpArticlesOpen:r,panes:i}=e;const m=(0,d.GS)(d.ro),{pane:p,closeLabel:x,width:f}=Pt(n);return(0,s.jsxs)("div",{className:a().dynamic([["d611e22a80e7db2f",[u.Lv,d.hs,d.pp,u.Lv,u.Sf,f]]])+" flex fixed z-1",children:[m&&"guide"===n?null:p&&(0,s.jsxs)("div",{className:a().dynamic([["d611e22a80e7db2f",[u.Lv,d.hs,d.pp,u.Lv,u.Sf,f]]])+" mt3-l shadow-1-ns br3 self-start bg-white flex pane",children:[(0,s.jsx)("button",{style:{top:"2px"},onClick:()=>t({type:"dismissPane"}),className:a().dynamic([["d611e22a80e7db2f",[u.Lv,d.hs,d.pp,u.Lv,u.Sf,f]]])+" absolute dn-l dismiss-button pointer pa3 bn bg-transparent z-4",children:(0,s.jsx)(g.Z,{className:l()({white:"guide"===n}),"aria-label":"Close ".concat(x," pane")})}),p]},[n,...r].join()),(0,s.jsx)("div",{className:a().dynamic([["d611e22a80e7db2f",[u.Lv,d.hs,d.pp,u.Lv,u.Sf,f]]])+" gray hover-black mt3 ml1 sidebar animate-all dn db-l",children:i.map((e=>{let{type:r,icon:a,label:i,count:l,signpost:d,badgeStyle:u,unimplemented:m,disabled:x}=e;const f=!(m||x),g=(0,s.jsx)(o.Ct,{count:l,badgeStyle:u,disabled:!f,colorless:!0,selected:n===r,children:(0,s.jsx)(o.hU,{icon:a,onClick:f?()=>t({type:"togglePane",pane:r}):void 0,onKeyDown:f?e=>"Escape"===e.key&&t({type:"dismissPane"}):void 0,disabled:!f,selected:n===r,className:"ma2",colorless:!0,solidBackground:!0,title:(0,h.fm)(m?"".concat(i," is not yet implemented"):"".concat(n===r?"Close":"Open"," ").concat(i))})},r);return d&&!p?(0,s.jsx)(c.y,{type:d,top:16,left:8,children:g},r):g}))}),(0,s.jsx)(a(),{id:"d611e22a80e7db2f",dynamic:[u.Lv,d.hs,d.pp,u.Lv,u.Sf,f],children:".fixed.__jsx-style-dynamic-selector{top:".concat(u.Lv,"px;right:var(--spacing-medium);bottom:0}@media ").concat(d.hs,"{.fixed.__jsx-style-dynamic-selector{right:0}}.pane.__jsx-style-dynamic-selector{position:fixed;top:0;right:0;bottom:0;left:0}@media ").concat(d.pp,"{.pane.__jsx-style-dynamic-selector{position:static;max-height:-webkit-calc(\n              100vh - ").concat(u.Lv,"px - ").concat(u.Sf,"px - 38px\n            );max-height:-moz-calc(\n              100vh - ").concat(u.Lv,"px - ").concat(u.Sf,"px - 38px\n            );max-height:calc(\n              100vh - ").concat(u.Lv,"px - ").concat(u.Sf,"px - 38px\n            );width:-webkit-calc(\n              ").concat(f,"px - 2 * var(--spacing-small) - var(--spacing-extra-small) -\n                var(--width-2) \n            );width:-moz-calc(\n              ").concat(f,"px - 2 * var(--spacing-small) - var(--spacing-extra-small) -\n                var(--width-2) \n            );width:calc(\n              ").concat(f,"px - 2 * var(--spacing-small) - var(--spacing-extra-small) -\n                var(--width-2) \n            )}}.dismiss-button.__jsx-style-dynamic-selector{top:0;right:0}")})]})}))},586:function(e,t,n){n.d(t,{y:function(){return x}});var s=n(85893),r=n(34236),a=n(67294),i=n(40042),l=n(69475),o=n(34119),c=n(98807),d=n(47311),h=n(89905),u=n(8052),m=n(88601);const p=[{type:"help",title:"Want help?",content:()=>(0,s.jsxs)(s.Fragment,{children:["Get started quickly with tutorials in the"," ",(0,s.jsxs)("b",{className:"dark-gray",children:[(0,s.jsx)(c.Z,{className:"nb1"})," Help"]})," ","pane. You\u2019ll also find shortcuts, docs, and support."]})},{type:"settings",title:"Welcome!",content:()=>(0,s.jsxs)(s.Fragment,{children:["Finish setting up your public profile in"," ",(0,s.jsxs)("b",{className:"dark-gray",children:[(0,s.jsx)(o.Z,{className:"nb1"})," Settings"]}),"."]})},{type:"insertmenu",title:"Shortcuts",content:()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Press ",(0,s.jsx)(m.e,{shortcut:"Mod-Enter"})," to open this menu"]}),(0,s.jsx)("p",{children:"Type to search"}),(0,s.jsxs)("div",{children:["Press ",(0,s.jsx)(m.e,{shortcut:"Alt-Mod-Enter"})," or double-click"," ",(0,s.jsx)(u.W,{icon:d.ZP,className:"dark-gray"})," to create a JavaScript cell"]})]})}],x=(0,i.$j)((e=>{let{currentUser:t,decorations:n}=e;return{currentUser:t,currentSignpost:n.signpost}}),(e=>({dispatch:e})))((e=>{let{type:t,top:n,right:i,bottom:o,left:c,children:d,currentUser:u,currentSignpost:m,dispatch:x}=e;const f=(0,a.useRef)(null),g=(0,r.E)(f),v=p.find((e=>e.type===t)),b=null===m&&(0,l.M)(u,t),{0:j,1:V}=(0,a.useState)(!1);return(0,a.useEffect)((()=>{b&&g&&!j&&(V(!0),x({type:"requestSignpost",signpost:t}))}),[b,g,j,t,x]),(0,a.useEffect)((()=>{if(j)return()=>x({type:"hideSignpost",signpost:t})}),[j,t,x]),m!==t?null===m&&b?(0,s.jsx)("div",{className:"relative",ref:f,children:d}):(0,s.jsx)(s.Fragment,{children:d}):(0,s.jsxs)("div",{className:"relative",children:[d,(0,s.jsxs)("div",{className:"absolute",style:{top:n,right:i,bottom:o,left:c,filter:"drop-shadow(0 0 10px rgba(0,0,0,0.1))",willChange:"transform"},children:[(0,s.jsxs)("div",{className:"absolute w5 bg-white mid-gray ba b--silver pa3 br2",style:{top:-30,right:void 0!==c?14:void 0,left:void 0!==i?14:void 0},children:[(0,s.jsxs)("div",{className:"flex mb2 near-black",children:[(0,s.jsxs)("div",{className:"flex items-center flex-grow-1 fw6",children:[(0,s.jsx)("span",{className:"bg-light-purple white f7 fw7 pa1 br2 mr2",children:"Tip"}),v.title]}),(0,s.jsx)("button",{className:"flex dark-gray bg-transparent hover-bg-black-05 pointer pa2 nt1 nb1 nr1 bn br-100",title:"Hide tip","aria-label":"Hide tip",onClick:()=>x({type:"dismissSignpost",trigger:"click"}),children:(0,s.jsx)(h.Z,{})})]}),(0,s.jsx)("div",{className:"lh-copy",children:(0,s.jsx)(v.content,{})})]}),(0,s.jsx)("svg",{className:"absolute",style:{top:-20,left:void 0!==c?-16:void 0,right:void 0!==i?-16:void 0},width:"16",height:"40",children:(0,s.jsx)("path",{stroke:"#E8E8E8",fill:"white",transform:void 0!==c?"rotate(180 8,20)":void 0,d:"M15,5 L0,20 L10,30 L15,35"})})]})]})}))},12627:function(e,t,n){n.d(t,{aN:function(){return R},S5:function(){return _}});var s=n(85893),r=n(90793),a=n(94184),i=n.n(a),l=n(76522),o=n(49516),c=n(3764),d=n(47311),h=n(22513),u=n(84193),m=n(70975),p=n(41799),x=n(69396),f=n(22027),g=n(48627),v=n(12447),b=n(21857),j=n(31536),V=n(3142),y=n(84236),w=n(67294),C=n(4242);const k=e=>{let{node:t}=e;const{id:n,data:r}=t,{operations:{from:{table:a}}}=r,o=(0,b.M7)(r),c=(0,C.I0)(),{disabled:d}=(0,C.v9)((e=>{let{notebook:t}=e;return{disabled:t.safe||(0,V.os)(t)}})),h=(0,v.GS)(v.pp),{0:u,1:f}=(0,w.useState)(),k=(0,w.useRef)();async function L(e){c({type:"setDataOperations",id:n,operations:(0,p.Z)((0,x.Z)((0,p.Z)({},j.Zu.defaultNode.data.operations),{from:{table:e}}),"sqlite"!==(null===u||void 0===u?void 0:u.dialect)&&"duckdb"!==(null===u||void 0===u?void 0:u.dialect)&&{select:{columns:Array.from((await new g.n4(o,e).run(c)).keys())},slice:{from:0,to:1e3}})})}return(0,w.useEffect)((()=>{const e=new g.YG(o);k.current=e,e.run(c).then((t=>{e===k.current&&f(t)}),(()=>{e===k.current&&f(null)}))}),[c,o]),void 0!==u?(null===u||void 0===u?void 0:u.hasDescribeTables)?(0,s.jsxs)(m.vz,{"data-cy":"table-selector",value:JSON.stringify(a)||"",className:"flex items-center dark-gray hover-black focus-black-05 br2 br--right mr1",disabled:d,onChange:e=>L(JSON.parse(e)),children:[(0,s.jsx)(m.Y4,{children:(0,s.jsxs)("div",{className:i()("inline-flex items-center justify-between w-100",d&&"moon-gray"),children:[(0,s.jsx)("div",{className:"mr1 truncate",style:{maxWidth:h?200:75},children:a?(0,y.Vi)(a):"Select a table\u2026"}),(0,s.jsx)(m.r9,{className:"inline-flex items-center",children:(0,s.jsx)(l.Z,{})})]})}),(0,s.jsx)(N,{source:o,table:a})]}):(0,s.jsx)(Z,{table:a,setTable:L,disabled:d}):null},N=e=>{let{source:t,table:n}=e;const a=(0,C.I0)(),i=(0,w.useRef)(),{0:l,1:c}=(0,w.useState)(),{isExpanded:d}=(0,r.kR)(),h=(0,v.GS)(v.pp);return(0,w.useEffect)((()=>c(void 0)),[t]),(0,w.useEffect)((()=>{if(d){const e=new g.Y2(t);i.current=e,e.run(a).then((t=>{e===i.current&&c(t.sort(y.Tf))}),(t=>{e===i.current&&console.error("Error fetching list of tables: ",t)}))}}),[a,d,t]),(0,s.jsx)(m.jI,{style:{marginLeft:-8,maxHeight:"40vh",minWidth:h?250:200,width:"auto"},children:(0,s.jsx)(m.uf,{style:{padding:0,margin:0},children:(0,s.jsxs)("div",{className:"pv12",children:[(0,s.jsx)("div",{className:"gray f7 ph12 pb12",children:"Tables"}),l?l.length?l.map(((e,t)=>(0,s.jsx)(m.wt,{className:"flex items-center justify-between nowrap",style:{padding:"2px 12px",margin:0},value:JSON.stringify(e),children:(0,s.jsxs)("span",{className:"flex items-center",title:(0,y.Vi)(e),style:{maxWidth:h?400:150},children:[(0,s.jsx)("span",{className:"truncate",children:(0,y.Vi)(e)}),(0,y.YY)(n,e)&&(0,s.jsx)(o.Z,{className:"ml2 near-black flex-shrink-0"})]})},t))):(0,s.jsx)("div",{className:"ph12 gray","data-cy":"no-tables",children:"No tables found"}):(0,s.jsx)("div",{className:"ph12 dark-gray",children:(0,s.jsx)(f.Z,{})})]})})})},Z=e=>{let{table:t,setTable:n,disabled:r}=e;const a=(0,v.GS)(v.hs)?340:110,{0:i,1:l}=(0,w.useState)(t?(0,y.Vi)(t):"");return(0,s.jsx)("input",{name:"tablename",type:"text","data-cy":"table-input-selector",className:"ba b--light-gray br2 br--right ph2 h2 flex items-center",placeholder:"Enter a table\u2026",value:i,onChange:e=>l(e.target.value.replace(/\s/g,"")),onBlur:()=>n(function(e){let t="",n="";const s=[];for(let r=0;r<e.length;r++){const a=e[r];if("."===a){s.push(n),n="";continue}if(0===n.length){if("`"===a||'"'===a||"'"===a){t=a;continue}n+=a;continue}const i=r+1<e.length?e[r+1]:"";a!==t||i!==t?"\\"!==a||i!==t?a!==t?n+=a:t="":(n+=i,r++):(n+=a,r++)}n&&s.push(n);if(0===s.length)return null;if(s.length>2)return{database:s[0],schema:s[1],table:s[2]};return s.length>1?{schema:s[0],table:s[1]}:s.length>0?{table:s[0]}:null}(i)),title:i,disabled:r,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.target.blur())},spellCheck:!1,style:{width:a,marginLeft:-2}})};var L=n(3961),M=n(602),S=n(8802),H=n(36448);const R=e=>{let{node:t}=e;const{mode:n,data:{source:r}}=t,a=(0,C.I0)(),{0:i,1:l}=(0,w.useState)(),o=(0,w.useRef)();(0,w.useEffect)((()=>{if(null===r.name)o.current=void 0,l(null);else{const e=new g.FJ(r);o.current=e,e.run(a).then((t=>{e===o.current&&l(t)}),(()=>{e===o.current&&l(null)}))}}),[a,r]);const d="table"===n&&null!==r.name&&void 0!==i&&"array"!==(null===i||void 0===i?void 0:i.dialect);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E,{node:t,right:d}),d&&(0,s.jsx)(k,{node:t}),"array"!==(null===i||void 0===i?void 0:i.dialect)&&(0,s.jsx)("button",{className:"flex items-center bn bg-transparent pointer dark-gray hover-black",title:"Show databases",onClick:()=>a({type:"togglePane",pane:"databases"}),children:(0,s.jsx)(c.Z,{})})]})},E=e=>{let{node:t,right:n}=e;const{id:r,data:{source:a}}=t,o=(0,C.I0)(),{disabled:c}=(0,C.v9)((e=>{let{notebook:t}=e;return{disabled:t.safe||(0,V.os)(t)}})),d=(0,v.GS)(v.pp);var h;return(0,s.jsxs)(m.vz,{"data-cy":"database-selector",value:JSON.stringify(a),className:i()("flex items-center mr-tiny ml1 focus-black-05 dark-gray hover-black",n&&"br--left"),disabled:c,onKeyDown:e=>{e.metaKey||e.ctrlKey||e.preventDefault()},onChange:e=>{const t=JSON.parse(e);(0,b.U_)(a,t)||o({type:"setDataSource",id:r,source:t})},children:[(0,s.jsx)(m.Y4,{className:"flex items-center",children:(0,s.jsxs)("div",{className:i()("inline-flex items-center justify-between",c&&"moon-gray"),children:[(0,s.jsx)("div",{className:"mr1 truncate",style:{maxWidth:d?200:75},children:null!==(h=a.name)&&void 0!==h?h:"Select a data source\u2026"}),(0,s.jsx)(m.r9,{className:"inline-flex items-center",children:(0,s.jsx)(l.Z,{})})]})}),(0,s.jsx)(D,{node:t})]})};function _(e,t){let{mimeType:n}=e;if("table"===t)switch(n){case"text/csv":case"text/tab-separated-values":case"application/json":return"array"}return"application/x-sqlite3"===n?"sqlite":null}const D=e=>{let{node:t}=e;const{mode:n,data:{source:a},name:i}=t,l=(0,C.I0)(),o=(0,v.GS)(v.pp),{isExpanded:c}=(0,r.kR)(),h=(0,w.useRef)(),{allowPrivateData:p,allowAddDatabase:x,owner:f,files:g}=(0,C.v9)((e=>{let{notebook:t}=e;const n=(0,V.cE)(t);return{allowPrivateData:n,allowAddDatabase:n&&(0,H.NF)(t),owner:t.owner,files:t.files}})),[j]=(0,M.h_)(p&&c?"".concat("team"===f.type?"/team/".concat(f.id):"/user","/data-connectors?detail=false"):null),{0:y,1:k}=(0,w.useState)([]),N="cell"===a.type&&!y.some((e=>e.name===a.name)),Z=("database"===a.type||"DatabaseClient"===a.type)&&!(null===j||void 0===j?void 0:j.some((e=>e.name===a.name))),R="FileAttachment"===a.type&&!g.has(a.name),E=(0,w.useMemo)((()=>{const e=[];for(const[t,s]of g){const r=_(s,n);null!==r&&e.push({name:t,type:"FileAttachment",dialect:r})}return e}),[g,n]);return(0,w.useEffect)((()=>{if(!c)return;const e=[],t=new L.S((async(s,r)=>{s({type:"request_data_sources",mode:n});try{for await(const n of r()){if(h.current!==t)return;const{name:s,dialect:r}=n;if(s===i)continue;const a={name:"".concat(s),type:"cell",dialect:(0,b.Ov)(r)};e.push(a),e.sort(b.zO),k(e.slice())}}catch(a){console.error("Error fetching database clients: ",a)}}));return h.current=t,t.run(l).catch((e=>{console.error("Error fetching database clients: ",e),k([])})),()=>{h.current=void 0,k([])}}),[n,l,c,i]),(0,s.jsx)(m.jI,{style:{minWidth:o?"10vw":"40vw",width:"auto",marginLeft:-8,maxHeight:"40vh"},children:(0,s.jsxs)(m.uf,{style:{padding:0,margin:0},children:[x&&(0,s.jsx)("div",{className:"bb b--light-silver pa12",children:(0,s.jsx)("button",{className:"bn bg-transparent pa0 ma0",onClick:()=>l({type:"addedDatabase",id:t.id}),children:(0,s.jsx)(u.Z,{href:"/".concat("team"===f.type?"team/@".concat(f.login,"/"):"","settings/databases"),children:(0,s.jsx)("a",{className:"no-underline",target:"_blank",children:(0,s.jsxs)("div",{className:"inline-flex items-center br2 ph2 pv1 pointer dark-gray fw5 ba b--light-silver",children:[(0,s.jsx)(d.ZP,{className:"mr1"}),"Add database"]})})})})}),(y.length>0||N)&&(0,s.jsx)("div",{className:"bb b--light-silver pv12",children:(0,s.jsx)(F,{sources:y,stale:!!N,sectionTitle:"Cells",source:a,mode:n})}),(E.length>0||R)&&(0,s.jsx)("div",{className:"bb b--light-silver pv12",children:(0,s.jsx)(F,{sources:E,stale:!!R,sectionTitle:"File attachments",source:a,mode:n})}),(0,s.jsx)("div",{className:"pv12",children:(0,s.jsx)(F,{sources:j?j.map((e=>{let{name:t,type:n}=e;return{name:t,type:"DatabaseClient",dialect:n}})):[],stale:!!Z,sectionTitle:"Databases",source:a,mode:n})})]},[(0,S.Z)(y),(0,S.Z)(g),j&&(0,S.Z)(j)].join())})},F=e=>{let{sources:t,stale:n,source:r,sectionTitle:a}=e;const i={maxWidth:(0,v.GS)(v.pp)?350:150};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"gray f7 ph12",style:{marginBottom:10},children:a}),t.map(((e,t)=>(0,s.jsxs)(m.wt,{className:"flex items-center justify-between nowrap",style:{padding:"2px 12px",margin:0},value:JSON.stringify(e),children:[(0,s.jsxs)("span",{className:"flex items-center overflow-x-hidden",title:e.name,style:i,children:[(0,s.jsx)("span",{className:"truncate",children:e.name}),(0,b.U_)(r,e)&&(0,s.jsx)(o.Z,{className:"ml1 near-black flex-shrink-0"})]}),(0,s.jsx)("span",{className:"mid-gray fw4 ml4",children:(0,b.w4)(e.dialect)})]},t))),n?(0,s.jsx)(P,{source:r,style:i}):t.length?null:(0,s.jsx)(I,{})]})},I=()=>(0,s.jsx)("div",{className:"i gray ph12",children:"None available"}),P=e=>{let{source:t,style:n}=e;return(0,s.jsx)(m.wt,{className:"flex items-center justify-between nowrap gray",style:{padding:"2px 12px",margin:0},value:JSON.stringify(t),children:(0,s.jsxs)("span",{className:"flex items-center overflow-x-hidden",title:t.name,style:n,children:[(0,s.jsx)("span",{className:"truncate",children:t.name}),(0,s.jsx)(o.Z,{className:"ml1 flex-shrink-0"}),(0,s.jsx)(h.Z,{className:"ml1 flex-shrink-0"})]})})}},3683:function(e,t,n){n.d(t,{q:function(){return h}});var s=n(41799),r=n(69396),a=n(99534),i=n(85893),l=n(14151),o=n(93939),c=n(62990),d=n(67294);const h=e=>{var{time:t,absolute:n,numeric:h,precision:u}=e,m=(0,a.Z)(e,["time","absolute","numeric","precision"]);const p=(0,o.L)(t),x=(0,l.d)((0,d.useCallback)((()=>t.toLocaleString("en")),[t]));return(0,i.jsx)("span",(0,r.Z)((0,s.Z)({title:x},m),{children:n?h?(0,c.WB)(t):(0,c.p6)(t):u?(0,c.aP)(t,p,u):(0,c.lY)(t,p)}))}},80548:function(e,t,n){n.d(t,{w:function(){return c}});var s=n(69441),r=n(12447),a=n(51289),i=n(76020),l=n(41799);class o{fileName(e){return"number"===typeof e?"/node-".concat(e,".ts"):e}async updateFile(e,t){try{return await this.updateFileStrict(e,t)}catch(n){if(n.errorMessage&&0===n.errorMessage.indexOf("Debug Failure"))return;throw n}}async updateFileStrict(e,t){if(this.contentByFileName.get(this.fileName(e))!==t){if(this.contentByFileName.set(this.fileName(e),t),this.workerError)throw new Error("TypeScript worker error");return this.request({type:"updateFile",fileName:this.fileName(e),content:t})}}async deleteFile(e){if(this.contentByFileName.delete(this.fileName(e)),this.workerError)throw new Error("TypeScript worker error");return this.request({type:"deleteFile",fileName:this.fileName(e)})}getCompletionsAtPosition(e,t){if(this.workerError)throw new Error("TypeScript worker error");return this.request({type:"completions",fileName:this.fileName(e),pos:t})}getSignatureHelpItems(e,t,n){if(this.workerError)throw new Error("TypeScript worker error");return this.request({type:"signatureHelp",fileName:this.fileName(e),content:n,pos:t})}request(e){const t=(0,l.Z)({id:++this.id},e);return new Promise(((e,n)=>{this.requests.set(t.id,[t=>{"payload"in t?e(t.payload):e()},n]),this.send(t)}))}send(e){this.worker.postMessage(e)}messaged(e){if(!e.isTrusted)return;const t=e.data,{id:n}=t;if(!this.requests.has(n))return;const[s,r]=this.requests.get(n);if(this.requests.delete(n),"error"===t.type)r(t);else s(t)}constructor(){this.id=0,this.requests=new Map,this.contentByFileName=new Map,this.workerError=!1,this.worker=new Worker(n.tu(new URL(n.p+n.u(7444),n.b))),this.worker.onerror=()=>{this.workerError=!0},this.worker.onmessage=e=>{this.messaged(e)}}}function c(e){const t=a.Qg&&window.matchMedia(r.ro).matches,{notebook:n}=e.getState(),l=new s.Z(e.dispatch,function(e,t){let n=null;if(!t){try{n=new o}catch(s){return null}for(const t of e.model.nodes)n.updateFile(t.id,t.value)}return n}(n,t));return l.setState(n),(0,i.x)(e,(()=>{const t=e.getState(),{transactions:n}=t.notebook;delete t.notebook.transactions,l.setState(t.notebook,n)})),l}},35053:function(e,t,n){n.d(t,{_:function(){return d}});let s=0,r=null;function a(){r=requestAnimationFrame(a),scrollBy(0,s)}function i(e){s=Math.min(0,e-20)||Math.max(0,e-innerHeight+20),s&&!r?r=requestAnimationFrame(a):r&&!s&&(cancelAnimationFrame(r),r=null)}var l=n(61107),o=n(67294);function c(e,t,n){for(n=n?n.nextElementSibling:t.firstElementChild;n&&!n.classList.contains(e);)n=n.nextElementSibling;return n||null}function d(e,t,n,s,r,a,d,h){const{0:u,1:m}=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const o=t.current,u=navigator.maxTouchPoints||"ontouchstart"in o;let p,x=!1,f=!1,g=NaN,v=NaN;function b(e){e.ctrlKey||e.button||!e.isPrimary||!s||r||(p=e.target,p.setPointerCapture(e.pointerId),o.style.cursor="grabbing",f=void 0,x=!0,g=e.clientX,v=e.clientY)}function j(s){if(!x||!s.isPrimary)return;const{clientX:r,clientY:l}=s;if(void 0===f){if(r-g>20)return o.style.cursor="",p.releasePointerCapture(s.pointerId),p=void 0,void(f=!1);Math.abs(l-v)>20&&(f=!0,a({type:"dragStarted",id:e}),m(!0),(null===n||void 0===n?void 0:n.current)&&t.current&&t.current.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})))}if(!f)return;const u=o.closest(".".concat(h));let b;for(;b=c(d,u,b);){const e=b.getBoundingClientRect();if((e.top+e.bottom)/2>l)break}a({type:"dragged",id:b?+b.dataset.nodeId:null}),i(l)}function V(e){e.isPrimary&&(p&&(p.releasePointerCapture(e.pointerId),p=void 0,o.style.cursor=""),f&&(a({type:"dragEnded"}),m(!1)),i(NaN),f=!1,x=!1)}return u&&o.addEventListener("touchmove",l.P),o.addEventListener("pointerdown",b),o.addEventListener("pointermove",j),o.addEventListener("pointerup",V),o.addEventListener("pointercancel",V),o.addEventListener("lostpointercapture",V),()=>{u&&o.removeEventListener("touchmove",l.P),o.removeEventListener("pointerdown",b),o.removeEventListener("pointermove",j),o.removeEventListener("pointerup",V),o.removeEventListener("pointercancel",V),o.removeEventListener("lostpointercapture",V)}}),[a,s,r,t,m,n,h,d,e]),[u,m]}},34236:function(e,t,n){n.d(t,{E:function(){return a}});var s=n(67294);const r="undefined"!==typeof IntersectionObserver;function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{root:n=null,rootMargin:a="0px",threshold:i=0,defaultValue:l=!r}=t,{0:o,1:c}=(0,s.useState)(l),d=(0,s.useMemo)((()=>r?new IntersectionObserver((e=>{let[t]=e;c(t.isIntersecting)}),{root:n,rootMargin:a,threshold:i}):null),[n,a,i]);return(0,s.useEffect)((()=>{const t=e.current;return t&&d?(d.observe(t),()=>{d.disconnect()}):void 0}),[d,e]),o}},18582:function(e,t,n){n.d(t,{r:function(){return r}});var s=n(31343);async function r(e,t){const n=await fetch(e,{headers:{authorization:"Bearer ".concat(t),"content-Type":"application/json"}});if(!n.ok){const e=n.headers.get("content-type");if(e&&e.startsWith("application/json")){const{error:e}=await n.json();throw new Error(e.message)}throw new s.ZP(n.status,n.url)}return n.json()}},40873:function(e,t,n){n.d(t,{v:function(){return o}});const s={test:()=>!1,matches:()=>[]};class r{test(e){if(!e)return!1;let t=0;for(const n of this.terms){if(n.lastIndex=t,!n.test(e))return this.fallback.test(e);t=n.lastIndex}return!0}matches(e){const t=this.fallback.matches(e);if(!e)return t;let n=0;for(const s of this.terms){s.lastIndex=n;const r=s.exec(e);if(!r)continue;const a=r.index+r[1].length,i=a+r[2].length;t.push([a,i]),n=s.lastIndex}return t}constructor({terms:e=[],strict:t=!1,fallback:n=s}){this.terms=e,this.strict=t,this.fallback=n}}function a(e,t){return String(e).split(/\s+/g).filter((e=>e)).map((e=>l(e,t)))}function i(e,t){return Array.from(String(e).replace(/\s+/g,""),(e=>l(e,t)))}function l(e,t){return new RegExp("(^|[^\\p{L}])(".concat(e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),")"),t)}function o(e){let{allowAcronyms:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=a(e,"iu");return new r({terms:n,fallback:1===n.length&&t?new r({terms:i(e,"iug"),strict:!0}):void 0})}},47743:function(e,t,n){function s(e){return!!/drive\/v3\/files\/.*/.test(e)}n.d(t,{N6:function(){return a},SW:function(){return o},__:function(){return d},eJ:function(){return r},ty:function(){return s},wA:function(){return l}});const r="614404957759",a="AIzaSyAjxeAzLAiTpmClMsnQ6OuZMg5BC7AckCA",i=new Map([["application/vnd.google-apps.document","text/html"],["application/vnd.google-apps.drawing","image/svg+xml"],["application/vnd.google-apps.form","text/html"],["application/vnd.google-apps.map","text/html"],["application/vnd.google-apps.photo","image/jpeg"],["application/vnd.google-apps.presentation","application/pdf"],["application/vnd.google-apps.script","text/plain"],["application/vnd.google-apps.site","text/html"],["application/vnd.google-apps.spreadsheet","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]]);function l(e,t){return["".concat("https://www.googleapis.com").concat(e),t]}function o(e){return i.get(e)}let c;async function d(){return c||(c=new Promise((e=>{const t="gapiLoaded".concat(Math.random()),n=document.createElement("script");n.src="https://apis.google.com/js/api.js?onload=".concat(t),window[t]=function(){e(window.gapi),delete window[t]},document.head.appendChild(n)}))),c}},11222:function(e,t,n){function s(e){return null!==e}n.d(t,{K:function(){return s}})},31115:function(e,t,n){function s(e,t){for(const n of e)if(t(n))return!0;return!1}function r(e,t){return e.length===t.length&&e.every((e=>t.includes(e)))&&t.every((t=>e.includes(t)))}n.d(t,{G:function(){return s},u:function(){return r}})},63527:function(e,t,n){n.d(t,{V:function(){return r}});var s=n(51289);function r(e){const t=new Map;for(const n of e){const e=n.length-1,s=n[e];for(let r=0;r<e;++r){const e=n[r],i=a(e);if(t.has(i))throw new Error("Duplicate entry: ".concat(e));t.set(i,s)}}return(e,n)=>{const s=t.get(i(n));return!!s&&s(e,n)}}function a(e){const t=e.split(/-(?!$)/);let n=t.pop();if(!n)throw new Error("Missing key: ".concat(e));n=n.toLowerCase(),"space"===n&&(n=" ");let r=!1,a=!1,l=!1,o=!1;for(const i of t)switch(i.toLowerCase()){case"meta":r=!0;break;case"alt":a=!0;break;case"ctrl":l=!0;break;case"shift":o=!0;break;case"mod":s.Mq?r=!0:l=!0;break;default:throw new Error("Unrecognized modifier: ".concat(i))}return i({key:n,ctrlKey:l,altKey:a,shiftKey:o,metaKey:r})}function i(e){const t=[];return e.ctrlKey&&t.push("Control"),e.altKey&&t.push("Alt"),e.shiftKey&&t.push("Shift"),e.metaKey&&t.push("Meta"),t.push(e.key.toLowerCase()),t.join("-")}},89642:function(e,t,n){n.d(t,{B5:function(){return a},ax:function(){return i},nm:function(){return l}});var s=n(36448);const r=new Map(Object.entries({"agpl-3.0":{short:"GNU AGPLv3",long:"GNU Affero General Public License v3.0"},"apache-2.0":{short:"Apache 2.0",long:"Apache License "},"bsd-3-clause":{short:"BSD 3-Clause",long:"BSD 3-Clause \u201cNew\u201d or \u201cRevised\u201d License"},"cc-by-4.0":{short:"CC BY 4.0",long:"Creative Commons Attribution 4.0 International"},"cc-by-sa-4.0":{short:"CC BY-SA 4.0",long:"Creative Commons Attribution Share Alike 4.0 International"},"gpl-3.0":{short:"GNU GPLv3",long:"GNU General Public License v3.0"},isc:{short:"ISC",long:"ISC License"},"lgpl-3.0":{short:"GNU LGPLv3",long:"GNU Lesser General Public License v3.0"},mit:{short:"MIT",long:"MIT License"},other:{short:"Other",long:"Other"}})),a=Array.from(r.keys());function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short";if(!e)return"None";const n=r.get(e);if(!n)throw new Error("Unknown license identifier: ".concat(e));return n[t]}function l(e){return"Copyright ".concat((new Date).getFullYear()," ").concat((0,s.RX)(e))}},11342:function(e,t,n){n.d(t,{Le:function(){return o},Xk:function(){return u},Z8:function(){return c},ap:function(){return h},bh:function(){return d},g4:function(){return i},mL:function(){return l},sZ:function(){return m}});var s=n(51289),r=n(18582),a=n(11222);function i(e,t){return["".concat("https://graph.microsoft.com","/v1.0").concat(e),t]}function l(e,t){return(n,s)=>t?s&&!s["@odata.nextLink"]?null:s&&0!==n?[s["@odata.nextLink"],t]:i(e,t):null}function o(e){if(e){if(e.endsWith(".xlsx"))return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";if(e.endsWith(".pptx"))return"application/vnd.openxmlformats-officedocument.presentationml.presentation";if(e.endsWith(".docx"))return"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}return"application/octet-stream"}async function c(e,t,n){const s=n?await(0,r.r)(...i("/me/memberOf/microsoft.graph.group",t)):{value:[]};return(await Promise.all([(0,r.r)(...i("/me/drives",t)).catch((()=>null)),...s.value.map((e=>(0,r.r)(...i("/groups/".concat(e.id,"/drives"),t)).catch((()=>null))))])).filter(a.K).flatMap((e=>e.value))}function d(e,t){var n,s;return((null===e||void 0===e?void 0:e.remoteItem)?null===(n=e.remoteItem.file)||void 0===n?void 0:n.mimeType:null===e||void 0===e||null===(s=e.file)||void 0===s?void 0:s.mimeType)||o(t)}function h(e){return(null===e||void 0===e?void 0:e.remoteItem)?e.remoteItem.size:null===e||void 0===e?void 0:e.size}function u(e){return!!/\/drives\/[!a-zA-Z0-9-_]+\/items\/([!a-zA-Z0-9-_]+)/.test(e)}function m(e){s.Qg&&n.e(2303).then(n.t.bind(n,52303,23)).then((t=>e(t)))}},56912:function(e,t,n){n.d(t,{$r:function(){return d},ng:function(){return u},uF:function(){return m},xT:function(){return c}});var s=n(45633),r=n(602),a=n(67294),i=n(33042),l=n(72760),o=n(928);function c(e){return!!e&&"error"in e}function d(e){let{imports:t}=e;const[[n]=[]]=t;if(!n)return{mainSpecifier:n,directImports:new Map};const s=[...new Set(t.flat())].map((e=>({specifier:e,children:[],childrenSet:new Set}))),r=new Map(s.map((e=>[e.specifier,e]))),a=new Map;for(const[i,l]of t){i===n&&a.set(l,[]);const e=r.get(i),t=r.get(l);e.childrenSet.has(l)||(e.childrenSet.add(l),e.children.push(t))}for(const i of a.keys())a.set(i,h(r.get(i),n));return{mainSpecifier:n,directImports:a}}function h(e,t){let{specifier:n,children:s}=e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return r.has(n)?[]:(r.add(n),[[t,n],...s.flatMap((e=>h(e,n,r)))])}function u(e,t,n){const s=new Map(n.filter((e=>"notebook"===e.type)).map((e=>{let{specifier:t,value:n}=e;return[t,o.Z.parse(n)]}))),r=new Map(Object.entries(e).map((e=>{let[t,n]=e;var r;const a=s.has(t)?s.get(t).version:void 0,i=c(n)||null===(r=o.Z.parse(n.resolution))||void 0===r?void 0:r.version;return[t,{lockStatus:void 0!==a?"locked":"unlocked",version:a,latestVersion:i,updatesAvailable:void 0!==a&&a!==i}]})));for(const[a,i]of t){let e=0,t=!1;for(const[,s]of i){const n=r.get(s);e+="locked"===(null===n||void 0===n?void 0:n.lockStatus)?1:0,t||(t=!!(null===n||void 0===n?void 0:n.updatesAvailable))}const n=r.get(a);n&&(n.lockStatus=e===i.length?"locked":0===e?"unlocked":"mixed",n.updatesAvailable=t)}return r}function m(e){let{id:t,saveVersion:n,model:o}=e,{ignoreResolutions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const d=(0,a.useRef)(n),h=(0,a.useRef)(o.history.length),u=(0,a.useRef)(),m=(0,a.useRef)(new Set(o.nodes.map((e=>(0,s.oo)((0,l.Qc)(e))?e.id:void 0)).filter((e=>e)))),p=o.history.slice(h.current);for(const r of p){const{type:e,version:t}=r;switch(e){case"insert_node":case"modify_node":{const{node_id:e}=r,n=(0,i.DY)(o,e);if(!n)break;(0,s.oo)((0,l.Qc)(n))&&(m.current.add(e),d.current=t);break}case"remove_node":{const{node_id:e}=r;m.current.has(e)&&(m.current.delete(e),d.current=t);break}case"resolve_dependency":d.current=t}}h.current=o.history.length;const x="".concat(t,"@").concat(Math.min(n,d.current)),f="/document/".concat(x,"/imports").concat(c?"":"?resolutions=".concat(x));try{const[e]=(0,r.h_)(f);return e&&(u.current=e),u.current}catch(g){return console.error("notebook import resolutions failed to load."),u.current}}},76020:function(e,t,n){n.d(t,{Q:function(){return a},x:function(){return i}});var s=n(73935);const r=new WeakMap;function a(e){let t=r.get(e);if(t)return t;const n=[];return t=t=>{n.push(t),1===n.length&&Promise.resolve().then((()=>{(0,s.unstable_batchedUpdates)((()=>{n.splice(0,n.length).forEach(e.dispatch)}))}))},r.set(e,t),t}function i(e,t){let n=e.getState();return e.subscribe((()=>{const s=e.getState();s!==n&&(n=s,t())}))}}}]);