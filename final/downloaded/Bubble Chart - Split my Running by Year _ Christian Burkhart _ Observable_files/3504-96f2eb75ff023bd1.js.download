"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3504],{76522:function(e,t,s){var a=s(41799),n=s(69396),l=s(85893);s(67294);t.Z=e=>(0,l.jsx)("svg",(0,n.Z)((0,a.Z)({width:"8",height:"16",viewBox:"0 0 8 16",fill:"none"},e),{children:(0,l.jsx)("path",{d:"M4.74329 10.1741C4.34605 10.6155 3.65395 10.6155 3.25671 10.1741L1.00207 7.66897C0.4229 7.02544 0.879592 6 1.74536 6L6.25464 6C7.12041 6 7.5771 7.02544 6.99793 7.66897L4.74329 10.1741Z",fill:"currentColor"})}))},77063:function(e,t,s){var a=s(41799),n=s(69396),l=s(85893);s(67294);t.Z=e=>(0,l.jsx)("svg",(0,n.Z)((0,a.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:(0,l.jsx)("path",{d:"M3.06752 3H12.9325C13.3564 3 13.588 3.49443 13.3166 3.82009L9 9V11.7929C9 11.9255 8.94732 12.0527 8.85355 12.1464L7.85355 13.1464C7.53857 13.4614 7 13.2383 7 12.7929V9L2.68341 3.82009C2.41202 3.49443 2.6436 3 3.06752 3Z",fill:"currentColor"})}))},43529:function(e,t,s){var a=s(41799),n=s(69396),l=s(85893);s(67294);t.Z=e=>(0,l.jsxs)("svg",(0,n.Z)((0,a.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 5C1 2.79086 2.79086 1 5 1H11C13.2091 1 15 2.79086 15 5V11C15 13.2091 13.2091 15 11 15H5C2.79086 15 1 13.2091 1 11V5ZM5 3C3.89543 3 3 3.89543 3 5V11C3 12.1046 3.89543 13 5 13H11C12.1046 13 13 12.1046 13 11V5C13 3.89543 12.1046 3 11 3H5Z",fill:"currentColor"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7071 6.70711L7.00001 11.4142L4.29291 8.70711L5.70712 7.29289L7.00001 8.58579L10.2929 5.29289L11.7071 6.70711Z",fill:"currentColor"})]}))},44516:function(e,t,s){var a=s(41799),n=s(69396),l=s(85893);s(67294);t.Z=e=>(0,l.jsxs)("svg",(0,n.Z)((0,a.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 4.75C13.6904 4.75 14.25 5.30964 14.25 6C14.25 6.69036 13.6904 7.25 13 7.25C12.3096 7.25 11.75 6.69036 11.75 6C11.75 5.30964 12.3096 4.75 13 4.75ZM15.75 6C15.75 4.48122 14.5188 3.25 13 3.25C11.4812 3.25 10.25 4.48122 10.25 6C10.25 7.51878 11.4812 8.75 13 8.75C14.5188 8.75 15.75 7.51878 15.75 6Z",fill:"currentColor"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.5 8L11.5 8V6L1.5 6C0.947715 6 0.5 6.44772 0.5 7C0.5 7.55228 0.947715 8 1.5 8Z",fill:"currentColor"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.17594 2.56653L8.67594 10.5665L10.324 9.43347L4.82403 1.43347C4.51114 0.978369 3.88856 0.863076 3.43345 1.17596C2.97835 1.48885 2.86306 2.11143 3.17594 2.56653Z",fill:"currentColor"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 10.75C10.6904 10.75 11.25 11.3096 11.25 12C11.25 12.6904 10.6904 13.25 10 13.25C9.30964 13.25 8.75 12.6904 8.75 12C8.75 11.3096 9.30964 10.75 10 10.75ZM12.75 12C12.75 10.4812 11.5188 9.25 10 9.25C8.48122 9.25 7.25 10.4812 7.25 12C7.25 13.5188 8.48122 14.75 10 14.75C11.5188 14.75 12.75 13.5188 12.75 12Z",fill:"currentColor"})]}))},47495:function(e,t,s){var a=s(41799),n=s(69396),l=s(85893);s(67294);t.Z=e=>(0,l.jsxs)("svg",(0,n.Z)((0,a.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,l.jsx)("rect",{x:"2",y:"3",width:"3",height:"2",rx:"1",fill:"currentColor"}),(0,l.jsx)("rect",{x:"2",y:"12",width:"12",height:"2",rx:"1",fill:"currentColor"}),(0,l.jsx)("rect",{x:"2",y:"9",width:"9",height:"2",rx:"1",fill:"currentColor"}),(0,l.jsx)("rect",{x:"2",y:"6",width:"6",height:"2",rx:"1",fill:"currentColor"})]}))},70975:function(e,t,s){s.d(t,{Y4:function(){return p},jI:function(){return v},r9:function(){return j},uf:function(){return f},vz:function(){return m},wt:function(){return x}});var a=s(41799),n=s(69396),l=s(99534),r=s(85893),i=s(65988),c=s.n(i),o=s(90793),d=s(94184),u=s.n(d),h=s(67294);const m=h.forwardRef((function(e,t){var{className:s}=e,i=(0,l.Z)(e,["className"]);return(0,r.jsx)(o.vz,(0,n.Z)((0,a.Z)({},i),{className:u()("f6 fw5 dark-gray br2 lh-copy truncate",s),ref:t}))})),p=h.forwardRef((function(e,t){var{className:s}=e,i=(0,l.Z)(e,["className"]);return(0,r.jsx)(o.Y4,(0,n.Z)((0,a.Z)({},i),{className:"pointer mh2 mv1 w-100 dib outline-0".concat(s?" ".concat(s):""),ref:t,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.currentTarget.dispatchEvent(new Event("mousedown",{bubbles:!0})))}}))})),x=h.forwardRef((function(e,t){var{className:s}=e,i=(0,l.Z)(e,["className"]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.wt,(0,n.Z)((0,a.Z)({},i),{ref:t,className:"pointer hover-bg-near-white f6 fw5 dark-gray lh-copy mb1 ".concat(s||"")})),(0,r.jsx)(c(),{id:"5b1276abdde02cf",children:"[data-reach-listbox-option][data-current-nav]{background-color:var(--near-white)}"})]})})),f=h.forwardRef((function(e,t){var{className:s}=e,i=(0,l.Z)(e,["className"]);return(0,r.jsx)(o.uf,(0,n.Z)((0,a.Z)({},i),{ref:t,className:"list outline-0 ph1 pv2 ma1 ".concat(s||"")}))})),v=h.forwardRef((function(e,t){var{className:s}=e,i=(0,l.Z)(e,["className"]);return(0,r.jsx)(o.jI,(0,n.Z)((0,a.Z)({},i),{ref:t,className:"bg-white ba b--silver br2 shadow-4 overflow-auto ".concat(s||"")}))})),j=h.forwardRef((function(e,t){var{className:s}=e,i=(0,l.Z)(e,["className"]);return(0,r.jsx)(o.r9,(0,n.Z)((0,a.Z)({className:"".concat(s||"")},i),{ref:t}))}))},6016:function(e,t,s){s.d(t,{J_:function(){return f},oe:function(){return v}});var a=s(85893),n=s(65988),l=s.n(n),r=s(22027),i=s(43529),c=s(42568),o=s(82666),d=s(12447),u=s(10718),h=s(33042),m=s(67294),p=s(4242);const x=e=>{let{id:t,data:s,dispatch:n}=e;const r=(0,u.v)(s,n),{operations:{select:{columns:i}}}=s;return(0,a.jsxs)(c.YI,{className:"bg-white ba b--silver br2 shadow-4 outline-0 pa12 overflow-auto",style:{minWidth:"150px",maxWidth:"".concat(300,"px"),maxHeight:"400px"},"data-cy":"columns-popover",children:[(0,a.jsxs)(c.sd,{children:[(0,a.jsxs)("div",{className:"jsx-bca62cd75c72199c flex justify-between pb12",children:[(0,a.jsx)("div",{className:"jsx-bca62cd75c72199c gray f7",children:"Columns"}),r&&null!==i&&i.length<r.size&&(0,a.jsx)("button",{onClick:()=>{n({type:"setDataOperations",id:t,operations:{select:{columns:Array.from(r.keys())}}})},className:"jsx-bca62cd75c72199c bg-transparent bn blue fw6 f7 pa0 pointer",children:"Show all"})]}),(0,a.jsx)(f,{data:s,dispatch:n,id:t,schema:r,maxWidth:300})]}),(0,a.jsx)(l(),{id:"bca62cd75c72199c",children:".only-button.jsx-bca62cd75c72199c:hover{color:black!important}"})]})},f=e=>{let{data:t,dispatch:s,id:n,schema:l,maxWidth:i}=e;const{operations:{select:{columns:c}}}=t,o=l?Array.from(l.keys()):[],u=(0,d.GS)(d.pp),{0:h,1:p}=(0,m.useState)();return(0,a.jsx)(a.Fragment,{children:l?o.length?o.map((e=>(0,a.jsxs)("div",{className:"flex mb1",onMouseEnter:()=>p(e),onMouseLeave:()=>p(void 0),children:[(0,a.jsxs)("label",{className:"flex fg1 items-center mr2 f6 fw5 lh-copy pointer ".concat((null===c||void 0===c?void 0:c.includes(e))||null===c?"dark-gray":"gray"),style:{flexGrow:1},children:[(0,a.jsx)("input",{className:"pointer mr2",type:"checkbox",checked:null===c||c.includes(e),onChange:()=>{const t=null===c?o.filter((t=>t!==e)):c.includes(e)?c.filter((t=>t!==e)):c.concat(e);s({type:"setDataOperations",id:n,operations:{select:{columns:t}}})}}),(0,a.jsx)("div",{style:{maxWidth:i?"".concat(i-40,"px"):void 0,overflowX:"hidden",textOverflow:"ellipsis"},children:e})]}),u&&(0,a.jsx)("button",{className:"pointer pa0 only-button",style:{color:h===e?"gray":"white",backgroundColor:"white",border:"none"},onClick:()=>s({type:"setDataOperations",id:n,operations:{select:{columns:[e]}}}),children:"only"})]},e))):(0,a.jsx)("div",{className:"gray","data-cy":"no-columns",children:"No columns found"}):(0,a.jsx)("div",{className:"w-100 dark-gray",children:(0,a.jsx)(r.Z,{})})})},v=(0,p.$j)(((e,t)=>{let{notebook:s}=e,{id:a}=t;return{data:(0,h.DY)(s.model,a).data}}),(e=>({dispatch:e})))((e=>{let{id:t,data:s,dispatch:n,mobile:l}=e;const{operations:{select:{columns:r}}}=s,d=(null===r||void 0===r?void 0:r.length)||0;return l?(0,a.jsxs)(c.sN,{className:"flex items-center justify-between mb1 lh-copy".concat(d>0?" blue":""),style:{padding:"2px 12px"},onSelect:()=>n({type:"showModal",modal:"tableOperation",modalProps:{id:t,operation:"columns"}}),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.Z,{className:"mr1"}),"Columns"]}),d>0&&(0,a.jsx)("span",{className:"fw4 ml1",children:d})]}):(0,a.jsx)(o.Q,{label:"Columns",active:d>0,countLabel:String(d),icon:i.Z,children:(0,a.jsx)(x,{id:t,data:s,dispatch:n})})}))},29162:function(e,t,s){s.d(t,{c7:function(){return g},wn:function(){return k}});var a=s(85893),n=s(65988),l=s.n(n),r=s(76522),i=s(49516),c=s(77063),o=s(22027),d=s(89905),u=s(70975),h=s(42568),m=s(10718),p=s(33042),x=s(84236),f=s(67294),v=s(4242),j=s(82666);const b=e=>{let{id:t,dispatch:s,data:n}=e;const l=(0,m.v)(n,s);return(0,a.jsx)(h.YI,{className:"bg-white ba b--silver br2 shadow-4 outline-0 pa12 mw6","data-cy":"filter-popover",children:(0,a.jsxs)(h.sd,{children:[(0,a.jsx)("div",{className:"gray f7 pb12",children:"Filter"}),(0,a.jsx)(g,{id:t,data:n,dispatch:s,schema:l})]})})},g=e=>{let{data:t,id:s,dispatch:n,schema:l}=e;const{operations:{filter:r}}=t;return(0,a.jsxs)(a.Fragment,{children:[r.map(((e,r)=>(0,a.jsx)(y,{id:s,data:t,dispatch:n,schema:l,index:r,filter:e},"".concat(e.type).concat(JSON.stringify(e.operands))))),(0,a.jsx)(y,{id:s,data:t,dispatch:n,schema:l})]})},y=e=>{let{id:t,data:s,dispatch:n,schema:l,index:r,filter:i}=e;const{0:c,1:o}=(0,f.useState)(null===i||void 0===i?void 0:i.operands[0].value),{0:u,1:h}=(0,f.useState)(null===i||void 0===i?void 0:i.type),{0:m,1:p}=(0,f.useState)(2===(null===i||void 0===i?void 0:i.operands.length)?i.operands[1].value:null===i||void 0===i?void 0:i.operands.slice(1).map((e=>{let{value:t}=e;return t})).join(",")),v=c&&l?l.get(c):void 0;function j(e){let a=[...s.operations.filter];void 0!==r?a[r]=e:(a=[...a,e],o(void 0),h(void 0),p(void 0)),n({type:"setDataOperations",id:t,operations:{filter:a}})}function b(e,t,s){void 0!==e&&void 0!==t&&((0,x.Ec)(t)?j({type:t,operands:[{type:"column",value:e}]}):void 0!==s&&((0,x.nq)(t)&&"string"===typeof s?j({type:t,operands:[{type:"column",value:e},...(0,x.$d)(s,v)]}):j({type:t,operands:[{type:"column",value:e},"date"===(null===v||void 0===v?void 0:v.type)&&"string"===typeof s?{type:"date",value:s}:{type:"primitive",value:s}]})))}function g(e){p(e),b(c,u,e)}return(0,f.useEffect)((()=>{void 0===i&&c&&!v&&(o(void 0),h(void 0),p(void 0))}),[i,o,h,p,l,v,c]),(0,a.jsxs)("div",{className:"flex mb2","data-cy":"filter-row",children:[(0,a.jsx)(C,{setColumn:e=>{o(e),h((0,x.xm)(null===l||void 0===l?void 0:l.get(e))[0]),p(void 0)},column:c,schema:l}),(0,a.jsx)(Z,{type:u,setType:function(e){h(e),b(c,e,m)},columnSchema:v}),u&&!(0,x.Ec)(u)&&v&&("boolean"===v.type?(0,a.jsx)(w,{value:m,setValue:g}):(0,a.jsx)(N,{inputType:(0,x.nq)(u)?"string":v.type,value:m,setValue:g})),(0,a.jsx)("button",{className:"bg-transparent bn light-gray pointer",title:"Remove filter",onClick:()=>{if(void 0!==r){const e=[...s.operations.filter];e.splice(r,1),n({type:"setDataOperations",id:t,operations:{filter:e}})}else o(void 0),h(void 0),p(void 0)},children:(0,a.jsx)(d.Z,{})})]})},N=e=>{let{setValue:t,value:s,inputType:n}=e;const{0:r,1:i}=(0,f.useState)(s);function c(e){e!==s&&e.length>0&&t("number"===n||"integer"===n||"bigint"===n?+e:e)}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"date"===n?"datetime-local":"number"===n||"integer"===n||"bigint"===n?"number":"string",value:r||"",onChange:e=>i(e.target.value),onBlur:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key&&c(e.currentTarget.value)},className:"jsx-5b87146e697cf4d4 "+"monospace fw6 b--solid ba br2 b--light-gray dark-gray ml2 w-100".concat("date"!==n?" mw5":"")}),(0,a.jsx)(l(),{id:"5b87146e697cf4d4",children:"input.jsx-5b87146e697cf4d4::-webkit-calendar-picker-indicator{display:none}"})]})},w=e=>{let{value:t,setValue:s}=e;return(0,a.jsxs)(u.vz,{onChange:e=>s("true"===e),value:void 0!==t?"".concat(t):"",className:"b--solid ba br2 b--light-gray ml2",children:[(0,a.jsxs)(u.Y4,{className:"flex items-center justify-between f6 fw6 dark-gray",children:[(0,a.jsx)("div",{children:!0===t?"True":!1===t?"False":(0,a.jsx)("span",{className:"light-gray",children:"Value"})}),(0,a.jsx)(u.r9,{className:"inline-flex items-center",style:{marginRight:"16px"},children:(0,a.jsx)(r.Z,{})})]}),(0,a.jsx)(u.jI,{className:"absolute",style:{minWidth:"100px"},portal:!1,children:(0,a.jsx)(u.uf,{style:{padding:"12px 0",margin:0},children:["true","false"].map((e=>(0,a.jsxs)(u.wt,{value:e,className:"flex items-center justify-between ph12",children:["true"===e?"True":"False",e==="".concat(t)&&(0,a.jsx)(i.Z,{className:"ml2"})]},"".concat(e))))})})]})},C=e=>{let{setColumn:t,column:s,schema:n}=e;const l=n&&Array.from(n.keys());return(0,a.jsxs)(u.vz,{onChange:t,value:s||"",className:"b--solid ba br2 b--light-gray",style:{flexShrink:"0"},children:[(0,a.jsxs)(u.Y4,{className:"flex items-center justify-between f6 fw6 dark-gray",children:[(0,a.jsx)("div",{style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis"},children:null!==s&&void 0!==s?s:(0,a.jsx)("span",{className:"light-gray",children:"Column"})}),(0,a.jsx)(u.r9,{className:"inline-flex items-center",style:{marginRight:"16px"},children:(0,a.jsx)(r.Z,{})})]}),(0,a.jsx)(u.jI,{className:"absolute",style:{minWidth:"100px",maxHeight:"300px"},portal:!1,children:(0,a.jsx)(u.uf,{style:{padding:"12px 0",margin:0},children:l?l.length?l.map((e=>(0,a.jsxs)(u.wt,{value:e,className:"flex items-center justify-between ph12",children:[e,s===e&&(0,a.jsx)(i.Z,{className:"ml2"})]},e))):(0,a.jsx)("div",{className:"ph12 gray",children:"No columns found"}):(0,a.jsx)("div",{className:"ph12 dark-gray",children:(0,a.jsx)(o.Z,{})})})})]})},Z=e=>{let{type:t,setType:s,columnSchema:n}=e;const l=(0,x.xm)(n);var c,o;return(0,a.jsxs)(u.vz,{onChange:e=>s(e),value:null!==t&&void 0!==t?t:"",disabled:0===l.length,className:"b--solid ba br2 b--light-gray ml2",style:{flexShrink:"0"},children:[(0,a.jsxs)(u.Y4,{className:"flex items-center justify-between f6 fw6 dark-gray",children:[null!==(c=(0,x.a8)(t,null===n||void 0===n?void 0:n.type))&&void 0!==c?c:(0,a.jsx)("span",{className:"light-gray",children:n&&0===l.length?"No filters available":"Operator"}),(0,a.jsx)(u.r9,{className:"inline-flex items-center",style:{marginRight:"16px"},children:(0,a.jsx)(r.Z,{})})]}),(0,a.jsx)(u.jI,{portal:!1,className:"absolute",children:(0,a.jsx)(u.uf,{style:{padding:"12px 0",margin:0},children:l.map((e=>(0,a.jsxs)(u.wt,{value:e,className:"flex items-center justify-between ph12",children:[null!==(o=(0,x.a8)(e,null===n||void 0===n?void 0:n.type))&&void 0!==o?o:(0,a.jsx)("span",{className:"light-gray",children:"Operator"}),t===e&&(0,a.jsx)(i.Z,{className:"ml2"})]},e)))})})]})},k=(0,v.$j)(((e,t)=>{let{notebook:s}=e,{id:a}=t;return{data:(0,p.DY)(s.model,a).data}}),(e=>({dispatch:e})))((e=>{let{id:t,data:s,dispatch:n,mobile:l}=e;const r=s.operations.filter.length;return l?(0,a.jsxs)(h.sN,{className:"flex items-center justify-between mb1 lh-copy".concat(r>0?" blue":""),style:{padding:"2px 12px"},onSelect:()=>n({type:"showModal",modal:"tableOperation",modalProps:{id:t,operation:"filter"}}),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.Z,{className:"mr1"}),"Filter"]}),r>0&&(0,a.jsx)("span",{className:"fw4 ml1",children:r})]}):(0,a.jsx)(j.Q,{label:"Filter",active:r>0,countLabel:String(r),icon:c.Z,children:(0,a.jsx)(b,{id:t,data:s,dispatch:n})})}))},82666:function(e,t,s){s.d(t,{Q:function(){return h}});var a=s(41799),n=s(69396),l=s(99534),r=s(85893),i=s(94184),c=s.n(i),o=s(42568),d=s(69150),u=s(3142);const h=(0,s(4242).$j)((e=>{let{notebook:t}=e;return{disabled:t.safe||(0,u.os)(t)}}),(e=>({dispatch:e})))((e=>{var{disabled:t,children:s,label:i,active:u,countLabel:h,icon:m,className:p=""}=e,x=(0,l.Z)(e,["disabled","children","label","active","countLabel","icon","className"]);return(0,r.jsxs)(o.v2,{children:[(0,r.jsxs)(o.j2,(0,n.Z)((0,a.Z)({className:c()(t?"moon-gray":"dark-gray hover-black",u?"bg-white":"bg-transparent","mr-tiny bn ph2 f6 fw5 pa0 br2 lh-copy pointer flex items-center focus-black-05",p),style:{minHeight:d.T6-4},disabled:t,"data-cy":"".concat(i.toLowerCase(),"-button")},x),{children:[(0,r.jsx)(m,{className:"mr1"}),i,u&&(0,r.jsx)("span",{className:"fw4 ml1 nowrap",children:h})]})),s]})}))},65678:function(e,t,s){s.d(t,{ck:function(){return h},p2:function(){return p}});var a=s(41799),n=s(85893),l=s(33090),r=s(44516),i=s(42568),c=s(82666),o=s(33042),d=s(67294),u=s(4242);const h=e=>{let{data:t,dispatch:s,id:l}=e;const{operations:{slice:r}}=t;var i;const{0:c,1:o}=(0,d.useState)(null!==(i=r.from)&&void 0!==i?i:0);var u;const{0:h,1:p}=(0,d.useState)(null!==(u=r.to)&&void 0!==u?u:100);function x(e){s({type:"setDataOperations",id:l,operations:{slice:(0,a.Z)({},r,e)}})}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{type:"from",nodeDataValue:r.from,normalize:e=>null!==e?e:c,setNodeData:e=>{e.from&&o(e.from),x(e)},className:"mb3"},"from-".concat(r.from)),(0,n.jsx)(m,{type:"to",nodeDataValue:r.to,normalize:e=>null!==e?e:h,setNodeData:e=>{e.to&&p(e.to),x(e)}},"to-".concat(r.to))]})},m=e=>{let{type:t,nodeDataValue:s,normalize:a,setNodeData:r,className:i}=e;const{0:c,1:o}=(0,d.useState)(a(s));function u(e){0===e.length?o(a(s)):r({[t]:parseInt(e)})}return(0,n.jsxs)("div",{className:"fw6 near-black".concat(i?" ".concat(i):""),style:{display:"grid",gridTemplateColumns:"1.25fr 2fr 1fr"},children:[(0,n.jsx)("div",{className:"flex items-center lh-copy",children:"to"===t?"To":"From"}),(0,n.jsxs)("div",{className:"flex items-center pr2",children:[(0,n.jsx)(l.E,{className:"flex items-center",checked:null!==s,onChange:()=>r({[t]:c})}),(0,n.jsx)("input",{type:"number",min:0,className:"monospace fw6 b--solid ba br2 b--light-gray ".concat(null===s?"gray":"dark-gray"),style:{width:"6rem"},value:c,disabled:null===s,onChange:e=>o(e.target.value),onBlur:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&u(e.currentTarget.value)}})]}),(0,n.jsx)(l.E,{label:"to"===t?"End":"Start",className:"flex items-center",checked:null===s,onChange:()=>r({[t]:null})})]})},p=(0,u.$j)(((e,t)=>{let{notebook:s}=e,{id:a}=t;return{data:(0,o.DY)(s.model,a).data}}),(e=>({dispatch:e})))((e=>{let{id:t,data:s,dispatch:a,mobile:l}=e;const{operations:{slice:o}}=s,d=null!==o.from||null!==o.to;var u,m,p,x;return l?(0,n.jsxs)(i.sN,{className:"flex items-center justify-between mb1 lh-copy".concat(d?" blue":""),style:{padding:"2px 12px"},onSelect:()=>a({type:"showModal",modal:"tableOperation",modalProps:{id:t,operation:"slice"}}),"data-cy":"slice-button",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(r.Z,{className:"mr1"}),"Slice"]}),d&&(0,n.jsxs)("span",{className:"fw4 ml1 nowrap",children:["[",null!==(u=o.from)&&void 0!==u?u:0,", ",null!==(m=o.to)&&void 0!==m?m:"End","]"]})]}):(0,n.jsx)(c.Q,{label:"Slice",active:d,countLabel:"".concat(null!==(p=o.from)&&void 0!==p?p:0,"\u2013").concat(null!==(x=o.to)&&void 0!==x?x:"End"),icon:r.Z,className:"mr1",children:(0,n.jsx)(i.YI,{className:"bg-white ba b--silver br2 shadow-4 outline-0 pa12 overflow-auto","data-cy":"slice-popover",children:(0,n.jsxs)(i.sd,{children:[(0,n.jsx)("div",{className:"gray f7 pb12",children:"Slice"}),(0,n.jsx)(h,{data:s,dispatch:a,id:t})]})})})}))},42510:function(e,t,s){s.d(t,{PE:function(){return w},dE:function(){return g}});var a=s(85893),n=s(76522),l=s(49516),r=s(22027),i=s(47495),c=s(41799),o=s(69396),d=s(67294);var u=e=>(0,a.jsxs)("svg",(0,o.Z)((0,c.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{children:[(0,a.jsx)("rect",{x:"2",y:"11",width:"3",height:"2",rx:"1",fill:"currentColor"}),(0,a.jsx)("rect",{x:"2",y:"2",width:"12",height:"2",rx:"1",fill:"currentColor"}),(0,a.jsx)("rect",{x:"2",y:"5",width:"9",height:"2",rx:"1",fill:"currentColor"}),(0,a.jsx)("rect",{x:"2",y:"8",width:"6",height:"2",rx:"1",fill:"currentColor"})]})),h=s(89905),m=s(70975),p=s(42568),x=s(82666),f=s(10718),v=s(33042),j=s(4242);const b=e=>{let{id:t,dispatch:s,data:n}=e;const l=(0,f.v)(n,s);return(0,a.jsx)(p.YI,{className:"bg-white ba b--silver br2 shadow-4 outline-0 pa12","data-cy":"sort-popover",children:(0,a.jsxs)(p.sd,{children:[(0,a.jsx)("div",{className:"gray f7 pb12",children:"Sort"}),(0,a.jsx)(g,{id:t,data:n,dispatch:s,schema:l})]})})},g=e=>{let{id:t,data:s,dispatch:n,schema:l}=e;const{operations:{sort:r}}=s;return(0,a.jsxs)(a.Fragment,{children:[r.map(((e,r)=>{let{column:i,direction:c}=e;return(0,a.jsx)(y,{index:r,id:t,data:s,dispatch:n,schema:l,selectedColumn:i,selectedDirection:c},i)})),(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)(y,{id:t,data:s,dispatch:n,schema:l})})]})},y=e=>{let{id:t,data:s,dispatch:r,index:c,schema:o,selectedColumn:p,selectedDirection:x}=e;const{0:f,1:v}=(0,d.useState)(p),{0:j,1:b}=(0,d.useState)(x);function g(e,a){if(void 0!==c){const n=[...s.operations.sort];n[c]={column:e,direction:a},r({type:"setDataOperations",id:t,operations:{sort:n}})}else r({type:"setDataOperations",id:t,operations:{sort:[...s.operations.sort,{column:e,direction:a}]}}),v(void 0),b(void 0)}return(0,a.jsxs)("div",{className:"flex mb2","data-cy":"sort-row",children:[(0,a.jsxs)(m.vz,{onChange:e=>{v(e),void 0!==j&&g(e,j)},value:f||"",className:"b--solid ba br2 b--light-gray",children:[(0,a.jsxs)(m.Y4,{className:"flex items-center justify-between f6 fw6 dark-gray",children:[(0,a.jsx)("div",{style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis"},children:void 0===f?(0,a.jsx)("span",{className:"light-gray",children:"Column"}):f}),(0,a.jsx)(m.r9,{className:"inline-flex items-center",style:{marginRight:"16px"},children:(0,a.jsx)(n.Z,{})})]}),(0,a.jsx)(N,{data:s,schema:o,selectedColumn:f})]}),(0,a.jsxs)(m.vz,{onChange:e=>{b(e),void 0!==f&&g(f,e)},value:j||"",className:"b--solid ba br2 b--light-gray ml2",children:[(0,a.jsxs)(m.Y4,{className:"flex items-center justify-between f6 fw6 dark-gray",children:[void 0===j?(0,a.jsx)("span",{className:"light-gray",children:"Direction"}):"asc"===j?(0,a.jsxs)("div",{className:"inline-flex items-center",children:[(0,a.jsx)(i.Z,{className:"mr1"}),"Ascending"]}):(0,a.jsxs)("div",{className:"inline-flex items-center",children:[(0,a.jsx)(u,{className:"mr1"}),"Descending"]}),(0,a.jsx)(m.r9,{className:"inline-flex items-center",style:{marginRight:"16px"},children:(0,a.jsx)(n.Z,{})})]}),(0,a.jsx)(m.jI,{portal:!1,className:"absolute",children:(0,a.jsx)(m.uf,{style:{padding:"12px 0",margin:0},children:["desc","asc"].map(((e,t)=>(0,a.jsxs)(m.wt,{value:e,className:"flex items-center justify-between ph12",style:1===t?{marginBottom:0}:{},children:["asc"===e?(0,a.jsxs)("div",{className:"inline-flex items-center",children:[(0,a.jsx)(i.Z,{className:"mr1"}),"Ascending"]}):(0,a.jsxs)("div",{className:"inline-flex items-center",children:[(0,a.jsx)(u,{className:"mr1"}),"Descending"]}),j===e&&(0,a.jsx)(l.Z,{className:"ml2"})]},e)))})})]}),void 0!==c&&(0,a.jsx)("button",{disabled:void 0===f,className:"bg-transparent bn light-gray pointer",onClick:()=>{const e=[...s.operations.sort];e.splice(c,1),r({type:"setDataOperations",id:t,operations:{sort:e}})},children:(0,a.jsx)(h.Z,{})})]},f)},N=e=>{let{data:t,schema:s,selectedColumn:n}=e;const i=s&&Array.from(s.keys()),c=(0,d.useCallback)((e=>t.operations.sort.some((t=>{let{column:s}=t;return s===e}))),[t.operations.sort]);return(0,a.jsx)(m.jI,{className:"absolute",style:{minWidth:"100px",maxHeight:"300px"},portal:!1,children:(0,a.jsx)(m.uf,{style:{padding:"12px 0",margin:0},children:i?i.length?i.map((e=>(0,a.jsxs)(m.wt,{value:e,disabled:c(e),className:"flex items-center justify-between ph12".concat(c(e)&&n!==e?" light-gray":""),children:[e,n===e&&(0,a.jsx)(l.Z,{className:"ml2"})]},e))):(0,a.jsx)("div",{className:"ph12 gray",children:"No columns found"}):(0,a.jsx)("div",{className:"ph12 dark-gray",children:(0,a.jsx)(r.Z,{})})})})},w=(0,j.$j)(((e,t)=>{let{notebook:s}=e,{id:a}=t;return{data:(0,v.DY)(s.model,a).data}}),(e=>({dispatch:e})))((e=>{let{id:t,data:s,dispatch:n,mobile:l}=e;const r=s.operations.sort.length;return l?(0,a.jsxs)(p.sN,{className:"flex items-center justify-between mb1 lh-copy".concat(r>0?" blue":""),style:{padding:"2px 12px"},onSelect:()=>n({type:"showModal",modal:"tableOperation",modalProps:{id:t,operation:"sort"}}),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.Z,{className:"mr1"}),"Sort"]}),r>0&&(0,a.jsx)("span",{className:"fw4 ml1",children:r})]}):(0,a.jsx)(x.Q,{label:"Sort",active:r>0,countLabel:String(r),icon:i.Z,children:(0,a.jsx)(b,{id:t,data:s,dispatch:n})})}))},48627:function(e,t,s){s.d(t,{FJ:function(){return c},Y2:function(){return n},YG:function(){return i},n4:function(){return l},zL:function(){return r}});var a=s(3961);class n extends a.i{async process(e){return(await e({type:"request_database_tables",source:this._source,schema:this._schema})).map((e=>({database:null!=e.database?String(e.database):void 0,schema:null!=e.schema?String(e.schema):void 0,table:String(e.name)})))}constructor(e,t){super(),this._source=e,this._schema=t}}class l extends a.i{async process(e){const t=await e({type:"request_table_schema",source:this._source,table:"string"===typeof this._table?{table:this._table}:this._table});return new Map(t.map((e=>[e.name,{type:e.type,databaseType:e.databaseType,nullable:!1!==e.nullable}])))}constructor(e,t){super(),this._source=e,this._table=t}}class r extends a.i{async process(e){return await e({type:"request_database_query",source:this._source,operations:this._operations})}constructor(e,t){super(),this._source=e,this._operations=t}}class i extends a.i{async process(e){return await e({type:"request_database_info",source:this._source})}constructor(e){super(),this._source=e}}class c extends a.i{async process(e){return await e({type:"request_data_source_info",source:this._source})}constructor(e){super(),this._source=e}}},58127:function(e,t,s){s.d(t,{Y:function(){return n}});var a=s(67294);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>!0;const{0:s,1:n}=(0,a.useState)(!1),{0:l,1:r}=(0,a.useState)(new Set);function i(e){e.preventDefault(),e.stopPropagation()}function c(e){i(e);const s=new Set(l);s.add(e.target),r(s),t(e)&&n(!0)}function o(e){i(e);const t=new Set(l);t.delete(e.target),r(t),t.size||n(!1)}function d(t){i(t),s&&(e(t),n(!1),r(new Set))}return{isDraggingOver:s,dragAndDropEvents:{onDragOver:i,onDragEnter:c,onDragLeave:o,onDrop:d}}}},10718:function(e,t,s){s.d(t,{v:function(){return i}});var a=s(48634),n=s(48627),l=s(21857),r=s(67294);function i(e,t){const{0:s,1:i}=(0,r.useState)(),c=(0,r.useRef)(),{isExpanded:o}=(0,a.uF)(),d=(0,l.VQ)(e),u=e.operations.from.table;return(0,r.useEffect)((()=>i(void 0)),[d,u]),(0,r.useEffect)((()=>{if(!o)return;if(!d)return i(new Map);const e=new n.n4(d,u);return c.current=e,e.run(t).then((t=>{e===c.current&&i(t)}),(t=>{e===c.current&&(console.error("Error fetching table schema: ",t),i(new Map))})),()=>{c.current=void 0}}),[d,u,t,o]),s}}}]);